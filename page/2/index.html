<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Kirang Haerang:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="神秘的世界">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="神秘的世界">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>神秘的世界</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">神秘的世界</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="神秘的世界">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">前端--HTML的学习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-13 14:08:22" itemprop="dateCreated datePublished" datetime="2022-03-13T14:08:22+08:00">2022-03-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-03-19 13:44:25" itemprop="dateModified" datetime="2022-03-19T13:44:25+08:00">2022-03-19</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="1、什么是HTML？"><a href="#1、什么是HTML？" class="headerlink" title="1、什么是HTML？"></a>1、什么是HTML？</h3><p>HTML的全称为<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E8%B6%85%E6%96%87%E6%9C%AC%E6%A0%87%E8%AE%B0%E8%AF%AD%E8%A8%80/6972570">超文本标记语言</a>( Hyper Text Markup Language )，是一种<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%A0%87%E8%AE%B0%E8%AF%AD%E8%A8%80/5964436">标记语言</a>。也就是说，HTML语言是跨平台的。</p>
<h3 id="2、HTML的标签"><a href="#2、HTML的标签" class="headerlink" title="2、HTML的标签"></a>2、HTML的标签</h3><h5 id="标题标签"><a href="#标题标签" class="headerlink" title="标题标签"></a>标题标签</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>一级标签<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>二级标签<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>三级标签<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>四级标签<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>五级标签<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-13_14-37-12.png"></p>
<h5 id="段落标签"><a href="#段落标签" class="headerlink" title="段落标签"></a>段落标签</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>测试01<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>测试01<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>测试01<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>测试01<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>测试01<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>测试01<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-13_14-43-18.png"></p>
<h5 id="水平线标签"><a href="#水平线标签" class="headerlink" title="水平线标签"></a>水平线标签</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">测试01</span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line">测试01</span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line">测试01</span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-13_14-50-35.png"></p>
<h5 id="字体标签"><a href="#字体标签" class="headerlink" title="字体标签"></a>字体标签</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">粗体 <span class="symbol">&amp;nbsp;</span> : <span class="symbol">&amp;nbsp;</span> <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">strong</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">斜体 <span class="symbol">&amp;nbsp;</span> : <span class="symbol">&amp;nbsp;</span> <span class="tag">&lt;<span class="name">em</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-13_14-55-10.png"></p>
<h5 id="一些常用的特殊符号"><a href="#一些常用的特殊符号" class="headerlink" title="一些常用的特殊符号"></a>一些常用的特殊符号</h5><table>
<thead>
<tr>
<th align="center">&amp;nbsp；</th>
<th align="center">空格</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&amp;copy；</td>
<td align="center">©</td>
</tr>
<tr>
<td align="center">&amp;gt；</td>
<td align="center">&gt;</td>
</tr>
<tr>
<td align="center">&amp;lt ;</td>
<td align="center">&lt;</td>
</tr>
</tbody></table>
<h5 id="图像标签"><a href="#图像标签" class="headerlink" title="图像标签"></a>图像标签<img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-13_15-57-33.png"></h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-13_16-40-14.png"></p>
<h5 id="链接标签"><a href="#链接标签" class="headerlink" title="链接标签"></a>链接标签</h5><h6 id="页面间链接"><a href="#页面间链接" class="headerlink" title="页面间链接"></a>页面间链接</h6><h5 id><a href="#" class="headerlink" title></a><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-13_16-58-02.png"></h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    链接可以嵌套</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    href : 必填</span></span><br><span class="line"><span class="comment">    target :    _blank 在一个新的页面打开</span></span><br><span class="line"><span class="comment">                _self 在当前网页打开</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.bilibili.com/&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_parent&quot;</span>&gt;</span>点击我跳转到B站<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;1.我的第一个网页.html&quot;</span>&gt;</span>点击我跳转到另一个网页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;1.我的第一个网页.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-13_17-01-25.png"></p>
<h6 id="锚链接"><a href="#锚链接" class="headerlink" title="锚链接"></a>锚链接</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;#top&quot;</span>&gt;</span>顶部<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../resources/image/NiAn.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;测试&quot;</span> <span class="attr">title</span>=<span class="string">&quot;悬停测试&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#top&quot;</span>&gt;</span> 回到顶部<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-13_17-22-50.png"></p>
<p>执行后，会回到标记为”顶部“的位置</p>
<h6 id="功能性链接"><a href="#功能性链接" class="headerlink" title="功能性链接"></a>功能性链接</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;mailto:13972597576@139.com&quot;</span>&gt;</span> 点击联系<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-13_17-29-44.png"></p>
<h3 id="3、列表"><a href="#3、列表" class="headerlink" title="3、列表"></a>3、列表</h3><p><strong>HTML 支持有序、无序和定义列表</strong></p>
<h5 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试01<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试02<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试03<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试04<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试05<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-13_18-05-39.png"></p>
<h5 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试01<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试02<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试03<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试04<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试05<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-13_18-18-38.png"></p>
<h5 id="自定义列表"><a href="#自定义列表" class="headerlink" title="自定义列表"></a>自定义列表</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    dt 自定义列表的标题</span></span><br><span class="line"><span class="comment">    dd 自定义列表的内容</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>测试标题一<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>测试01<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>测试02<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>测试03<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>测试04<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>测试05<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>测试标题二<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>测试01<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>测试02<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>测试03<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>测试04<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>测试05<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-13_18-23-31.png"></p>
<h3 id="4、列表"><a href="#4、列表" class="headerlink" title="4、列表"></a>4、列表</h3><h6 id="列表关键字"><a href="#列表关键字" class="headerlink" title="列表关键字"></a>列表关键字</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;4&quot;</span> <span class="attr">rowspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>1-1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1-2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1-3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1-4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1-5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2-1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2-2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2-3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2-4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2-5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-14_23-25-22.png"></p>
<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-14_23-33-36.png"></p>
<h3 id="5、音频与视频"><a href="#5、音频与视频" class="headerlink" title="5、音频与视频"></a>5、音频与视频</h3><h6 id="音频关键字"><a href="#音频关键字" class="headerlink" title="音频关键字"></a>音频关键字</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;../resources/audio/暴走馒头%20-%20夜、萤火虫和你%20钢琴版.mp3&quot;</span> <span class="attr">controls</span> <span class="attr">autoplay</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-15_00-05-18.png"></p>
<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-15_00-06-51.png"></p>
<h6 id="视频关键字"><a href="#视频关键字" class="headerlink" title="视频关键字"></a>视频关键字</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span>      <span class="attr">src</span>=<span class="string">&quot;../resources/video/%5BUHAWINGS%5D%20Takt%20Op.%20Destiny%20%2001%20%5Bx264%201080p%5D%5BCHT%5D.mp4&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">controls</span> <span class="attr">autoplay</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">video</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-14_23-59-33.png"></p>
<p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-15_00-00-56.png"></p>
<h3 id="6、页面结构分析"><a href="#6、页面结构分析" class="headerlink" title="6、页面结构分析"></a>6、页面结构分析</h3><h6 id="页面的组成"><a href="#页面的组成" class="headerlink" title="页面的组成"></a>页面的组成</h6><h6 id="-1"><a href="#-1" class="headerlink" title></a><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-15_00-10-57.png"></h6><h3 id="7、iframe内联框架"><a href="#7、iframe内联框架" class="headerlink" title="7、iframe内联框架"></a>7、iframe内联框架</h3><h6 id="页面的组成-1"><a href="#页面的组成-1" class="headerlink" title="页面的组成"></a>页面的组成</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe src=<span class="string">&quot;https://www.baidu.com/&quot;</span> frameborder=<span class="string">&quot;0&quot;</span> width=<span class="string">&quot;1000px&quot;</span> height=<span class="string">&quot;1150px&quot;</span>&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure>

<h6 id="-2"><a href="#-2" class="headerlink" title></a><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-15_12-16-51.png"></h6><p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-15_12-37-03.png"></p>
<p>此处无法显现是因为 百度 的服务器拒绝了链接</p>
<h3 id="7、表单post-和-get提交"><a href="#7、表单post-和-get提交" class="headerlink" title="7、表单post 和 get提交"></a>7、表单post 和 get提交</h3><h6 id="表单的语法"><a href="#表单的语法" class="headerlink" title="表单的语法"></a>表单的语法</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">    action : 表单的提交目的地</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;form method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;../src&quot;</span>&gt;</span><br><span class="line">    &lt;p&gt; 姓名： &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userName&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt; 密码： &lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;passWord&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">    &lt;p&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;reset&quot;</span>&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h6 id="-3"><a href="#-3" class="headerlink" title></a><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-15_12-43-12.png"></h6><p><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-15_13-17-21.png"></p>
<h6 id="表单的属性"><a href="#表单的属性" class="headerlink" title="表单的属性"></a>表单的属性</h6><h6 id="-4"><a href="#-4" class="headerlink" title></a><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-16_16-57-43.png"></h6><h6 id="单选框、多选框-和-按钮"><a href="#单选框、多选框-和-按钮" class="headerlink" title="单选框、多选框 和 按钮"></a>单选框、多选框 和 按钮</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;sex&quot;</span> value=<span class="string">&quot;TestOne&quot;</span>&gt;测<span class="number">1</span></span><br><span class="line">    &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;sex&quot;</span> value=<span class="string">&quot;TestTwo&quot;</span>&gt;测<span class="number">2</span></span><br><span class="line">&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobby&quot;</span> value=<span class="string">&quot;Sleep&quot;</span>&gt; 睡觉</span><br><span class="line">    &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobby&quot;</span> value=<span class="string">&quot;Code&quot;</span>&gt; 代码</span><br><span class="line">    &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobby&quot;</span> value=<span class="string">&quot;Study&quot;</span>&gt; 学习</span><br><span class="line">    &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobby&quot;</span> value=<span class="string">&quot;Exercise&quot;</span>&gt; 运动</span><br><span class="line">    &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobby&quot;</span> value=<span class="string">&quot;Movie&quot;</span>&gt; 电影</span><br><span class="line">&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;button&quot;</span> name=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;点我边长&quot;</span>&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<h6 id="-5"><a href="#-5" class="headerlink" title></a><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-16_18-47-36.png"></h6><h6 id="下拉框"><a href="#下拉框" class="headerlink" title="下拉框"></a>下拉框</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;</span><br><span class="line">    国家：</span><br><span class="line">    &lt;select name=<span class="string">&quot;listName&quot;</span> id=<span class="string">&quot;listId&quot;</span>&gt;</span><br><span class="line">        &lt;option value=<span class="string">&quot;A&quot;</span>&gt;中国&lt;/option&gt;</span><br><span class="line">        &lt;option value=<span class="string">&quot;B&quot;</span>&gt;英国&lt;/option&gt;</span><br><span class="line">        &lt;option value=<span class="string">&quot;C&quot;</span>&gt;美国&lt;/option&gt;</span><br><span class="line">        &lt;option value=<span class="string">&quot;D&quot;</span>&gt;德国&lt;/option&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<h6 id="-6"><a href="#-6" class="headerlink" title></a><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-16_23-10-10.png"></h6><h6 id="文件域和文本域"><a href="#文件域和文本域" class="headerlink" title="文件域和文本域"></a>文件域和文本域</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">    rows 控制文本输入框的高</span><br><span class="line">    cols 控制文本输入框的宽</span><br><span class="line">--&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">    提交文本 ：</span><br><span class="line">    &lt;textarea name=<span class="string">&quot;textarea&quot;</span> rows=<span class="string">&quot;10&quot;</span> cols=<span class="string">&quot;100&quot;</span>&gt;&lt;/textarea&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;button&quot;</span> name=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;files&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;button&quot;</span> name=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<h6 id="-7"><a href="#-7" class="headerlink" title></a><img src="/2022/03/13/%E5%89%8D%E7%AB%AF-HTML%E7%9A%84%E5%AD%A6%E4%B9%A0/Snipaste_2022-03-16_23-37-19.png"></h6>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/25/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="神秘的世界">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/25/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">JavaWeb学习笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-02-25 13:47:15" itemprop="dateCreated datePublished" datetime="2022-02-25T13:47:15+08:00">2022-02-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-03-01 00:25:22" itemprop="dateModified" datetime="2022-03-01T00:25:22+08:00">2022-03-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JavaWeb"><a href="#JavaWeb" class="headerlink" title="JavaWeb"></a>JavaWeb</h1><h3 id="1、基本概念"><a href="#1、基本概念" class="headerlink" title="1、基本概念"></a>1、基本概念</h3><h3 id="2、web服务器"><a href="#2、web服务器" class="headerlink" title="2、web服务器"></a>2、web服务器</h3><h3 id="3、Tomcat"><a href="#3、Tomcat" class="headerlink" title="3、Tomcat"></a>3、Tomcat</h3><h3 id="4、Http"><a href="#4、Http" class="headerlink" title="4、Http"></a>4、Http</h3><h3 id="5、Maven"><a href="#5、Maven" class="headerlink" title="5、Maven"></a>5、Maven</h3><h3 id="6、Servlet"><a href="#6、Servlet" class="headerlink" title="6、Servlet"></a>6、Servlet</h3><h3 id="7、Cookie-和-Session"><a href="#7、Cookie-和-Session" class="headerlink" title="7、Cookie 和 Session"></a>7、Cookie 和 Session</h3><h4 id="7-1-会话"><a href="#7-1-会话" class="headerlink" title="7.1 会话"></a>7.1 会话</h4><p><strong>会话</strong>：用户打开一个浏览器，点击了很多超链接，访问了多个web资源，关闭浏览器，这个过程称之为会话</p>
<p><strong>有状态会话</strong>：一个同学来过教室，下次再来教室，我们会知道这个同学曾经来过，称之为有状态会话</p>
<p>一个网站，如何证明你来过：</p>
<p>1、服务器给客户端一个 信件 ，客户端下次访问服务端带上 信件 就可以了 （ cookie ）</p>
<p>2、服务器登记你来过，下次访问时由服务器来匹配（ seesion ）</p>
<h4 id="7-2-保存会话的两种技术"><a href="#7-2-保存会话的两种技术" class="headerlink" title="7.2 保存会话的两种技术"></a>7.2 保存会话的两种技术</h4><p><strong>cookie</strong></p>
<ul>
<li>客户端技术（ 响应 和 请求 ）</li>
</ul>
<p><strong>session</strong></p>
<ul>
<li>服务器技术，利用这个技术，可以保存用户的会话信息，我们可以把信息或者数据放在Session中</li>
</ul>
<p>常见例子：网站登录一次以后，下次登录不会再要求登录</p>
<h4 id="7-3-Cookie"><a href="#7-3-Cookie" class="headerlink" title="7.3 Cookie"></a>7.3 Cookie</h4><p>1、从请求中拿到cookie信息</p>
<p>2、从服务器响应给客户端cookie</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Cookie[] cookies = req.getCookies(); <span class="comment">// 获得Cookie</span></span><br><span class="line">cookie.getName() <span class="comment">// 获得Cookie中的 Key</span></span><br><span class="line">cookie.getValue() <span class="comment">// 获得Cookie中的 Value</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个新的Cookie，这里创建了两个</span></span><br><span class="line">Cookie cookieOne = <span class="keyword">new</span> Cookie(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;测试01&quot;</span>);</span><br><span class="line">Cookie cookieTwo = <span class="keyword">new</span> Cookie(<span class="string">&quot;lastLoginTime&quot;</span>, String.valueOf( <span class="keyword">new</span> Date().getTime() ) );</span><br><span class="line"></span><br><span class="line">resp.addCookie( cookieTwo ); <span class="comment">// 响应一个cookie</span></span><br></pre></td></tr></table></figure>



<p>例子：让网站用户显示最后一次访问该网站的时间</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.text.DateFormat;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CookieDemo01</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.setCharacterEncoding( <span class="string">&quot;GBK&quot;</span> );</span><br><span class="line"></span><br><span class="line">        PrintWriter out = resp.getWriter();</span><br><span class="line"></span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line">        <span class="keyword">if</span> ( cookies != <span class="keyword">null</span> )&#123;</span><br><span class="line">            out.write( <span class="string">&quot;你上一次访问本站的时间是:&quot;</span> );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">                <span class="keyword">if</span> ( cookie.getName().equals( <span class="string">&quot;name&quot;</span> ) )&#123;</span><br><span class="line">                    out.write( cookie.getValue() + <span class="string">&quot; \t &quot;</span> );</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> ( cookie.getName().equals( <span class="string">&quot;lastLoginTime&quot;</span> ) ) &#123;</span><br><span class="line">                    <span class="keyword">long</span> time = Long.parseLong(cookie.getValue());</span><br><span class="line">                    Date date = <span class="keyword">new</span> Date( time );;</span><br><span class="line">                    String dateTime = StringFormat(date);</span><br><span class="line"></span><br><span class="line">                    System.out.println( dateTime );</span><br><span class="line"></span><br><span class="line">                    out.write( dateTime );</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            out.write( <span class="string">&quot;这是你第一次访问本站&quot;</span> );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Cookie cookieOne = <span class="keyword">new</span> Cookie(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;测试01&quot;</span>);</span><br><span class="line">        Cookie cookieTwo = <span class="keyword">new</span> Cookie(<span class="string">&quot;lastLoginTime&quot;</span>, String.valueOf( <span class="keyword">new</span> Date().getTime() ) );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 添加Cookie</span></span><br><span class="line">        resp.addCookie( cookieOne );</span><br><span class="line">        resp.addCookie( cookieTwo );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">StringFormat</span><span class="params">( Date date )</span></span>&#123;</span><br><span class="line">        DateFormat dateFormat = <span class="keyword">new</span> SimpleDateFormat( <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dateFormat.format( date );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>cookie</strong>：一般保存再用户本地的 appdate 目录下</p>
<p>Q ：一个网站的cookie是否存在上限？</p>
<ul>
<li>一个Cookie只可以保存一个消息</li>
<li>一个Web站点可以给浏览器发送多个Cookie，最多存放20个Cookie</li>
<li>Cookie大小有限制4kb</li>
<li> 300个cookie浏览器上限</li>
</ul>
<p>删除cookie</p>
<ul>
<li>不设置有效期，关闭浏览器，自动失效</li>
<li>设置有效期时间为0，手动删除Cookie的方法</li>
</ul>
<p>编码和解码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">URLEncoder.encode( cookie.getName(), <span class="string">&quot;UTF-8&quot;</span> );</span><br><span class="line">URLDecoder.decode( cookie.getName(), <span class="string">&quot;UTF-8&quot;</span> );</span><br></pre></td></tr></table></figure>



<h4 id="7-4-Session"><a href="#7-4-Session" class="headerlink" title="7.4 Session"></a>7.4 Session</h4><p>什么是Session：</p>
<ul>
<li>服务器会给每一个用户创建一个Session对象</li>
<li>一个Session独占一个浏览器，只要浏览器没有关闭，这个Session就一直存在</li>
<li>用户登录后，这个网站都可以访问 -&gt; 保存用户的信息</li>
</ul>
<p>Session 和 Cookie 的区别</p>
<ul>
<li> Cookie是把用户的数据写给用户的浏览器（可以保存多个）</li>
<li>Session把用户的数据写到用户独占的Session中，服务器来保存（保存重要的信息，减少服务器的资源的浪费）</li>
<li>Session对象由服务器创建</li>
</ul>
<p><img src="/2022/02/25/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/.%5CJavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%5CServletOne.png" alt="ServletOne"></p>
<p>使用Session</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">      HttpSession session = req.getSession(); <span class="comment">// 获取Session对象</span></span><br><span class="line"></span><br><span class="line">      session.setAttribute( <span class="string">&quot;name&quot;</span>, <span class="keyword">new</span> Person( <span class="string">&quot;测试01&quot;</span>, <span class="number">1</span> ) ); <span class="comment">// 向Session对象中存入值，形似KV对</span></span><br><span class="line">session.getAttribute(<span class="string">&quot;name&quot;</span>); <span class="comment">// 获取指定Session对象的值</span></span><br><span class="line"></span><br><span class="line">      String sessionId = session.getId();<span class="comment">// 获取Session对象的ID</span></span><br><span class="line"></span><br><span class="line">      session.invalidate(); <span class="comment">// 注销Session对象</span></span><br></pre></td></tr></table></figure>



<p>会话自动过期：在 web.xml 中进行配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 配置会话自动过期,以分钟为单位 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="8、JSP"><a href="#8、JSP" class="headerlink" title="8、JSP"></a>8、JSP</h3><h4 id="8-1-什么是JSP"><a href="#8-1-什么是JSP" class="headerlink" title="8.1 什么是JSP"></a>8.1 什么是JSP</h4><p>Java Server Pages ： Java服务器端页面，用来开发动态页面</p>
<p>最大的特点：</p>
<ul>
<li>写 JSP 就像在写 HTML</li>
<li>区别“<ul>
<li>HTML只给用户提供静态的数据</li>
<li>JSP页面中可以嵌入 Java 代码，为用户提供动态数据</li>
</ul>
</li>
</ul>
<h4 id="8-2-JSP原理"><a href="#8-2-JSP原理" class="headerlink" title="8.2 JSP原理"></a>8.2 JSP原理</h4><ul>
<li><p>代码层面没有任何问题</p>
</li>
<li><p>服务器内部工作</p>
<ul>
<li><p>tomcat有一个work目录</p>
</li>
<li><p>IDEA中使用Tomcat的会在IDEA的tomcat中生产一个work目录</p>
<p><img src="/2022/02/25/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/.%5CJavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%5CJSPOne.png" alt="ServletOne"></p>
</li>
</ul>
</li>
</ul>
<p><strong>浏览器向服务器发送请求，不管访问什么资源，都是在访问Servlet</strong></p>
<p>JSP 本质上就是一个 Servlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">_jspInit</span><span class="params">()</span> </span>&#123;&#125; <span class="comment">// 初始化</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">_jspDestroy</span><span class="params">()</span> </span>&#123;&#125; <span class="comment">// 销毁</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">_jspService</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span>&#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol>
<li>判断请求</li>
<li>内置一些对象</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> javax.servlet.jsp.PageContext pageContext;</span><br><span class="line">   javax.servlet.http.HttpSession session = <span class="keyword">null</span>;</span><br><span class="line">   <span class="keyword">final</span> javax.servlet.ServletContext application;</span><br><span class="line">   <span class="keyword">final</span> javax.servlet.ServletConfig config;</span><br><span class="line">   javax.servlet.jsp.JspWriter out = <span class="keyword">null</span>;</span><br><span class="line">   <span class="keyword">final</span> java.lang.Object page = <span class="keyword">this</span>;</span><br><span class="line">   javax.servlet.jsp.JspWriter _jspx_out = <span class="keyword">null</span>;</span><br><span class="line">   javax.servlet.jsp.PageContext _jspx_page_context = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>输出页面前增加的代码</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">pageContext = _jspxFactory.getPageContext(<span class="keyword">this</span>, request, response, <span class="keyword">null</span>, <span class="keyword">true</span>, <span class="number">8192</span>, <span class="keyword">true</span>);</span><br><span class="line">_jspx_page_context = pageContext;</span><br><span class="line">application = pageContext.getServletContext();</span><br><span class="line">config = pageContext.getServletConfig();</span><br><span class="line">session = pageContext.getSession();</span><br><span class="line">out = pageContext.getOut();</span><br><span class="line">_jspx_out = out;</span><br><span class="line"></span><br><span class="line">out.write(<span class="string">&quot;&lt;html&gt;\n&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;&lt;body&gt;\n&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;&lt;h2&gt;Hello!&lt;/h2&gt;\n&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;&lt;/body&gt;\n&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;&lt;/html&gt;\n&quot;</span>);</span><br></pre></td></tr></table></figure>

<ol start="4">
<li> 以上的对象可以在 JSP 页面中直接使用</li>
</ol>
<p>以上分析可得，在 JSP 中，如果是 Java 代码，则会被原封不动的输出 ； 如果是 HTML 代码，就会被转换为如下代码的格式：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">out.writ( &quot;<span class="tag">&lt;<span class="name">html</span>&gt;</span>\r\n&quot; );</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/21/%E8%BD%AF%E8%80%83%E5%88%9D%E7%BA%A7-%E9%94%99%E9%A2%98%E6%B3%A8%E6%84%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="神秘的世界">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/21/%E8%BD%AF%E8%80%83%E5%88%9D%E7%BA%A7-%E9%94%99%E9%A2%98%E6%B3%A8%E6%84%8F/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-02-21 23:39:59" itemprop="dateCreated datePublished" datetime="2022-02-21T23:39:59+08:00">2022-02-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-02-25 22:21:40" itemprop="dateModified" datetime="2022-02-25T22:21:40+08:00">2022-02-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Excel知识"><a href="#Excel知识" class="headerlink" title="Excel知识"></a>Excel知识</h4><ul>
<li><p>若用户选择了表格中的一行，并执行了表格菜单中的 ” 删除列 “ 命令，则 <strong>整个表格被删除</strong></p>
</li>
<li><p>Excel常用函数效果</p>
<table>
<thead>
<tr>
<th align="center"><strong>=IF(判断的条件,符合条件时的结果,不符合条件时的结果)</strong></th>
<th align="center"><strong>IF条件判断语句</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>=IF(AND(条件1,条件2),符合条件时的结果,不符合条件时的结果)</strong></td>
<td align="center"><strong>IF多条件判断语句</strong></td>
</tr>
<tr>
<td align="center"><strong>=SUMIF(条件区域,指定的求和条件,求和的区域)</strong></td>
<td align="center"><strong>条件求和</strong></td>
</tr>
<tr>
<td align="center"><strong>=SUMIFS(求和的区域，条件区域1,指定的求和条件1,条件区域2,指定的求和条件2,……)</strong></td>
<td align="center"><strong>多条件求和</strong></td>
</tr>
<tr>
<td align="center"><strong>=COUNTIF(条件区域,指定条件)</strong></td>
<td align="center"><strong>条件计数</strong></td>
</tr>
<tr>
<td align="center"><strong>=COUNTIFS(条件区域1,指定条件1,条件区域2,指定条件2……)</strong></td>
<td align="center"><strong>多条件计数</strong></td>
</tr>
<tr>
<td align="center"><strong>=VLOOKUP(要找谁,在哪儿找,返回第几列的内容,精确找还是近似找)</strong></td>
<td align="center"><strong>条件查找</strong></td>
</tr>
<tr>
<td align="center"><strong>=LOOKUP(1,0/((条件区域1=条件1)*(条件区域2=条件2)),查询区域)</strong></td>
<td align="center"><strong>多条件查找</strong></td>
</tr>
<tr>
<td align="center"><strong>=EXACT(目标A,目标B)</strong></td>
<td align="center"><strong>比较大小写的单词是否相同</strong></td>
</tr>
<tr>
<td align="center"><strong>=LEFT(A2,LENB(A2)-LEN(A2))</strong></td>
<td align="center"><strong>提取混合内容中的姓名</strong></td>
</tr>
<tr>
<td align="center"><strong>=SUBSTITUTE(要替换的文本,旧文本,新文本,[替换第几个])</strong></td>
<td align="center"><strong>替换部分文本</strong></td>
</tr>
<tr>
<td align="center"><strong>=ROUND(值,有效位小数)</strong></td>
<td align="center"><strong>四舍五入函数</strong></td>
</tr>
<tr>
<td align="center"><strong>=IFERROR(原公式,出现错误时要返回的内容)</strong></td>
<td align="center"><strong>屏蔽函数公式返回的错误值</strong></td>
</tr>
<tr>
<td align="center"><strong>=RANDBETWEEN(数字下限,数字上限)</strong></td>
<td align="center"><strong>生成随机数</strong></td>
</tr>
</tbody></table>
</li>
<li></li>
</ul>
<h4 id="计算机科学技术"><a href="#计算机科学技术" class="headerlink" title="计算机科学技术"></a>计算机科学技术</h4><h4 id="计算机硬件知识"><a href="#计算机硬件知识" class="headerlink" title="计算机硬件知识"></a>计算机硬件知识</h4><h4 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h4><h4 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h4><h4 id="程序设计语言和语言处理"><a href="#程序设计语言和语言处理" class="headerlink" title="程序设计语言和语言处理"></a>程序设计语言和语言处理</h4><h4 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h4><h4 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h4><h4 id="软件工程和系统开发基础"><a href="#软件工程和系统开发基础" class="headerlink" title="软件工程和系统开发基础"></a>软件工程和系统开发基础</h4><h4 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h4><h4 id="信息安全"><a href="#信息安全" class="headerlink" title="信息安全"></a>信息安全</h4><h4 id="信息化基础"><a href="#信息化基础" class="headerlink" title="信息化基础"></a>信息化基础</h4><h4 id="知识产权相关法规"><a href="#知识产权相关法规" class="headerlink" title="知识产权相关法规"></a>知识产权相关法规</h4><h4 id="标准化"><a href="#标准化" class="headerlink" title="标准化"></a>标准化</h4><h4 id="数学基础"><a href="#数学基础" class="headerlink" title="数学基础"></a>数学基础</h4><h4 id="Windows基础"><a href="#Windows基础" class="headerlink" title="Windows基础"></a>Windows基础</h4>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/21/%E4%B8%80%E4%B8%AA%E9%9D%A2%E8%AF%95%E9%A2%98-%E8%B0%88%E8%B0%88%E7%BD%91%E7%AB%99%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BF%E9%97%AE%E7%9A%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="神秘的世界">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/21/%E4%B8%80%E4%B8%AA%E9%9D%A2%E8%AF%95%E9%A2%98-%E8%B0%88%E8%B0%88%E7%BD%91%E7%AB%99%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BF%E9%97%AE%E7%9A%84/" class="post-title-link" itemprop="url">一个面试题--谈谈网站是如何访问的</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-02-21 15:54:40 / Modified: 16:08:47" itemprop="dateCreated datePublished" datetime="2022-02-21T15:54:40+08:00">2022-02-21</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>​        一个面试题，请你谈谈网站是如何访问的？</p>
<ol>
<li><p>输入一个域名，执行回车</p>
</li>
<li><p>会检查本机的 C:\Windows\System32\drivers\etc\hostes 配置文件下有没有这个域名的映射；</p>
<ul>
<li><p>有；直接返回对应的 IP地址，这个地址中，有我们需要访问的 web 程序，可以直接访问。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1		www.xxxx.com</span><br></pre></td></tr></table></figure></li>
<li><p>没有；去 DNS 服务器找，找到的话就返回，找不到就返回找不到</p>
</li>
</ul>
</li>
<li><p>可以配置一下环境变量（ 可选性 ）</p>
</li>
</ol>
<p>​                </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/10/%E8%93%9D%E6%A1%A5%E6%9D%AF-%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="神秘的世界">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/10/%E8%93%9D%E6%A1%A5%E6%9D%AF-%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0/" class="post-title-link" itemprop="url">蓝桥杯--基础练习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-02-10 14:29:08" itemprop="dateCreated datePublished" datetime="2022-02-10T14:29:08+08:00">2022-02-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-02-20 22:29:31" itemprop="dateModified" datetime="2022-02-20T22:29:31+08:00">2022-02-20</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="BASIC-18-矩形面积交"><a href="#BASIC-18-矩形面积交" class="headerlink" title="BASIC - - 18 矩形面积交"></a>BASIC - - 18 矩形面积交</h4><h6 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">资源限制</span><br><span class="line">	时间限制：<span class="number">1.</span>0s   内存限制：<span class="number">512.</span>0MB</span><br><span class="line">问题描述</span><br><span class="line">　　平面上有两个矩形，它们的边平行于直角坐标系的X轴或Y轴。对于每个矩形，我们给出它的一对相对顶点的坐标，请你编程算出两个矩形的交的面积。</span><br><span class="line">输入格式</span><br><span class="line">　　输入仅包含两行，每行描述一个矩形。</span><br><span class="line">　　在每行中，给出矩形的一对相对顶点的坐标，每个点的坐标都用两个绝对值不超过<span class="number">10</span>^<span class="number">7</span>的实数表示。</span><br><span class="line">输出格式</span><br><span class="line">　　输出仅包含一个实数，为交的面积，保留到小数后两位。</span><br><span class="line">样例输入</span><br><span class="line">	<span class="number">1</span> <span class="number">1</span> <span class="number">3</span> <span class="number">3</span></span><br><span class="line">	<span class="number">2</span> <span class="number">2</span> <span class="number">4</span> <span class="number">4</span></span><br><span class="line">样例输出</span><br><span class="line">	<span class="number">1.00</span></span><br></pre></td></tr></table></figure>

<h6 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h6><h6 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> GamesToPractice.BasicTraining;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.text.DecimalFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BASIC_18</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 问题描述</span></span><br><span class="line"><span class="comment">     * 　　平面上有两个矩形，它们的边平行于直角坐标系的X轴或Y轴。对于每个矩形，我们给出它的一对相对顶点的坐标，请你编程算出两个矩形的交的面积。</span></span><br><span class="line"><span class="comment">     * 输入格式</span></span><br><span class="line"><span class="comment">     * 　　输入仅包含两行，每行描述一个矩形。</span></span><br><span class="line"><span class="comment">     * 　　在每行中，给出矩形的一对相对顶点的坐标，每个点的坐标都用两个绝对值不超过10^7的实数表示。</span></span><br><span class="line"><span class="comment">     * 输出格式</span></span><br><span class="line"><span class="comment">     * 　　输出仅包含一个实数，为交的面积，保留到小数后两位。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner( System.in );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span>[] arrOne = <span class="keyword">new</span> <span class="keyword">double</span>[ <span class="number">4</span> ];</span><br><span class="line">        <span class="keyword">double</span>[] arrTwo = <span class="keyword">new</span> <span class="keyword">double</span>[ <span class="number">4</span> ];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arrOne.length; i++ )&#123;</span><br><span class="line">            arrOne[ i ] = input.nextDouble();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arrTwo.length; i++ )&#123;</span><br><span class="line">            arrTwo[ i ] = input.nextDouble();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        rectangleFormat( arrOne, <span class="number">0</span> );</span><br><span class="line">        rectangleFormat( arrOne, <span class="number">1</span> );</span><br><span class="line">        rectangleFormat( arrTwo, <span class="number">0</span> );</span><br><span class="line">        rectangleFormat( arrTwo, <span class="number">1</span> );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( arrOne[ <span class="number">2</span> ] &lt;= arrTwo[ <span class="number">0</span> ] || arrOne[ <span class="number">3</span> ] &lt;= arrTwo[ <span class="number">1</span> ] )&#123;</span><br><span class="line">            System.out.println( <span class="string">&quot;0.00&quot;</span> );</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( arrOne[ <span class="number">0</span> ] &gt;= arrTwo[ <span class="number">2</span> ] || arrOne[ <span class="number">1</span> ] &gt;= arrTwo[ <span class="number">3</span> ] )&#123;</span><br><span class="line">            System.out.println( <span class="string">&quot;0.00&quot;</span> );</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span>[] arrAnswer = <span class="keyword">new</span> <span class="keyword">double</span>[ <span class="number">4</span> ];</span><br><span class="line">        arrAnswer[ <span class="number">0</span> ] = getMax( arrOne[ <span class="number">0</span> ], arrTwo[ <span class="number">0</span> ] );</span><br><span class="line">        arrAnswer[ <span class="number">1</span> ] = getMax( arrOne[ <span class="number">1</span> ], arrTwo[ <span class="number">1</span> ] );</span><br><span class="line"></span><br><span class="line">        arrAnswer[ <span class="number">2</span> ] = getMin( arrOne[ <span class="number">2</span> ], arrTwo[ <span class="number">2</span> ] );</span><br><span class="line">        arrAnswer[ <span class="number">3</span> ] = getMin( arrOne[ <span class="number">3</span> ], arrTwo[ <span class="number">3</span> ] );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> answer = ( arrAnswer[ <span class="number">2</span> ] - arrAnswer[ <span class="number">0</span> ] ) * ( arrAnswer[ <span class="number">3</span> ] - arrAnswer[ <span class="number">1</span> ] );</span><br><span class="line"></span><br><span class="line">        String strAnswer = <span class="keyword">new</span> DecimalFormat(<span class="string">&quot;0.00&quot;</span>).format(answer);</span><br><span class="line">        System.out.println( strAnswer );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">rectangleFormat</span><span class="params">( <span class="keyword">double</span>[] arr, <span class="keyword">int</span> i )</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( arr[ i ] &gt; arr[ i + <span class="number">2</span> ] )&#123;</span><br><span class="line">            <span class="keyword">double</span> temp = arr[ i + <span class="number">2</span> ];</span><br><span class="line">            arr[ i + <span class="number">2</span> ] = arr[ i ];</span><br><span class="line">            arr[ i ] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">getMax</span><span class="params">( <span class="keyword">double</span> d1, <span class="keyword">double</span> d2 )</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max( d1, d2 );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">getMin</span><span class="params">( <span class="keyword">double</span> d1, <span class="keyword">double</span> d2 )</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Math.min( d1, d2 );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="BASIC-19-完美的代价"><a href="#BASIC-19-完美的代价" class="headerlink" title="BASIC - - 19 完美的代价"></a>BASIC - - 19 完美的代价</h4><h6 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">问题描述</span><br><span class="line">　　回文串，是一种特殊的字符串，它从左往右读和从右往左读是一样的。小龙龙认为回文串才是完美的。现在给你一个串，它不一定是回文的，请你计算最少的交换次数使得该串变成一个完美的回文串。</span><br><span class="line">　　交换的定义是：交换两个相邻的字符</span><br><span class="line">　　例如mamad</span><br><span class="line">　　第一次交换 ad : mamda</span><br><span class="line">　　第二次交换 md : madma</span><br><span class="line">　　第三次交换 ma : madam (回文！完美！)</span><br><span class="line">输入格式</span><br><span class="line">　　第一行是一个整数N，表示接下来的字符串的长度(N &lt;= 8000)</span><br><span class="line">　　第二行是一个字符串，长度为N.只包含小写字母</span><br><span class="line">输出格式</span><br><span class="line">　　如果可能，输出最少的交换次数。</span><br><span class="line">　　否则输出Impossible</span><br><span class="line">样例输入</span><br><span class="line">	5</span><br><span class="line">	mamad</span><br><span class="line">样例输出</span><br><span class="line">	3</span><br></pre></td></tr></table></figure>

<h6 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h6><ul>
<li>分析题目，有四个问题需要解决：<ol>
<li>​    什么情况下会导致字符串不可能形成回文，输出 Impossible</li>
<li>​    如何实现回文交换，将一个字符交换到指定位置</li>
<li>​    当遇到出现总数为基数的字符时，该如何处理 （ 如 dmama，此时如何处理 ‘ d ’ 这个字符 ）</li>
<li>​    找到最后某个字符最后出现的位置（ 如 mammmad，找到最后一个 ‘ m ’ 的位置  ）</li>
</ol>
</li>
</ul>
<p>​        根据对题目的分析，我们一步步来实现这四个问题。除此之外，题目需要 3 个经常使用的变量 ：字符串的长度 length 、 将字符串拆解为一个 char 型数组 arr 、 回文交换的次数（最后的输出） Answer 。</p>
<p>​        我们将这 3 个变量设定为全局变量，方便操作。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> length;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">char</span>[] arr;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> Answer = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>​        之所以使用 char[ ]  数组是因为字符型的数组更加便于对字符串中的每个字符进行交换，读取的操作，利用 String 类的 toCharArray 函数就看可以将输入转化为数组：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr = input.next().toCharArray();</span><br></pre></td></tr></table></figure>

<p>​        完成前面的部分后，我们开始分析第一个问题 ： 什么时候会出现 Impossible 。其实，当字符串中拥有 2 个或者 2 个以上的 奇数次字符时，字符串就不可能形成回文。</p>
<p>​        那么首先就要统计字符串中每个字符出现的次数：</p>
<p>​        我们设立一个 26 位的 int 型数组，每一个元素的初始值都为 0 ，代表 26 个字母。由于题目中设定了字符中的字符都是小写字符，那么每个字符 - ‘ a ’ 的值就可以对应 int 数组的每一个元素。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] numArr = <span class="keyword">new</span> <span class="keyword">int</span>[ <span class="number">26</span> ];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">char</span> c : arr ) &#123;</span><br><span class="line">	numArr[ c - <span class="string">&#x27;a&#x27;</span> ] = numArr[ c - <span class="string">&#x27;a&#x27;</span> ] + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        在统计完字符的出现次数后，遍历 int 数组，如果出现了 2 个 或 2 个以上的奇数次字符时，就可以结束程序，输出 Impossible</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>, flag = <span class="number">0</span>; i &lt; numArr.length; i++ )&#123;</span><br><span class="line">    <span class="keyword">if</span> ( numArr[ i ] % <span class="number">2</span> == <span class="number">1</span> )&#123;</span><br><span class="line">        flag = flag + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( flag &gt;= <span class="number">2</span> )&#123;</span><br><span class="line">            System.out.println( <span class="string">&quot;Impossible&quot;</span> );</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        此时，我们解决了第一个问题。接下来，我们先处理第 2 个问题，即如何实现交换 ： 先不论字符串整体，从前向后遍历，如果所有的字符和对应位置的字符相同，那么字符串自然就是一个回文，比如</p>
<table>
<thead>
<tr>
<th align="center">m</th>
<th align="center">a</th>
<th align="center">m</th>
<th align="center">a</th>
<th align="center">m</th>
<th align="center">m</th>
<th align="center">d</th>
<th align="center">d</th>
</tr>
</thead>
</table>
<p>​        当前首先遍历第一个字符 m ，然后从后先前遍历第一个字符为 d ，但这个位置的字符应该为 m 。那么我们开始从后先前遍历，直到找到和第一个 m 相同的字符，也就是 第六个字符 ‘ m ’。</p>
<p>​        为了使得交换的次数最少，就应该使最后出现的相同字符向前移动，在上面的例子中就是移动了两次，如下</p>
<table>
<thead>
<tr>
<th align="center">m</th>
<th align="center">a</th>
<th align="center">m</th>
<th align="center">a</th>
<th align="center">m</th>
<th align="center">d</th>
<th align="center">m</th>
<th align="center">d</th>
</tr>
</thead>
</table>
<table>
<thead>
<tr>
<th align="center">m</th>
<th align="center">a</th>
<th align="center">m</th>
<th align="center">a</th>
<th align="center">m</th>
<th align="center">d</th>
<th align="center">d</th>
<th align="center">m</th>
</tr>
</thead>
</table>
<p>​        这就是上面提到的第四个问题：找到最后出现的字符</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> i = length - cur - <span class="number">1</span>; i &gt; cur; i-- )&#123;</span><br><span class="line">    <span class="keyword">if</span> ( arr[ cur ] == arr[ i ] )</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        在上方的例子中，第一个位置的字符 ‘ m ’ 已经完成了对应，那么遍历下一个字符 ‘ a ’ 。然后进行交换，过程如下：</p>
<table>
<thead>
<tr>
<th align="center">m</th>
<th align="center">a</th>
<th align="center">m</th>
<th align="center">m</th>
<th align="center">a</th>
<th align="center">d</th>
<th align="center">d</th>
<th align="center">m</th>
</tr>
</thead>
</table>
<table>
<thead>
<tr>
<th align="center">m</th>
<th align="center">a</th>
<th align="center">m</th>
<th align="center">m</th>
<th align="center">d</th>
<th align="center">a</th>
<th align="center">d</th>
<th align="center">m</th>
</tr>
</thead>
</table>
<table>
<thead>
<tr>
<th align="center">m</th>
<th align="center">a</th>
<th align="center">m</th>
<th align="center">m</th>
<th align="center">d</th>
<th align="center">d</th>
<th align="center">a</th>
<th align="center">m</th>
</tr>
</thead>
</table>
<p>​        这里提到了交换的过程，那么此时进行交换的话就要遇到上方提到的第三个问题，即如何进行交换。</p>
<p>​        我们可以利用递归进行交换，书写一个新的方法，传入 开始的位置 和 结束的位置。当两个参数的值相等时，或者 两个参数对应的元素的值相等时，就结束递归。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">exchange</span><span class="params">( <span class="keyword">int</span> start, <span class="keyword">int</span> end )</span></span>&#123;</span><br><span class="line">       <span class="keyword">if</span> ( arr[ start ] == arr[ end ] || start == end )</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">char</span> temp = arr[ start ];</span><br><span class="line">       arr[ start ] = arr[ start + <span class="number">1</span> ];</span><br><span class="line">       arr[ start + <span class="number">1</span> ] = temp;</span><br><span class="line"></span><br><span class="line">       Answer = Answer + <span class="number">1</span>;</span><br><span class="line">       exchange( start + <span class="number">1</span>, end );</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>​        最后，我们应该注意一个特殊的情况，如果输入的字符串出现了下面的情况： 如 damam 。</p>
<p>​        此时第一个字符就是一个单独的字符，匹配是无法成功的，此时我们就遇到了第 3 个问题， 即如何处理奇数次字符：我们可以将特殊字符和她相邻的字符进行交换，然后再重新进行匹配。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exchange( cur, cur + <span class="number">1</span> );</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> foundIndex( cur );</span><br></pre></td></tr></table></figure>



<p>​        那么四个问题都已经处理完毕，下面是完整的代码。</p>
<h6 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> GamesToPractice.BasicTraining;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BASIC_19</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> length;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">char</span>[] arr;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> Answer = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner( System.in );</span><br><span class="line"></span><br><span class="line">        length = input.nextInt();</span><br><span class="line">        arr = input.next().toCharArray();</span><br><span class="line">        <span class="keyword">int</span>[] numArr = <span class="keyword">new</span> <span class="keyword">int</span>[ <span class="number">26</span> ];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">char</span> c : arr ) &#123;</span><br><span class="line">            numArr[ c - <span class="string">&#x27;a&#x27;</span> ] = numArr[ c - <span class="string">&#x27;a&#x27;</span> ] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断是否是 输出Impossible 的情况</span></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>, flag = <span class="number">0</span>; i &lt; numArr.length; i++ )&#123;</span><br><span class="line">            <span class="keyword">if</span> ( numArr[ i ] % <span class="number">2</span> == <span class="number">1</span> )&#123;</span><br><span class="line">                flag = flag + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> ( flag &gt;= <span class="number">2</span> )&#123;</span><br><span class="line">                    System.out.println( <span class="string">&quot;Impossible&quot;</span> );</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用，从 0 开始，到 length / 2 结束，交换完成后，字符串就以该是回文字符串</span></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length / <span class="number">2</span>; i++ )&#123;</span><br><span class="line">            <span class="comment">// 将和 arr[ i ] 相同的值 交换到 与 i 对应的位置</span></span><br><span class="line">            exchange( foundIndex( i ), length - i - <span class="number">1</span> );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println( Answer );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 交换函数，使用递归，当开始位置和结束位置相同 或者 对应的值相同时 ，结束交换</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">exchange</span><span class="params">( <span class="keyword">int</span> start, <span class="keyword">int</span> end )</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( arr[ start ] == arr[ end ] || start == end )</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span> temp = arr[ start ];</span><br><span class="line">        arr[ start ] = arr[ start + <span class="number">1</span> ];</span><br><span class="line">        arr[ start + <span class="number">1</span> ] = temp;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 每交换一次，Answer值加一</span></span><br><span class="line">        Answer = Answer + <span class="number">1</span>;</span><br><span class="line">        exchange( start + <span class="number">1</span>, end );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 寻找函数，寻找与 arr[ cur ] 相同且最后出现的值，返回下标</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">foundIndex</span><span class="params">( <span class="keyword">int</span> cur )</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = length - cur - <span class="number">1</span>; i &gt; cur; i-- )&#123;</span><br><span class="line">            <span class="keyword">if</span> ( arr[ cur ] == arr[ i ] )</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 此时遇到了奇数位的字符，无法正常处理，交换后，再进行检索</span></span><br><span class="line">        exchange( cur, cur + <span class="number">1</span> );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> foundIndex( cur );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="BASIC-29-高精度加法"><a href="#BASIC-29-高精度加法" class="headerlink" title="BASIC - - 29 高精度加法"></a>BASIC - - 29 高精度加法</h4><h6 id="题目-2"><a href="#题目-2" class="headerlink" title="题目"></a>题目</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">资源限制</span><br><span class="line">	时间限制：<span class="number">1.</span>0s   内存限制：<span class="number">512.</span>0MB</span><br><span class="line">问题描述</span><br><span class="line">　　输入两个整数a和b，输出这两个整数的和。a和b都不超过<span class="number">100</span>位。</span><br><span class="line">算法描述</span><br><span class="line">　　由于a和b都比较大，所以不能直接使用语言中的标准数据类型来存储。对于这种问题，一般使用数组来处理。</span><br><span class="line">　　定义一个数组A，A[<span class="number">0</span>]用于存储a的个位，A[<span class="number">1</span>]用于存储a的十位，依此类推。同样可以用一个数组B来存储b。</span><br><span class="line">　　计算c = a + b的时候，首先将A[<span class="number">0</span>]与B[<span class="number">0</span>]相加，如果有进位产生，则把进位（即和的十位数）存入r，把和的个位数存入C[<span class="number">0</span>]，即C[<span class="number">0</span>]等于(A[<span class="number">0</span>]+B[<span class="number">0</span>])%<span class="number">10</span>。然后计算A[<span class="number">1</span>]与B[<span class="number">1</span>]相加，这时还应将低位进上来的值r也加起来，即C[<span class="number">1</span>]应该是A[<span class="number">1</span>]、B[<span class="number">1</span>]和r三个数的和．如果又有进位产生，则仍可将新的进位存入到r中，和的个位存到C[<span class="number">1</span>]中。依此类推，即可求出C的所有位。</span><br><span class="line">　　最后将C输出即可。</span><br><span class="line">输入格式</span><br><span class="line">　　输入包括两行，第一行为一个非负整数a，第二行为一个非负整数b。两个整数都不超过<span class="number">100</span>位，两数的最高位都不是<span class="number">0</span>。</span><br><span class="line">输出格式</span><br><span class="line">　　输出一行，表示a + b的值。</span><br><span class="line">样例输入</span><br><span class="line">	<span class="number">20100122201001221234567890</span></span><br><span class="line">	<span class="number">2010012220100122</span></span><br><span class="line">样例输出</span><br><span class="line">	<span class="number">20100122203011233454668012</span></span><br></pre></td></tr></table></figure>

<h6 id="分析-2"><a href="#分析-2" class="headerlink" title="分析"></a>分析</h6><p>​        对于本题，最大的障碍无非是如何存储一个值远超 int 和 long 的储存上限的数字。从执行加法的方面考虑，用数组是一个不错的选择，一个数组代表一个数字，数组的每一位元素对应数字的某一位，例如 ： 9897654，就可以储存为</p>
<table>
<thead>
<tr>
<th align="center">9</th>
<th align="center">8</th>
<th align="center">9</th>
<th align="center">7</th>
<th align="center">6</th>
<th align="center">5</th>
<th align="center">4</th>
</tr>
</thead>
</table>
<p>​        其次，就是利用数组存储时，如何实现加法 ？ </p>
<p>​        如果利用数组来存储数字，在实现加法时，就不可避免的遇到几个问题：        </p>
<ol>
<li>如果顺序存贮，如果遇到首位进位时，无法进位</li>
<li>如何完成进位</li>
<li>当两个数组的长度不一样时，如何相加</li>
</ol>
<p>​        首先，如果顺序存储无法完成操作，那么我们就逆序存储数组，也就是将个位数存为数组的第一个元素，然后依次存储</p>
<p>​        例如 ：9897654，就可以被存贮为</p>
<table>
<thead>
<tr>
<th align="center">4</th>
<th align="center">5</th>
<th align="center">6</th>
<th align="center">7</th>
<th align="center">9</th>
<th align="center">8</th>
<th align="center">9</th>
</tr>
</thead>
</table>
<p>​        逆序存储的好处在于，两个数组可以直接相加，如果需要进位，可以直接向前进行进位处理。</p>
<p>​        我们可以利用一个函数来完成这个操作。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] decompose( String string ) &#123;</span><br><span class="line">    <span class="keyword">char</span>[] chars = string.toCharArray();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>[] Answer = <span class="keyword">new</span> <span class="keyword">int</span>[ chars.length ];</span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = chars.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i-- )&#123;</span><br><span class="line">        <span class="comment">// 由于拆解成字符串后，直接转换为int会造成转换失败（会变成ASC码），所以先转换为字符串，再将字符串转换为Integer</span></span><br><span class="line">        Answer[ index ] = Integer.parseInt( String.valueOf( chars[ i ] ) );</span><br><span class="line">        index = index + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        如果当两个数的长度相同时，当然可以直接相加，那么当两个数组的长度不一样时，如何相加 ？</p>
<p>​        首先我们可以明确一个事情，当两个数相加时，结果的位数长度必然不会超越这两个数的位数相加</p>
<p>​        例如 ： 9999 + 9999 这个值为 19998 也就是说所有的 4 位数 + 4 位数的值都不会超过 19998 ，所以我们可以利用这一特性来构造用来存储答案的数组。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] Answer = <span class="keyword">new</span> <span class="keyword">int</span>[ numberOne.length + numberTwo.length ];</span><br></pre></td></tr></table></figure>

<p>​        话分两头，当两个数的位数不同时，我们需要先找到两个数中位数较少的那个数，进入一个循环，将位数较少的那个数与另一个数对应的位数相加，然后将另一个数中，剩下位数全部 copy 到答案中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// minLength 用来存储两个数中的长度较短的数</span></span><br><span class="line"><span class="keyword">int</span> minLength = Math.min( numberOne.length, numberTwo.length );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将位数较少的那个数与另一个数对应的位数相加</span></span><br><span class="line">      <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; minLength; i++ )&#123;</span><br><span class="line">          Answer[ i ] = numberOne[ i ] + numberTwo[ i ];</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将另一个数中，剩下位数全部 copy</span></span><br><span class="line">      <span class="keyword">if</span> ( minLength &lt;= numberOne.length )&#123;</span><br><span class="line">          System.arraycopy( numberOne, minLength, Answer, minLength, numberOne.length - minLength );</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> ( minLength &lt;= numberTwo.length )&#123;</span><br><span class="line">          System.arraycopy( numberTwo, minLength, Answer, minLength, numberTwo.length - minLength );</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>​        剩下的问题就是如何进位的问题了，我们可以这么操作，进入循环，循环范围是从 0 到 答案数组中最后一个有效数字，如果当前的元素的值大于等于 10 ，就将元素的下一位 + 1， 当前元素的值 除于 10 。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; i++ )&#123;</span><br><span class="line">    <span class="keyword">if</span> ( Answer[ i ] &gt;= <span class="number">10</span> )&#123;</span><br><span class="line">        Answer[ i + <span class="number">1</span> ] = Answer[ i + <span class="number">1</span> ] + <span class="number">1</span>;</span><br><span class="line">        Answer[ i ] = Answer[ i ] % <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        那么我们如何来确认最后的有效数字，还是通过循环，从最后一位开始，因为我们构造答案数组的方式导致数组的最后几位都是无意义的 0，那么我们从最后一位开始遍历，如果该数字不等于0，那么这就是答案数组的最后一位有效数字，也就是两个数相加的最高位。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> i = Answer.length - <span class="number">1</span>; i &gt; <span class="number">0</span>; i-- )&#123;</span><br><span class="line">    <span class="keyword">if</span> ( Answer[ i ] != <span class="number">0</span> )&#123;</span><br><span class="line">        index = i;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        最后，我们将答案数组倒置输出，就可以得到答案。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> i = index; i &gt;= <span class="number">0</span>; i-- )&#123;</span><br><span class="line">          stringBuilder.append( Answer[ i ] );</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>​        下面是完整的代码。</p>
<h6 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> GamesToPractice.BasicTraining;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 问题描述</span></span><br><span class="line"><span class="comment"> * 　　输入两个整数a和b，输出这两个整数的和。a和b都不超过100位。</span></span><br><span class="line"><span class="comment"> * 算法描述</span></span><br><span class="line"><span class="comment"> * 　　由于a和b都比较大，所以不能直接使用语言中的标准数据类型来存储。对于这种问题，一般使用数组来处理。</span></span><br><span class="line"><span class="comment"> * 　　定义一个数组A，A[0]用于存储a的个位，A[1]用于存储a的十位，依此类推。同样可以用一个数组B来存储b。</span></span><br><span class="line"><span class="comment"> * 　　计算c = a + b的时候，首先将A[0]与B[0]相加，如果有进位产生，则把进位（即和的十位数）存入r，把和的个位数存入C[0]，即C[0]等于(A[0]+B[0])%10。然后计算A[1]与B[1]相加，这时还应将低位进上来的值r也加起来，即C[1]应该是A[1]、B[1]和r三个数的和．如果又有进位产生，则仍可将新的进位存入到r中，和的个位存到C[1]中。依此类推，即可求出C的所有位。</span></span><br><span class="line"><span class="comment"> * 　　最后将C输出即可。</span></span><br><span class="line"><span class="comment"> * 输入格式</span></span><br><span class="line"><span class="comment"> * 　　输入包括两行，第一行为一个非负整数a，第二行为一个非负整数b。两个整数都不超过100位，两数的最高位都不是0。</span></span><br><span class="line"><span class="comment"> * 输出格式</span></span><br><span class="line"><span class="comment"> * 　　输出一行，表示a + b的值。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BASIC_29</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner( System.in );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] numberOne = decompose( input.next() );</span><br><span class="line">        <span class="keyword">int</span>[] numberTwo = decompose( input.next() );</span><br><span class="line"></span><br><span class="line">        System.out.println( add( numberOne, numberTwo ) );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  将输入的字符串分解为倒置的 int 数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] decompose( String string ) &#123;</span><br><span class="line">        <span class="keyword">char</span>[] chars = string.toCharArray();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] Answer = <span class="keyword">new</span> <span class="keyword">int</span>[ chars.length ];</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = chars.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i-- )&#123;</span><br><span class="line">            Answer[ index ] = Integer.parseInt( String.valueOf( chars[ i ] ) );</span><br><span class="line">            index = index + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Answer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">add</span><span class="params">( <span class="keyword">int</span>[] numberOne, <span class="keyword">int</span>[] numberTwo )</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] Answer = <span class="keyword">new</span> <span class="keyword">int</span>[ numberOne.length + numberTwo.length ];</span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> minLength = Math.min( numberOne.length, numberTwo.length );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; minLength; i++ )&#123;</span><br><span class="line">            Answer[ i ] = numberOne[ i ] + numberTwo[ i ];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( minLength &lt;= numberOne.length )&#123;</span><br><span class="line">            System.arraycopy( numberOne, minLength, Answer, minLength, numberOne.length - minLength );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( minLength &lt;= numberTwo.length )&#123;</span><br><span class="line">            System.arraycopy( numberTwo, minLength, Answer, minLength, numberTwo.length - minLength );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = Answer.length - <span class="number">1</span>; i &gt; <span class="number">0</span>; i-- )&#123;</span><br><span class="line">            <span class="keyword">if</span> ( Answer[ i ] != <span class="number">0</span> )&#123;</span><br><span class="line">                index = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 进位处理</span></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; i++ )&#123;</span><br><span class="line">            <span class="keyword">if</span> ( Answer[ i ] &gt;= <span class="number">10</span> )&#123;</span><br><span class="line">                Answer[ i + <span class="number">1</span> ] = Answer[ i + <span class="number">1</span> ] + <span class="number">1</span>;</span><br><span class="line">                Answer[ i ] = Answer[ i ] % <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出</span></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = index; i &gt;= <span class="number">0</span>; i-- )&#123;</span><br><span class="line">            stringBuilder.append( Answer[ i ] );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> stringBuilder.toString();</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="BASIC-28-Huffuman树"><a href="#BASIC-28-Huffuman树" class="headerlink" title="BASIC - - 28 Huffuman树"></a>BASIC - - 28 Huffuman树</h4><h6 id="题目-3"><a href="#题目-3" class="headerlink" title="题目"></a>题目</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">问题描述</span><br><span class="line">　　Huffman树在编码中有着广泛的应用。在这里，我们只关心Huffman树的构造过程。</span><br><span class="line">　　给出一列数&#123;pi&#125;=&#123;p0, p1, …, pn-<span class="number">1</span>&#125;，用这列数构造Huffman树的过程如下：</span><br><span class="line">　　<span class="number">1.</span> 找到&#123;pi&#125;中最小的两个数，设为pa和pb，将pa和pb从&#123;pi&#125;中删除掉，然后将它们的和加入到&#123;pi&#125;中。这个过程的费用记为pa + pb。</span><br><span class="line">　　<span class="number">2.</span> 重复步骤<span class="number">1</span>，直到&#123;pi&#125;中只剩下一个数。</span><br><span class="line">　　在上面的操作过程中，把所有的费用相加，就得到了构造Huffman树的总费用。</span><br><span class="line">　　本题任务：对于给定的一个数列，现在请你求出用该数列构造Huffman树的总费用。</span><br><span class="line"></span><br><span class="line">　　例如，对于数列&#123;pi&#125;=&#123;<span class="number">5</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">9</span>&#125;，Huffman树的构造过程如下：</span><br><span class="line">　　<span class="number">1.</span> 找到&#123;<span class="number">5</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">9</span>&#125;中最小的两个数，分别是<span class="number">2</span>和<span class="number">3</span>，从&#123;pi&#125;中删除它们并将和<span class="number">5</span>加入，得到&#123;<span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">5</span>&#125;，费用为<span class="number">5</span>。</span><br><span class="line">　　<span class="number">2.</span> 找到&#123;<span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">5</span>&#125;中最小的两个数，分别是<span class="number">5</span>和<span class="number">5</span>，从&#123;pi&#125;中删除它们并将和<span class="number">10</span>加入，得到&#123;<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>&#125;，费用为<span class="number">10</span>。</span><br><span class="line">　　<span class="number">3.</span> 找到&#123;<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>&#125;中最小的两个数，分别是<span class="number">8</span>和<span class="number">9</span>，从&#123;pi&#125;中删除它们并将和<span class="number">17</span>加入，得到&#123;<span class="number">10</span>, <span class="number">17</span>&#125;，费用为<span class="number">17</span>。</span><br><span class="line">　　<span class="number">4.</span> 找到&#123;<span class="number">10</span>, <span class="number">17</span>&#125;中最小的两个数，分别是<span class="number">10</span>和<span class="number">17</span>，从&#123;pi&#125;中删除它们并将和<span class="number">27</span>加入，得到&#123;<span class="number">27</span>&#125;，费用为<span class="number">27</span>。</span><br><span class="line">　　<span class="number">5.</span> 现在，数列中只剩下一个数<span class="number">27</span>，构造过程结束，总费用为<span class="number">5</span>+<span class="number">10</span>+<span class="number">17</span>+<span class="number">27</span>=<span class="number">59</span>。</span><br><span class="line">输入格式</span><br><span class="line">　　输入的第一行包含一个正整数n（n&lt;=<span class="number">100</span>）。</span><br><span class="line">　　接下来是n个正整数，表示p0, p1, …, pn-<span class="number">1</span>，每个数不超过<span class="number">1000</span>。</span><br><span class="line">输出格式</span><br><span class="line">　　输出用这些数构造Huffman树的总费用。</span><br><span class="line">样例输入</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">5</span> <span class="number">3</span> <span class="number">8</span> <span class="number">2</span> <span class="number">9</span></span><br><span class="line">样例输出</span><br><span class="line"><span class="number">59</span></span><br></pre></td></tr></table></figure>

<h6 id="分析-3"><a href="#分析-3" class="headerlink" title="分析"></a>分析</h6><h6 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> GamesToPractice.BasicTraining;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 问题描述</span></span><br><span class="line"><span class="comment"> * 　　Huffman树在编码中有着广泛的应用。在这里，我们只关心Huffman树的构造过程。</span></span><br><span class="line"><span class="comment"> * 　　给出一列数&#123;pi&#125;=&#123;p0, p1, …, pn-1&#125;，用这列数构造Huffman树的过程如下：</span></span><br><span class="line"><span class="comment"> * 　　1. 找到&#123;pi&#125;中最小的两个数，设为pa和pb，将pa和pb从&#123;pi&#125;中删除掉，然后将它们的和加入到&#123;pi&#125;中。这个过程的费用记为pa + pb。</span></span><br><span class="line"><span class="comment"> * 　　2. 重复步骤1，直到&#123;pi&#125;中只剩下一个数。</span></span><br><span class="line"><span class="comment"> * 　　在上面的操作过程中，把所有的费用相加，就得到了构造Huffman树的总费用。</span></span><br><span class="line"><span class="comment"> * 　　本题任务：对于给定的一个数列，现在请你求出用该数列构造Huffman树的总费用。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 　　例如，对于数列&#123;pi&#125;=&#123;5, 3, 8, 2, 9&#125;，Huffman树的构造过程如下：</span></span><br><span class="line"><span class="comment"> * 　　1. 找到&#123;5, 3, 8, 2, 9&#125;中最小的两个数，分别是2和3，从&#123;pi&#125;中删除它们并将和5加入，得到&#123;5, 8, 9, 5&#125;，费用为5。</span></span><br><span class="line"><span class="comment"> * 　　2. 找到&#123;5, 8, 9, 5&#125;中最小的两个数，分别是5和5，从&#123;pi&#125;中删除它们并将和10加入，得到&#123;8, 9, 10&#125;，费用为10。</span></span><br><span class="line"><span class="comment"> * 　　3. 找到&#123;8, 9, 10&#125;中最小的两个数，分别是8和9，从&#123;pi&#125;中删除它们并将和17加入，得到&#123;10, 17&#125;，费用为17。</span></span><br><span class="line"><span class="comment"> * 　　4. 找到&#123;10, 17&#125;中最小的两个数，分别是10和17，从&#123;pi&#125;中删除它们并将和27加入，得到&#123;27&#125;，费用为27。</span></span><br><span class="line"><span class="comment"> * 　　5. 现在，数列中只剩下一个数27，构造过程结束，总费用为5+10+17+27=59。</span></span><br><span class="line"><span class="comment"> * 输入格式</span></span><br><span class="line"><span class="comment"> * 　　输入的第一行包含一个正整数n（n&lt;=100）。</span></span><br><span class="line"><span class="comment"> * 　　接下来是n个正整数，表示p0, p1, …, pn-1，每个数不超过1000。</span></span><br><span class="line"><span class="comment"> * 输出格式</span></span><br><span class="line"><span class="comment"> * 　　输出用这些数构造Huffman树的总费用。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BASIC_28</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> length, Answer = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ArrayList&lt; Integer &gt; Huff = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner( System.in );</span><br><span class="line"></span><br><span class="line">        length = input.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++ )</span><br><span class="line">            Huff.add( input.nextInt() );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ( Huff.size() &gt; <span class="number">1</span> )&#123;</span><br><span class="line">            <span class="keyword">int</span> tempOne = getHuffMin();</span><br><span class="line">            <span class="keyword">int</span> tempTwo = getHuffMin();</span><br><span class="line">            Answer = Answer + tempOne + tempTwo;</span><br><span class="line">            Huff.add( tempOne + tempTwo );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println( Answer );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getHuffMin</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> min = Huff.get( <span class="number">0</span> ), index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Huff.size(); i++ )&#123;</span><br><span class="line">            <span class="keyword">if</span> ( Huff.get( i ) &lt; min )&#123;</span><br><span class="line">                min = Huff.get( i );</span><br><span class="line">                index = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Huff.remove( index );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> min;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="BASIC-25-回形取数"><a href="#BASIC-25-回形取数" class="headerlink" title="BASIC - - 25 回形取数"></a>BASIC - - 25 回形取数</h4><h6 id="题目-4"><a href="#题目-4" class="headerlink" title="题目"></a>题目</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">问题描述</span><br><span class="line">　　回形取数就是沿矩阵的边取数，若当前方向上无数可取或已经取过，则左转<span class="number">90</span>度。一开始位于矩阵左上角，方向向下。</span><br><span class="line">输入格式</span><br><span class="line">　　输入第一行是两个不超过<span class="number">200</span>的正整数m, n，表示矩阵的行和列。接下来m行每行n个整数，表示这个矩阵。</span><br><span class="line">输出格式</span><br><span class="line">　　输出只有一行，共mn个数，为输入矩阵回形取数得到的结果。数之间用一个空格分隔，行末不要有多余的空格。</span><br><span class="line">样例输入</span><br><span class="line">	<span class="number">3</span> <span class="number">3</span></span><br><span class="line">	<span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">	<span class="number">4</span> <span class="number">5</span> <span class="number">6</span></span><br><span class="line">	<span class="number">7</span> <span class="number">8</span> <span class="number">9</span></span><br><span class="line">样例输出</span><br><span class="line">	<span class="number">1</span> <span class="number">4</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">6</span> <span class="number">3</span> <span class="number">2</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>

<h6 id="分析-4"><a href="#分析-4" class="headerlink" title="分析"></a>分析</h6><p>​        对于题目，可以使用递归来处理问题。</p>
<p>​        首先，无论方向如何变化，都只有 4 种方向，使用四个函数来进行控制，从对题目的分析可以得出，方向的顺序依次是 ：下 、右 、上 、 左 ，那么我们书写四个方向函数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">down</span><span class="params">( 参数 )</span></span>&#123;</span><br><span class="line">	.......</span><br><span class="line">	right( 参数 );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">right</span><span class="params">( 参数 )</span></span>&#123;</span><br><span class="line">	......</span><br><span class="line">	up( 参数 );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">up</span><span class="params">( 参数 )</span></span>&#123;</span><br><span class="line">	......</span><br><span class="line">	left( 参数 );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">left</span><span class="params">( 参数 )</span></span>&#123;</span><br><span class="line">	......</span><br><span class="line">	down( 参数 );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        还是通过对题目的分析，我们可以知道，数组在存入后的状态如下图：</p>
<p>​        <img src="/2022/02/10/%E8%93%9D%E6%A1%A5%E6%9D%AF-%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0/BASIC_25_1.JPG"></p>
<p>​        我们设定存入的数组有四个极限值用来控制读取，minWight，maxWight，minLength，maxLength 分别代表 列的最左侧，列的最右侧， 行的最小值， 行的最大值，用这四个值来控制递归函数的退出与否</p>
<p>​        因此，所有控制方向的函数的参数都应该有两个，分别代表 行 和 列</p>
<p>​        以上图的数组为例，首先运行 down 函数，传入的参数的为 0 和 0，代表从 0 行 0 列开始递归。因为是向下读写，j 的值不变，因此退出递归的条件为 minLength &gt;= maxLength 或者 i 的值大于 maxLength</p>
<p>​        由于 j值 对应的一行全部被读取，因此 minWight 的值要更新为 j 的值</p>
<p>​        在函数中开启一个循环，条件为 i 的值小于 maxLength 的值，每次打印对应的值。退出循环后，从 maxLength - 1，minWight + 1的位置进入下一个函数 right</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">down</span><span class="params">( <span class="keyword">int</span> i, <span class="keyword">int</span> j )</span></span>&#123;</span><br><span class="line">       minWight = j;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> ( minLength &gt;= maxLength || i &gt;= maxLength )&#123;</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">while</span> ( i &lt; maxLength )&#123;</span><br><span class="line">           ans.append( arr[ i ][ j ] ).append( <span class="string">&quot; &quot;</span> );</span><br><span class="line">           i = i + <span class="number">1</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       right( maxLength - <span class="number">1</span>, minWight + <span class="number">1</span> );</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>​        接下来进入 right 函数，传入的参数为 maxLength - 1，minWigth + 1，代表从 maxLength - 1 行 minWigth + 1 列开始递归。</p>
<p><img src="/2022/02/10/%E8%93%9D%E6%A1%A5%E6%9D%AF-%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0/BASIC_25_2.JPG"></p>
<p>​        也就是从上图中标黄的位置开始读写</p>
<p>​        因为是向右读取，i 不变，因此退出递归的条件为 minWight &gt;= maxWight 或者 j 的值大于等于 maxWight</p>
<p>​        由于在读取完后，i 值对应的一行被全部读取，因此 maxLength 的值要更新为 i 值</p>
<p>​        在函数中开启一个循环，条件为 J 的值小于 maxWight 的值，每次打印对应的值。退出循环后，从 maxLength - 1，maxWight - 1的位置进入下一个函数 up</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">right</span><span class="params">( <span class="keyword">int</span> i, <span class="keyword">int</span> j )</span></span>&#123;</span><br><span class="line">    maxLength = i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( minWight &gt;= maxWight || j &gt;= maxWight )&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> ( j &lt; maxWight )&#123;</span><br><span class="line">        ans.append( arr[ i ][ j ] ).append( <span class="string">&quot; &quot;</span> );</span><br><span class="line">        j = j + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    up( maxLength - <span class="number">1</span>, maxWight - <span class="number">1</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    </p>
<p>​        接下来进入 up 函数，传入的参数为 maxLength - 1，maxWight - 1，代表从 maxLength - 1 行 maxWight - 1 列开始递归。</p>
<p><img src="/2022/02/10/%E8%93%9D%E6%A1%A5%E6%9D%AF-%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0/BASIC_25_3.JPG"></p>
<p>​        也就是从上图中标黄的位置开始读写</p>
<p>​        因为是向上读取，j 不变，因此退出递归的条件为 minLength &gt;= maxLength 或者 i 的值 小于等于 minLength</p>
<p>​        由于在读取完后，j 值对应的一行被全部读取，因此 maxWight 的值要更新为 j 值</p>
<p>​        在函数中开启一个循环，条件为 i 的值大于 minWight 的值，每次打印对应的值。退出循环后，从 minLength + 1，maxWight- 1的位置进入下一个函数 left</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">up</span><span class="params">( <span class="keyword">int</span> i, <span class="keyword">int</span> j )</span></span>&#123;</span><br><span class="line">       maxWight = j;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> ( minLength &gt;= maxLength || i &lt;= minLength )&#123;</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">while</span> ( i &gt; minLength )&#123;</span><br><span class="line">           ans.append( arr[ i ][ j ] ).append( <span class="string">&quot; &quot;</span> );</span><br><span class="line">           i = i - <span class="number">1</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       left( minLength + <span class="number">1</span>, maxWight - <span class="number">1</span> );</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<p>​        接下来进入 right 函数，传入的参数为 minLength + 1，maxWight- 1，代表从 minLength + 1 行 maxWight- 1 列开始递归。</p>
<p><img src="/2022/02/10/%E8%93%9D%E6%A1%A5%E6%9D%AF-%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0/BASIC_25_4.JPG"></p>
<p>​        也就是从上图中标黄的位置开始读写</p>
<p>​        因为是向左读取，i 不变，因此退出递归的条件为 minWight &gt;= maxWight 或者 i 的值 小于等于 minWight</p>
<p>​        由于在读取完后，i 值对应的一行被全部读取，因此 minLength 的值要更新为 i 值</p>
<p>​        在函数中开启一个循环，条件为 i 的值大于 minWight 的值，每次打印对应的值。退出循环后，从 minLength + 1，minWight + 1的位置进入下一个函数 down</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">left</span><span class="params">( <span class="keyword">int</span> i, <span class="keyword">int</span> j )</span></span>&#123;</span><br><span class="line">       minLength = i;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> ( minWight &gt;= maxWight || j &lt;= minWight )&#123;</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">while</span> ( j &gt; minWight )&#123;</span><br><span class="line">           ans.append( arr[ i ][ j ] ).append( <span class="string">&quot; &quot;</span> );</span><br><span class="line">           j = j - <span class="number">1</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       down( minLength + <span class="number">1</span>, minWight + <span class="number">1</span> );</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>​        就这样执行递归，直至完成对数组的读取</p>
<p>​        下面是完整的代码</p>
<h6 id="代码-4"><a href="#代码-4" class="headerlink" title="代码"></a>代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> GamesToPractice.BasicTraining;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BASIC_25</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 问题描述</span></span><br><span class="line"><span class="comment">     * 　　回形取数就是沿矩阵的边取数，若当前方向上无数可取或已经取过，则左转90度。一开始位于矩阵左上角，方向向下。</span></span><br><span class="line"><span class="comment">     * 输入格式</span></span><br><span class="line"><span class="comment">     * 　　输入第一行是两个不超过200的正整数m, n，表示矩阵的行和列。接下来m行每行n个整数，表示这个矩阵。</span></span><br><span class="line"><span class="comment">     * 输出格式</span></span><br><span class="line"><span class="comment">     * 　　输出只有一行，共mn个数，为输入矩阵回形取数得到的结果。数之间用一个空格分隔，行末不要有多余的空格。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[][] matrix;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> StringBuilder ans = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 存入 取数方向的数组</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String[] direction = &#123; <span class="string">&quot;down&quot;</span>, <span class="string">&quot;right&quot;</span>, <span class="string">&quot;up&quot;</span>, <span class="string">&quot;left&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> minN = -<span class="number">1</span>, minM = -<span class="number">1</span>, maxN, maxM; <span class="comment">// N 是行， M 是列</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> length = input.nextInt();</span><br><span class="line">        <span class="keyword">int</span> wight = input.nextInt();</span><br><span class="line">        matrix = <span class="keyword">new</span> <span class="keyword">int</span>[length][wight];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; wight; j++)</span><br><span class="line">                matrix[i][j] = input.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        maxN = length;</span><br><span class="line">        maxM = wight;</span><br><span class="line"></span><br><span class="line">        down( <span class="number">0</span>, <span class="number">0</span> );</span><br><span class="line">        System.out.println( ans );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// i 代表行， j 代表列</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">down</span><span class="params">( <span class="keyword">int</span> i, <span class="keyword">int</span> j )</span></span>&#123;</span><br><span class="line">        minM = j;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( maxN &lt;= minN || i &gt;= maxN )&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ( i &lt; maxN )&#123;</span><br><span class="line">            ans.append( matrix[ i ][ j ] ).append( <span class="string">&quot; &quot;</span> );</span><br><span class="line">            i = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        right( maxN - <span class="number">1</span>, minM + <span class="number">1</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">right</span><span class="params">( <span class="keyword">int</span> i, <span class="keyword">int</span> j )</span></span>&#123;</span><br><span class="line">        maxN = i;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( maxM &lt;= minM || j &gt;= maxM )&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ( j &lt; maxM )&#123;</span><br><span class="line">            ans.append( matrix[ i ][ j ] ).append( <span class="string">&quot; &quot;</span> );</span><br><span class="line">            j = j + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        up( maxN - <span class="number">1</span>, maxM - <span class="number">1</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">up</span><span class="params">( <span class="keyword">int</span> i, <span class="keyword">int</span> j )</span></span>&#123;</span><br><span class="line">        maxM = j;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( maxN &lt;= minN || i &lt;= minN )&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ( i &gt; minN )&#123;</span><br><span class="line">            ans.append( matrix[ i ][ j ] ).append( <span class="string">&quot; &quot;</span> );</span><br><span class="line">            i = i - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        left( minN + <span class="number">1</span>, maxM - <span class="number">1</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">left</span><span class="params">( <span class="keyword">int</span> i, <span class="keyword">int</span> j )</span></span>&#123;</span><br><span class="line">        minN = i;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( maxM &lt;= minM || j &lt;= minN )&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ( j &gt; minN )&#123;</span><br><span class="line">            ans.append( matrix[ i ][ j ] ).append( <span class="string">&quot; &quot;</span> );</span><br><span class="line">            j = j - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        down( minN + <span class="number">1</span>, minM + <span class="number">1</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="BASIC-24-龟兔赛跑预测"><a href="#BASIC-24-龟兔赛跑预测" class="headerlink" title="BASIC - - 24  龟兔赛跑预测"></a>BASIC - - 24  龟兔赛跑预测</h4><h6 id="题目-5"><a href="#题目-5" class="headerlink" title="题目"></a>题目</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">资源限制</span><br><span class="line">	时间限制：<span class="number">1.</span>0s   内存限制：<span class="number">512.</span>0MB</span><br><span class="line">问题描述</span><br><span class="line">　　话说这个世界上有各种各样的兔子和乌龟，但是研究发现，所有的兔子和乌龟都有一个共同的特点——喜欢赛跑。于是世界上各个角落都不断在发生着乌龟和兔子的比赛，小华对此很感兴趣，于是决定研究不同兔子和乌龟的赛跑。他发现，兔子虽然跑比乌龟快，但它们有众所周知的毛病——骄傲且懒惰，于是在与乌龟的比赛中，一旦任一秒结束后兔子发现自己领先t米或以上，它们就会停下来休息s秒。对于不同的兔子，t，s的数值是不同的，但是所有的乌龟却是一致——它们不到终点决不停止。</span><br><span class="line">　　然而有些比赛相当漫长，全程观看会耗费大量时间，而小华发现只要在每场比赛开始后记录下兔子和乌龟的数据——兔子的速度v1（表示每秒兔子能跑v1米），乌龟的速度v2，以及兔子对应的t，s值，以及赛道的长度l——就能预测出比赛的结果。但是小华很懒，不想通过手工计算推测出比赛的结果，于是他找到了你——清华大学计算机系的高才生——请求帮助，请你写一个程序，对于输入的一场比赛的数据v1，v2，t，s，l，预测该场比赛的结果。</span><br><span class="line">输入格式</span><br><span class="line">　　输入只有一行，包含用空格隔开的五个正整数v1，v2，t，s，l，其中(v1,v2&lt;=<span class="number">100</span>;t&lt;=<span class="number">300</span>;s&lt;=<span class="number">10</span>;l&lt;=<span class="number">10000</span>且为v1,v2的公倍数)</span><br><span class="line">输出格式</span><br><span class="line">　　输出包含两行，第一行输出比赛结果——一个大写字母“T”或“R”或“D”，分别表示乌龟获胜，兔子获胜，或者两者同时到达终点。</span><br><span class="line">　　第二行输出一个正整数，表示获胜者（或者双方同时）到达终点所耗费的时间（秒数）。</span><br><span class="line">样例输入</span><br><span class="line">	<span class="number">10</span> <span class="number">5</span> <span class="number">5</span> <span class="number">2</span> <span class="number">20</span></span><br><span class="line">样例输出</span><br><span class="line">	D</span><br><span class="line">	<span class="number">4</span></span><br></pre></td></tr></table></figure>

<h6 id="分析-5"><a href="#分析-5" class="headerlink" title="分析"></a>分析</h6><p>​        对题目分析后可以得知，除了题目提供的 5 个变量，我们还需要 3 个额外的变量，即 兔子跑过的长度， 乌龟跑过的长度， 经过的秒数。 为了方便使用，我们设立 3 个静态变量</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> runOne = <span class="number">0</span>, runTwo = <span class="number">0</span>, nowSecond = <span class="number">0</span>; <span class="comment">// 代表 兔子跑了 runOne 米，乌龟跑了 runTwo 米</span></span><br></pre></td></tr></table></figure>

<p>​        我们可以通过递归来解决这个问题，只考虑每一秒兔子和乌龟的状态，以及她们是否向前跑路。</p>
<p>​        既然如此，那么我们在这个函数中就讨论 1 秒中，兔子 和 乌龟 的行动。首先，确认退出递归的情况  ： 比赛完成，兔子或者乌龟获得胜利，亦或者二者一起到达终点。    </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 双赢</span></span><br><span class="line"><span class="keyword">if</span> ( runOne &gt;= l &amp;&amp; runTwo &gt;= l )&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&quot;D&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 兔子胜利</span></span><br><span class="line">      <span class="keyword">if</span> ( runOne &gt;= l )&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&quot;R&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 乌龟胜利</span></span><br><span class="line">      <span class="keyword">if</span> ( runTwo &gt;= l )&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&quot;T&quot;</span>;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>​        如果不满足退出的条件，就开始讨论这一秒钟兔子和乌龟的行动。那么首先就要考虑兔子是否睡眠，我们可以利用一个 boolean 型的变量，默认为 false ，代表兔子一开始不睡眠</p>
<p>​        开启一个判断，如果 兔子跑过的距离 runOne 减去 乌龟跑过的距离 runTwo 大于等于兔子休息的距离 t 的话，就认为接下来兔子应该睡眠了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( runOne - runTwo &gt;= t )&#123;</span><br><span class="line">          flag = <span class="keyword">true</span>;</span><br><span class="line">          temp = s;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>​        如果兔子不睡眠，那么 兔子 和 乌龟 都向前跑 1 秒钟，经过的时间 + 1 ； 如果 兔子 睡眠，那么进入一个循环，乌龟 向前跑 s 秒，经过的时间 + s 。另外，在循环中要判断一种特殊情况，即 兔子还在睡眠时，乌龟已经到达终点。</p>
<p>​        判断结束后，就开始递归，直到递归结束。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果兔子睡眠，不移动 ； 否则移动一秒</span></span><br><span class="line">      <span class="keyword">if</span> ( flag )&#123;</span><br><span class="line">          <span class="keyword">while</span> ( temp &gt; <span class="number">0</span> )&#123;</span><br><span class="line">              runTwo = runTwo + v2;</span><br><span class="line">              nowSecond = nowSecond + <span class="number">1</span>;</span><br><span class="line">              temp = temp - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">              <span class="comment">// 乌龟在循环中，就已经到达终点</span></span><br><span class="line">              <span class="keyword">if</span> ( runTwo &gt;= l )</span><br><span class="line">                  <span class="keyword">return</span> <span class="string">&quot;T&quot;</span>;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">          runOne = runOne + v1;</span><br><span class="line">          runTwo = runTwo + v2;</span><br><span class="line">          nowSecond = nowSecond + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> run();</span><br></pre></td></tr></table></figure>

<p>​        完整代码如下</p>
<h6 id="代码-5"><a href="#代码-5" class="headerlink" title="代码"></a>代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> GamesToPractice.BasicTraining;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 问题描述</span></span><br><span class="line"><span class="comment"> * 　　话说这个世界上有各种各样的兔子和乌龟，但是研究发现，所有的兔子和乌龟都有一个共同的特点——喜欢赛跑。于是世界上各个角落都不断在发生着乌龟和兔子的比赛，小华对此很感兴趣，于是决定研究不同兔子和乌龟的赛跑。他发现，兔子虽然跑比乌龟快，但它们有众所周知的毛病——骄傲且懒惰，于是在与乌龟的比赛中，一旦任一秒结束后兔子发现自己领先t米或以上，它们就会停下来休息s秒。对于不同的兔子，t，s的数值是不同的，但是所有的乌龟却是一致——它们不到终点决不停止。</span></span><br><span class="line"><span class="comment"> * 　　然而有些比赛相当漫长，全程观看会耗费大量时间，而小华发现只要在每场比赛开始后记录下兔子和乌龟的数据——兔子的速度v1（表示每秒兔子能跑v1米），乌龟的速度v2，以及兔子对应的t，s值，以及赛道的长度l——就能预测出比赛的结果。但是小华很懒，不想通过手工计算推测出比赛的结果，于是他找到了你——清华大学计算机系的高才生——请求帮助，请你写一个程序，对于输入的一场比赛的数据v1，v2，t，s，l，预测该场比赛的结果。</span></span><br><span class="line"><span class="comment"> * 输入格式</span></span><br><span class="line"><span class="comment"> * 　　输入只有一行，包含用空格隔开的五个正整数v1，v2，t，s，l，其中(v1,v2&lt;=100;t&lt;=300;s&lt;=10;l&lt;=10000且为v1,v2的公倍数)</span></span><br><span class="line"><span class="comment"> * 输出格式</span></span><br><span class="line"><span class="comment"> * 　　输出包含两行，第一行输出比赛结果——一个大写字母“T”或“R”或“D”，分别表示乌龟获胜，兔子获胜，或者两者同时到达终点。</span></span><br><span class="line"><span class="comment"> * 　　第二行输出一个正整数，表示获胜者（或者双方同时）到达终点所耗费的时间（秒数）。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BASIC_24</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> v1, v2; <span class="comment">// 代表 兔子的速度v1 乌龟的速度v2</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> t, s, temp; <span class="comment">// 代表 兔子领先 t 米后休息 s 秒, temp 是后续的临时变量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> l; <span class="comment">// 代表总长；</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> runOne = <span class="number">0</span>, runTwo = <span class="number">0</span>, nowSecond = <span class="number">0</span>; <span class="comment">// 代表 兔子跑了 runOne 米，乌龟跑了 runTwo 米</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner( System.in );</span><br><span class="line"></span><br><span class="line">        v1 = input.nextInt();</span><br><span class="line">        v2 = input.nextInt();</span><br><span class="line">        t = input.nextInt();</span><br><span class="line">        s = input.nextInt();</span><br><span class="line">        l = input.nextInt();</span><br><span class="line"></span><br><span class="line">        String s = run();</span><br><span class="line">        System.out.println( s + <span class="string">&quot;\n&quot;</span> + nowSecond );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// flag 代表兔子是否休息</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( runOne &gt;= l &amp;&amp; runTwo &gt;= l )&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;D&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( runOne &gt;= l )&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;R&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( runTwo &gt;= l )&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;T&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( runOne - runTwo &gt;= t )&#123;</span><br><span class="line">            flag = <span class="keyword">true</span>;</span><br><span class="line">            temp = s;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果兔子睡眠，不移动 ； 否则移动一秒</span></span><br><span class="line">        <span class="keyword">if</span> ( flag )&#123;</span><br><span class="line">            <span class="keyword">while</span> ( temp &gt; <span class="number">0</span> )&#123;</span><br><span class="line">                runTwo = runTwo + v2;</span><br><span class="line">                nowSecond = nowSecond + <span class="number">1</span>;</span><br><span class="line">                temp = temp - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 乌龟在循环中，就已经到达终点</span></span><br><span class="line">                <span class="keyword">if</span> ( runTwo &gt;= l )</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;T&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            runOne = runOne + v1;</span><br><span class="line">            runTwo = runTwo + v2;</span><br><span class="line">            nowSecond = nowSecond + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="BASIC-23-芯片测试"><a href="#BASIC-23-芯片测试" class="headerlink" title="BASIC - - 23  芯片测试"></a>BASIC - - 23  芯片测试</h4><h6 id="题目-6"><a href="#题目-6" class="headerlink" title="题目"></a>题目</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">资源限制</span><br><span class="line">	时间限制：<span class="number">1.</span>0s   内存限制：<span class="number">512.</span>0MB</span><br><span class="line">问题描述</span><br><span class="line">　　有n（<span class="number">2</span>≤n≤<span class="number">20</span>）块芯片，有好有坏，已知好芯片比坏芯片多。</span><br><span class="line">　　每个芯片都能用来测试其他芯片。用好芯片测试其他芯片时，能正确给出被测试芯片是好还是坏。而用坏芯片测试其他芯片时，会随机给出好或是坏的测试结果（即此结果与被测试芯片实际的好坏无关）。</span><br><span class="line">　　给出所有芯片的测试结果，问哪些芯片是好芯片。</span><br><span class="line">输入格式</span><br><span class="line">　　输入数据第一行为一个整数n，表示芯片个数。</span><br><span class="line">　　第二行到第n+<span class="number">1</span>行为n*n的一张表，每行n个数据。表中的每个数据为<span class="number">0</span>或<span class="number">1</span>，在这n行中的第i行第j列（<span class="number">1</span>≤i, j≤n）的数据表示用第i块芯片测试第j块芯片时得到的测试结果，<span class="number">1</span>表示好，<span class="number">0</span>表示坏，i=j时一律为<span class="number">1</span>（并不表示该芯片对本身的测试结果。芯片不能对本身进行测试）。</span><br><span class="line">输出格式</span><br><span class="line">　　按从小到大的顺序输出所有好芯片的编号</span><br><span class="line">样例输入</span><br><span class="line">	<span class="number">3</span></span><br><span class="line">	<span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">	<span class="number">0</span> <span class="number">1</span> <span class="number">0</span></span><br><span class="line">	<span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">样例输出</span><br><span class="line">	<span class="number">1</span>	 <span class="number">3</span></span><br></pre></td></tr></table></figure>

<h6 id="分析-6"><a href="#分析-6" class="headerlink" title="分析"></a>分析</h6><p>​        这道题看着吓人，但其实大部分的事情不需要我们做，比如对每个芯片做出测试。我们要做的是从已经完成的测试结果中，找到哪些是好的芯片。</p>
<p>​        那么，拥有什么样的测试结果才是好芯片的测试结果 ？ </p>
<p>​        其实从题目分析可以得到一个信息，好的芯片的数量是多于坏的芯片的数量，而且，两张好的芯片相互测试的结果是相同的，综上所述，我们可以知道 ：测试结果中，结果相同且占大多数的就应该为好的芯片。</p>
<p>​        那么，假设我们已经获得了正确的测试结果 chip 使用一个静态变量 criterion 来进行存储，为了不产生错误，预先设定为 “  ” 字符串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[][] chip;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String criterion = <span class="string">&quot;&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>​        接下来，进入循环，只遍历第一列，把每一层通过 StringBuilder 来拼接成字符串 和 criterion 比较，如果两个字符串的值相同，就认为这组测试结果为好芯片的测试结果。我们可以通过一个函数来实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">identifyChip</span><span class="params">( <span class="keyword">int</span>[] chip )</span></span>&#123;</span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i : chip )&#123;</span><br><span class="line">            stringBuilder.append( i );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> criterion.equalsIgnoreCase( stringBuilder.toString() );</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>​        但是通过上面的分析，如何获取正确的测试结果 criterion 是一个问题。</p>
<p>​        我们可以这样，将每一张芯片的测试结果转化为字符串，用一个 ArrayList 来存储结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt; String &gt; temp = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> ( <span class="keyword">int</span>[] arr : chip )&#123;</span><br><span class="line">          StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">          <span class="keyword">for</span> ( <span class="keyword">int</span> index : arr )&#123;</span><br><span class="line">              stringBuilder.append( index );</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          temp.add( stringBuilder.toString() );</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>​        通过遍历 temp ，利用 HashMap 来统计每一个独特的字符串的出现次数。</p>
<p>​        定义一个 Integer 型的变量 index，使她的值等于map . get( str ) , 如果 index 的值不存在，那么说明 map 中没有这个变量，就将其存贮，值为 1；否则就使其值加 1</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">	HashMap&lt; String, Integer &gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ( String str : temp )&#123;</span><br><span class="line">          Integer index = map.get( str );</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> ( index == <span class="keyword">null</span> )&#123;</span><br><span class="line">              map.put( str, <span class="number">1</span> );</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span>&#123;</span><br><span class="line">              map.put( str, index + <span class="number">1</span> );</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>​        在存入完成后，定义一个 int 型的变量 max，代表在 map 中 value 最大的值。通过这种方式，我们来获取 map 中最大的值，将其对应的值赋给 criterion </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> ( String s : map.keySet() ) &#123;</span><br><span class="line">          <span class="keyword">if</span> ( max &lt; map.get( s ) )&#123;</span><br><span class="line">              max = map.get( s );</span><br><span class="line">              criterion = s;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>​        完整代码如下</p>
<h6 id="代码-6"><a href="#代码-6" class="headerlink" title="代码"></a>代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> GamesToPractice.BasicTraining;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BASIC_23</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 问题描述</span></span><br><span class="line"><span class="comment">     * 　　有n（2≤n≤20）块芯片，有好有坏，已知好芯片比坏芯片多。</span></span><br><span class="line"><span class="comment">     * 　　每个芯片都能用来测试其他芯片。用好芯片测试其他芯片时，能正确给出被测试芯片是好还是坏。而用坏芯片测试其他芯片时，会随机给出好或是坏的测试结果（即此结果与被测试芯片实际的好坏无关）。</span></span><br><span class="line"><span class="comment">     * 　　给出所有芯片的测试结果，问哪些芯片是好芯片。</span></span><br><span class="line"><span class="comment">     * 输入格式</span></span><br><span class="line"><span class="comment">     * 　　输入数据第一行为一个整数n，表示芯片个数。</span></span><br><span class="line"><span class="comment">     * 　　第二行到第n+1行为n*n的一张表，每行n个数据。表中的每个数据为0或1，在这n行中的第i行第j列（1≤i, j≤n）的数据表示用第i块芯片测试第j块芯片时得到的测试结果，1表示好，0表示坏，i=j时一律为1（并不表示该芯片对本身的测试结果。芯片不能对本身进行测试）。</span></span><br><span class="line"><span class="comment">     * 输出格式</span></span><br><span class="line"><span class="comment">     * 　　按从小到大的顺序输出所有好芯片的编号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> quantity;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[][] chip;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String criterion = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner( System.in );</span><br><span class="line"></span><br><span class="line">        quantity = input.nextInt();</span><br><span class="line"></span><br><span class="line">        chip = <span class="keyword">new</span> <span class="keyword">int</span>[ quantity ][ quantity ];</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; quantity; i++ )&#123;</span><br><span class="line">            <span class="keyword">for</span> ( <span class="keyword">int</span> j = <span class="number">0</span>; j &lt; quantity; j++ )&#123;</span><br><span class="line">                chip[ i ][ j ] = input.nextInt();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        getCriterion();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; quantity; i++ )&#123;</span><br><span class="line">            <span class="keyword">if</span> ( identifyChip( chip[ i ] ) )</span><br><span class="line">                System.out.print( ( i + <span class="number">1</span> ) + <span class="string">&quot; &quot;</span> );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">identifyChip</span><span class="params">( <span class="keyword">int</span>[] chip )</span></span>&#123;</span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i : chip )&#123;</span><br><span class="line">            stringBuilder.append( i );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> criterion.equalsIgnoreCase( stringBuilder.toString() );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getCriterion</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ArrayList&lt; String &gt; temp = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        HashMap&lt; String, Integer &gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span>[] arr : chip )&#123;</span><br><span class="line">            StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> ( <span class="keyword">int</span> index : arr )&#123;</span><br><span class="line">                stringBuilder.append( index );</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            temp.add( stringBuilder.toString() );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( String str : temp )&#123;</span><br><span class="line">            Integer index = map.get( str );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ( index == <span class="keyword">null</span> )&#123;</span><br><span class="line">                map.put( str, <span class="number">1</span> );</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                map.put( str, index + <span class="number">1</span> );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> ( String s : map.keySet() ) &#123;</span><br><span class="line">            <span class="keyword">if</span> ( max &lt; map.get( s ) )&#123;</span><br><span class="line">                max = map.get( s );</span><br><span class="line">                criterion = s;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="BASIC-22-FJ的字符串"><a href="#BASIC-22-FJ的字符串" class="headerlink" title="BASIC - - 22  FJ的字符串"></a>BASIC - - 22  FJ的字符串</h4><h6 id="题目-7"><a href="#题目-7" class="headerlink" title="题目"></a>题目</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">资源限制</span><br><span class="line">	时间限制：<span class="number">1.</span>0s   内存限制：<span class="number">512.</span>0MB</span><br><span class="line">问题描述</span><br><span class="line">　　FJ在沙盘上写了这样一些字符串：</span><br><span class="line">　　A1 = “A”</span><br><span class="line">　　A2 = “ABA”</span><br><span class="line">　　A3 = “ABACABA”</span><br><span class="line">　　A4 = “ABACABADABACABA”</span><br><span class="line">　　… …</span><br><span class="line">　　你能找出其中的规律并写所有的数列AN吗？</span><br><span class="line">输入格式</span><br><span class="line">　　仅有一个数：N ≤ <span class="number">26</span>。</span><br><span class="line">输出格式</span><br><span class="line">　　请输出相应的字符串AN，以一个换行符结束。输出中不得含有多余的空格或换行、回车符。</span><br><span class="line">样例输入</span><br><span class="line">	<span class="number">3</span></span><br><span class="line">样例输出</span><br><span class="line">	ABACABA</span><br></pre></td></tr></table></figure>

<h6 id="分析-7"><a href="#分析-7" class="headerlink" title="分析"></a>分析</h6><h6 id="代码-7"><a href="#代码-7" class="headerlink" title="代码"></a>代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> GamesToPractice.BasicTraining;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BASIC_22</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> StringBuilder AN = <span class="keyword">new</span> StringBuilder( <span class="string">&quot;&quot;</span> );</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String[] alphabet = &#123; <span class="string">&quot;A&quot;</span>,<span class="string">&quot;B&quot;</span>,<span class="string">&quot;C&quot;</span>,<span class="string">&quot;D&quot;</span>,<span class="string">&quot;E&quot;</span>,<span class="string">&quot;F&quot;</span>,<span class="string">&quot;G&quot;</span>,<span class="string">&quot;H&quot;</span>,<span class="string">&quot;I&quot;</span>,<span class="string">&quot;J&quot;</span>,<span class="string">&quot;K&quot;</span>,<span class="string">&quot;L&quot;</span>,<span class="string">&quot;M&quot;</span>,<span class="string">&quot;N&quot;</span>,<span class="string">&quot;O&quot;</span>,<span class="string">&quot;P&quot;</span>,<span class="string">&quot;Q&quot;</span>,<span class="string">&quot;R&quot;</span>,<span class="string">&quot;S&quot;</span>,<span class="string">&quot;T&quot;</span>,<span class="string">&quot;U&quot;</span>,<span class="string">&quot;V&quot;</span>,<span class="string">&quot;W&quot;</span>,<span class="string">&quot;X&quot;</span>,<span class="string">&quot;Y&quot;</span>,<span class="string">&quot;Z&quot;</span> &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner( System.in );</span><br><span class="line"></span><br><span class="line">        N = input.nextInt();</span><br><span class="line"></span><br><span class="line">        System.out.println( findAN( <span class="number">0</span> ) );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">findAN</span><span class="params">( <span class="keyword">int</span> tempIndex )</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( N == tempIndex )&#123;</span><br><span class="line">            <span class="keyword">return</span> AN.toString();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        String temp = AN.toString();</span><br><span class="line">        AN.append( alphabet[ tempIndex ] );</span><br><span class="line">        AN.append( temp );</span><br><span class="line">        <span class="keyword">return</span> findAN( tempIndex + <span class="number">1</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="BASIC-26-报时助手"><a href="#BASIC-26-报时助手" class="headerlink" title="BASIC - - 26 报时助手"></a>BASIC - - 26 报时助手</h4><h6 id="题目-8"><a href="#题目-8" class="headerlink" title="题目"></a>题目</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">资源限制</span><br><span class="line">	时间限制：<span class="number">1.</span>0s   内存限制：<span class="number">512.</span>0MB</span><br><span class="line">问题描述</span><br><span class="line">　　给定当前的时间，请用英文的读法将它读出来。</span><br><span class="line">　　时间用时h和分m表示，在英文的读法中，读一个时间的方法是：</span><br><span class="line">　　如果m为<span class="number">0</span>，则将时读出来，然后加上“o<span class="string">&#x27;clock”，如3:00读作“three o&#x27;</span>clock”。</span><br><span class="line">　　如果m不为<span class="number">0</span>，则将时读出来，然后将分读出来，如<span class="number">5</span>:<span class="number">30</span>读作“five thirty”。</span><br><span class="line">　　时和分的读法使用的是英文数字的读法，其中<span class="number">0</span>~<span class="number">20</span>读作：</span><br><span class="line">　　<span class="number">0</span>:zero, <span class="number">1</span>: one, <span class="number">2</span>:two, <span class="number">3</span>:three, <span class="number">4</span>:four, <span class="number">5</span>:five, <span class="number">6</span>:six, <span class="number">7</span>:seven, <span class="number">8</span>:eight, <span class="number">9</span>:nine, <span class="number">10</span>:ten, <span class="number">11</span>:eleven, <span class="number">12</span>:twelve, <span class="number">13</span>:thirteen, <span class="number">14</span>:fourteen, <span class="number">15</span>:fifteen, <span class="number">16</span>:sixteen, <span class="number">17</span>:seventeen, <span class="number">18</span>:eighteen, <span class="number">19</span>:nineteen, <span class="number">20</span>:twenty。</span><br><span class="line">　　<span class="number">30</span>读作thirty，<span class="number">40</span>读作forty，<span class="number">50</span>读作fifty。</span><br><span class="line">　　对于大于<span class="number">20</span>小于<span class="number">60</span>的数字，首先读整十的数，然后再加上个位数。如<span class="number">31</span>首先读<span class="number">30</span>再加<span class="number">1</span>的读法，读作“thirty one”。</span><br><span class="line">　　按上面的规则<span class="number">21</span>:<span class="number">54</span>读作“twenty one fifty four”，<span class="number">9</span>:<span class="number">07</span>读作“nine seven”，<span class="number">0</span>:<span class="number">15</span>读作“zero fifteen”。</span><br><span class="line">输入格式</span><br><span class="line">　　输入包含两个非负整数h和m，表示时间的时和分。非零的数字前没有前导<span class="number">0</span>。h小于<span class="number">24</span>，m小于<span class="number">60</span>。</span><br><span class="line">输出格式</span><br><span class="line">　　输出时间时刻的英文。</span><br><span class="line">样例输入</span><br><span class="line">	<span class="number">0</span> <span class="number">15</span></span><br><span class="line">样例输出</span><br><span class="line">	zero fifteen</span><br></pre></td></tr></table></figure>

<h6 id="分析-8"><a href="#分析-8" class="headerlink" title="分析"></a>分析</h6><h6 id="代码-8"><a href="#代码-8" class="headerlink" title="代码"></a>代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> GamesToPractice.BasicTraining;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BASIC_26</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> Hour, Minutes;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TimeListOne : 0 ~ 19 ; TimeListTwo : 20, 30, 40, 50</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String[] TimeListOne = &#123; <span class="string">&quot;zero&quot;</span>, <span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;three&quot;</span>, <span class="string">&quot;four&quot;</span>, <span class="string">&quot;five&quot;</span>, <span class="string">&quot;six&quot;</span>, <span class="string">&quot;seven&quot;</span>, <span class="string">&quot;eight&quot;</span>, <span class="string">&quot;nine&quot;</span>, <span class="string">&quot;ten&quot;</span>, <span class="string">&quot;eleven&quot;</span>, <span class="string">&quot;twelve&quot;</span>, <span class="string">&quot;thirteen&quot;</span>, <span class="string">&quot;fourteen&quot;</span>, <span class="string">&quot;fifteen&quot;</span>, <span class="string">&quot;sixteen&quot;</span>, <span class="string">&quot;seventeen&quot;</span>, <span class="string">&quot;eighteen&quot;</span>, <span class="string">&quot;nineteen&quot;</span> &#125;;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String[] TimeListTwo = &#123; <span class="string">&quot;twenty&quot;</span>, <span class="string">&quot;thirty&quot;</span>, <span class="string">&quot;forty&quot;</span>, <span class="string">&quot;fifty&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner( System.in );</span><br><span class="line"></span><br><span class="line">        Hour = input.nextInt();</span><br><span class="line">        Minutes = input.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( Minutes == <span class="number">0</span> )&#123;</span><br><span class="line">            System.out.println( conversion( Hour ) + <span class="string">&quot; &quot;</span> + <span class="string">&quot;o&#x27;clock&quot;</span> );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println( conversion( Hour ) + <span class="string">&quot; &quot;</span> + conversion( Minutes ) );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">conversion</span><span class="params">( <span class="keyword">int</span> Time )</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( Time &gt;= <span class="number">0</span> &amp;&amp; Time &lt; <span class="number">20</span> )&#123;</span><br><span class="line">            <span class="keyword">return</span> TimeListOne[ Time ];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> HourTemp = ( Time / <span class="number">10</span> ) - <span class="number">2</span>; <span class="comment">// 十位</span></span><br><span class="line">        <span class="keyword">int</span> MinutesTemp = Time % <span class="number">10</span>; <span class="comment">// 个位</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( MinutesTemp == <span class="number">0</span> )&#123;</span><br><span class="line">            <span class="keyword">return</span> ( TimeListTwo[ HourTemp ] );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ( TimeListTwo[ HourTemp ] + <span class="string">&quot; &quot;</span> + TimeListOne[ MinutesTemp ] );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="BASIC-21-Sine之舞"><a href="#BASIC-21-Sine之舞" class="headerlink" title="BASIC - - 21 Sine之舞"></a>BASIC - - 21 Sine之舞</h4><h6 id="题目-9"><a href="#题目-9" class="headerlink" title="题目"></a>题目</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">资源限制</span><br><span class="line">	时间限制：<span class="number">1.</span>0s   内存限制：<span class="number">512.</span>0MB</span><br><span class="line">问题描述</span><br><span class="line">　　最近FJ为他的奶牛们开设了数学分析课，FJ知道若要学好这门课，必须有一个好的三角函数基本功。所以他准备和奶牛们做一个“Sine之舞”的游戏，寓教于乐，提高奶牛们的计算能力。</span><br><span class="line">　　不妨设</span><br><span class="line">　　An=sin(<span class="number">1</span>–sin(<span class="number">2</span>+sin(<span class="number">3</span>–sin(<span class="number">4</span>+...sin(n))...)</span><br><span class="line">　　Sn=(...(A1+n)A2+n-<span class="number">1</span>)A3+...+<span class="number">2</span>)An+<span class="number">1</span></span><br><span class="line">　　FJ想让奶牛们计算Sn的值，请你帮助FJ打印出Sn的完整表达式，以方便奶牛们做题。</span><br><span class="line">输入格式</span><br><span class="line">　　仅有一个数：N&lt;<span class="number">201</span>。</span><br><span class="line">输出格式</span><br><span class="line">　　请输出相应的表达式Sn，以一个换行符结束。输出中不得含有多余的空格或换行、回车符。</span><br><span class="line">样例输入</span><br><span class="line">	<span class="number">3</span></span><br><span class="line">样例输出</span><br><span class="line">	((sin(<span class="number">1</span>)+<span class="number">3</span>)sin(<span class="number">1</span>–sin(<span class="number">2</span>))+<span class="number">2</span>)sin(<span class="number">1</span>–sin(<span class="number">2</span>+sin(<span class="number">3</span>)))+<span class="number">1</span></span><br></pre></td></tr></table></figure>

<h6 id="分析-9"><a href="#分析-9" class="headerlink" title="分析"></a>分析</h6><p>​        本题主要围绕着 An 和 Sn 这两个公式展开，由于 Sn 跟 An 是有类似与强关联关系的，所以希望解出 Sn 的值需要先解出 An ，那么我们来看看 An 的情况</p>
<p>​        我们将 An 前一部分列出来</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A1 = sin( <span class="number">1</span> )</span><br><span class="line">A2 = sin( <span class="number">1</span> - sin( <span class="number">2</span> ) )</span><br><span class="line">A3 = sin( <span class="number">1</span> - sin( <span class="number">2</span> + sin( <span class="number">3</span> ) ) )</span><br><span class="line">A4 = sin( <span class="number">1</span> - sin( <span class="number">2</span> + sin( <span class="number">3</span> - sin( <span class="number">4</span> ) ) ) )</span><br></pre></td></tr></table></figure>

<p>​        可以看到，An 的规律十分明显。</p>
<p>​        设值为temp 和 一个静态变量 AnTemp。除开 1 以外，若是可以整除2，则在 AnTemp 的最前面插入 - sin ( temp ；若是不能整除2， 则在最前面插入 + sin ( temp ，最后再拼接 “   ） ”。</p>
<p>​        这明显可以使用递归，当 temp == 1 时就退出递归，退出前在 AnTemp 前插入 sin ( 1 , 在 AnTemp 后拼接 “   ） ” </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> StringBuilder AnTemp = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getAN</span><span class="params">( <span class="keyword">int</span> temp )</span></span>&#123;</span><br><span class="line">       <span class="keyword">if</span> ( temp == <span class="number">1</span> )&#123;</span><br><span class="line">           AnTemp = AnTemp.insert( <span class="number">0</span>, <span class="string">&quot;sin(1&quot;</span> );</span><br><span class="line">           AnTemp.append( <span class="string">&quot;)&quot;</span> );</span><br><span class="line"></span><br><span class="line">           <span class="keyword">return</span> AnTemp.toString();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> ( temp % <span class="number">2</span> == <span class="number">0</span> )&#123;</span><br><span class="line">           AnTemp = AnTemp.insert( <span class="number">0</span>, <span class="string">&quot;-sin(&quot;</span> + temp );</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span> &#123;</span><br><span class="line">           AnTemp = AnTemp.insert( <span class="number">0</span>, <span class="string">&quot;+sin(&quot;</span> + temp );</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       AnTemp.append( <span class="string">&quot;)&quot;</span> );</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> getAN( temp - <span class="number">1</span> );</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>​        那么，解决了 An 的问题，我们看看 Sn 的前面一部分，找规律</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">S1 = A1 + <span class="number">1</span></span><br><span class="line">S2 = ( A1 + <span class="number">2</span> )A2 + <span class="number">1</span></span><br><span class="line">S3 = ( ( A1 + <span class="number">3</span> )A2 + <span class="number">2</span> )A3 + <span class="number">1</span></span><br><span class="line">S4 = ( ( ( A1 + <span class="number">4</span> )A2 + <span class="number">3</span> )A3 + <span class="number">2</span> )A4 + <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>​        Sn 的规律也是十分明显，需要利用递归</p>
<p>​        由于递归会反复调用函数进行计算。所以为了避免反复计算，在调用求 Sn 的递归函数前，我们先用一个数组来存储 An 的值，设定一个 String 数组 AnTempList，用一个循环来求出 An 的值，然后存入 AnTempList。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String[] AnTempList;</span><br><span class="line"></span><br><span class="line">AnTempList = <span class="keyword">new</span> String[ N ];</span><br><span class="line">      <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++ )&#123;</span><br><span class="line">          AnTempList[ i ] = getAN( i + <span class="number">1</span> );</span><br><span class="line">          <span class="comment">// 将全局变量 AnTemp 重新变为一个空字符串</span></span><br><span class="line">          <span class="comment">// 这里要注意，如果不将 AnTemp 清空，那么下一次进入 getAn 时会接着上一次的结果继续拼接，倒置结果出现问题</span></span><br><span class="line">          AnTemp = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>​        在存储了 An 的值后，我们就可以利用递归求Sn。</p>
<p>​        根据 Sn 的规律，设值 temp 和 一个静态变量 SnTemp , 当 temp 大于 1 时进行递归。在 SnTemp 的前面插入 “ （   ” ， 在 SnTemp 后拼接 An 的值，再拼接 + 和  “   ） ”</p>
<p>​        当 temp = 1时退出递归，在 SnTemp 的后方拼接 AnTempList[ N - 1 ] 也就是 AnTempList 中的最后一个数，然后再递归外侧拼接一个 “ + 1 ”，就可以输出答案</p>
<p>[^An]: 对应的 An ：AnTempList [ ( N - temp + 1 ) - 1 ] ，由于 N - temp + 1 算出的是 对应An的值，但并不是下标，由此需要减一来获得下标 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> StringBuilder SnTemp = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getSN</span><span class="params">( <span class="keyword">int</span> temp )</span></span>&#123;</span><br><span class="line">       <span class="keyword">if</span> ( temp == <span class="number">1</span> )&#123;</span><br><span class="line">           SnTemp.append( AnTempList[ N - <span class="number">1</span> ] );</span><br><span class="line"></span><br><span class="line">           <span class="keyword">return</span> SnTemp.toString();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       SnTemp = SnTemp.insert( <span class="number">0</span>, <span class="string">&quot;(&quot;</span> );</span><br><span class="line">       SnTemp.append( AnTempList[ ( N - temp + <span class="number">1</span> ) - <span class="number">1</span> ] ).append( <span class="string">&quot;+&quot;</span> ).append( temp ).append( <span class="string">&quot;)&quot;</span> );</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> getSN( temp - <span class="number">1</span> );</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>下面是完整的代码</p>
<h6 id="代码-9"><a href="#代码-9" class="headerlink" title="代码"></a>代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> GamesToPractice.BasicTraining;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BASIC_21</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String Sn;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> StringBuilder AnTemp = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> StringBuilder SnTemp = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String[] AnTempList;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner( System.in );</span><br><span class="line"></span><br><span class="line">        N = input.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 存储 An 的值</span></span><br><span class="line">        AnTempList = <span class="keyword">new</span> String[ N ];</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++ )&#123;</span><br><span class="line">            AnTempList[ i ] = getAN( i + <span class="number">1</span> );</span><br><span class="line">            <span class="comment">// 将全局变量 AnTemp 重新变为一个空字符串</span></span><br><span class="line">            <span class="comment">// 这里要注意，如果不将 AnTemp 清空，那么下一次进入 getAn 时会接着上一次的结果继续拼接，倒置结果</span></span><br><span class="line">            AnTemp = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Sn = getSN( N );</span><br><span class="line">        System.out.println( Sn + <span class="string">&quot;+1&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getAN</span><span class="params">( <span class="keyword">int</span> temp )</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( temp == <span class="number">1</span> )&#123;</span><br><span class="line">            AnTemp = AnTemp.insert( <span class="number">0</span>, <span class="string">&quot;sin(1&quot;</span> );</span><br><span class="line">            AnTemp.append( <span class="string">&quot;)&quot;</span> );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> AnTemp.toString();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( temp % <span class="number">2</span> == <span class="number">0</span> )&#123;</span><br><span class="line">            AnTemp = AnTemp.insert( <span class="number">0</span>, <span class="string">&quot;-sin(&quot;</span> + temp );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            AnTemp = AnTemp.insert( <span class="number">0</span>, <span class="string">&quot;+sin(&quot;</span> + temp );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        AnTemp.append( <span class="string">&quot;)&quot;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> getAN( temp - <span class="number">1</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getSN</span><span class="params">( <span class="keyword">int</span> temp )</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( temp == <span class="number">1</span> )&#123;</span><br><span class="line">            SnTemp.append( AnTempList[ N - <span class="number">1</span> ] );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> SnTemp.toString();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        SnTemp = SnTemp.insert( <span class="number">0</span>, <span class="string">&quot;(&quot;</span> );</span><br><span class="line">        SnTemp.append( AnTempList[ ( N - temp + <span class="number">1</span> ) - <span class="number">1</span> ] ).append( <span class="string">&quot;+&quot;</span> ).append( temp ).append( <span class="string">&quot;)&quot;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> getSN( temp - <span class="number">1</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="BASIC-20-数的读法"><a href="#BASIC-20-数的读法" class="headerlink" title="BASIC - - 20 数的读法"></a>BASIC - - 20 数的读法</h4><h6 id="题目-10"><a href="#题目-10" class="headerlink" title="题目"></a>题目</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">资源限制</span><br><span class="line">	时间限制：<span class="number">1.</span>0s   内存限制：<span class="number">512.</span>0MB</span><br><span class="line">问题描述</span><br><span class="line">　　Tom教授正在给研究生讲授一门关于基因的课程，有一件事情让他颇为头疼：一条染色体上有成千上万个碱基对，它们从<span class="number">0</span>开始编号，到几百万，几千万，甚至上亿。</span><br><span class="line">　　比如说，在对学生讲解第<span class="number">1234567009</span>号位置上的碱基时，光看着数字是很难准确的念出来的。</span><br><span class="line">　　所以，他迫切地需要一个系统，然后当他输入<span class="number">12</span> <span class="number">3456</span> <span class="number">7009</span>时，会给出相应的念法：</span><br><span class="line">　　十二亿三千四百五十六万七千零九</span><br><span class="line">　　用汉语拼音表示为</span><br><span class="line">　　shi er yi san qian si bai wu shi liu wan qi qian ling jiu</span><br><span class="line">　　这样他只需要照着念就可以了。</span><br><span class="line">　　你的任务是帮他设计这样一个系统：给定一个阿拉伯数字串，你帮他按照中文读写的规范转为汉语拼音字串，相邻的两个音节用一个空格符格开。</span><br><span class="line">　　注意必须严格按照规范，比如说“<span class="number">10010</span>”读作“yi wan ling yi shi”而不是“yi wan ling shi”，“<span class="number">100000</span>”读作“shi wan”而不是“yi shi wan”，“<span class="number">2000</span>”读作“er qian”而不是“liang qian”。</span><br><span class="line">输入格式</span><br><span class="line">　　有一个数字串，数值大小不超过<span class="number">2</span>,<span class="number">000</span>,<span class="number">000</span>,<span class="number">000</span>。</span><br><span class="line">输出格式</span><br><span class="line">　　是一个由小写英文字母，逗号和空格组成的字符串，表示该数的英文读法。</span><br><span class="line">样例输入</span><br><span class="line">	<span class="number">1234567009</span></span><br><span class="line">样例输出</span><br><span class="line">	shi er yi san qian si bai wu shi liu wan qi qian ling jiu</span><br></pre></td></tr></table></figure>

<h6 id="分析-10"><a href="#分析-10" class="headerlink" title="分析"></a>分析</h6><p>​        首先，我们可以看到一条明确的思路，首先将输入的整数按位拆分为数组，在按位将数读出来。由于题目的特殊性，这次存入数组时应该顺序存入，也就是 15000 存入后为：</p>
<table>
<thead>
<tr>
<th align="center">1</th>
<th align="center">5</th>
<th align="center">0</th>
<th align="center">0</th>
<th align="center">0</th>
</tr>
</thead>
</table>
<p>​        存入后，我们设立两个静态数组，一个用来读数，也就是 1 ~ 9 ； 一个用来读位，也就是 百，千，万 之类的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String[] </span><br><span class="line">      alphabetOne = &#123; <span class="string">&quot;ling&quot;</span>, <span class="string">&quot;yi&quot;</span>, <span class="string">&quot;er&quot;</span>, <span class="string">&quot;san&quot;</span>, <span class="string">&quot;si&quot;</span>, <span class="string">&quot;wu&quot;</span>, <span class="string">&quot;liu&quot;</span>, <span class="string">&quot;qi&quot;</span>, <span class="string">&quot;ba&quot;</span>, <span class="string">&quot;jiu&quot;</span> &#125;; <span class="comment">// 0 ~ 9</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> String[] </span><br><span class="line">      alphabetTwo = &#123; <span class="string">&quot;shi&quot;</span>, <span class="string">&quot;bai&quot;</span>, <span class="string">&quot;qian&quot;</span>, <span class="string">&quot;wan&quot;</span>, <span class="string">&quot;shi&quot;</span>, <span class="string">&quot;bai&quot;</span>, <span class="string">&quot;qian&quot;</span>, <span class="string">&quot;yi&quot;</span>, <span class="string">&quot;shi&quot;</span> &#125;;</span><br></pre></td></tr></table></figure>

<p>​        可以看到，在 alphabetTwo 中，wan 和 yi 后都存入了 shi 和 bai 这两位分别代表 十万 和 百万，yi 后面的 shi 代表 十亿</p>
<p>​        我们将数拆解后，进入一个循环，将每一位数读出来，对于数组中储存的数，有 4 种情况：</p>
<ol>
<li><p>一般的情况，数有意义且可以直接输出，此时输出这个数在 alphabetOne 中的对应值，加上在 alphabetTwo 中对应的位数</p>
<p>​        alphabetOne 中的对应为 alphabetOne [ arr[ i ] ]</p>
<p>​        alphabetTwo 中的对应为 alphabetTwo[ arr. length - i - 2 ] 代表的是数的位数，由于没有各位的对应所以要在原有的基础上再减一 由此原本的值为 alphabetTwo[ arr. length - i - 1 - 1 ] 简写为 alphabetTwo[ arr. length - i - 2 ]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.print( alphabetOne[ arr[ i ] ] + &quot; &quot; + alphabetTwo[ arr.length - i - 2 ] + &quot; &quot;</span><br></pre></td></tr></table></figure></li>
<li><p>所读的数是个位数</p>
<p>​        由于个位数在 alphabetTwo 中没有对应的读写值，由此，在读个位数，也就是 arr 数组的最后一位时，只打印其在 alphabetOne 中的值</p>
<p>​        在这种情况下，如果个位数是 0， 那么就不进行读写</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( i == arr.length - <span class="number">1</span> )&#123;</span><br><span class="line">             <span class="keyword">if</span> ( arr[ i ] == <span class="number">0</span> )&#123;</span><br><span class="line">                 System.out.println( <span class="string">&quot;&quot;</span> );</span><br><span class="line">                 <span class="keyword">break</span>;</span><br><span class="line">             &#125;</span><br><span class="line">   </span><br><span class="line">             System.out.println( alphabetOne[ arr[ i ] ] );</span><br><span class="line">             <span class="keyword">break</span>;</span><br><span class="line">         &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>所读的数是 0 ( arr[ i ] == 0 )</p>
<p>​        此时，要分情况讨论，首先是若 arr[ i ] 所对应的为正好是 wan 或者 yi 时（ 如 50 0000， 50 0000 0000 ）只读出位，不读数，也就是说，只打印 wan 或者 yi 。另外，在此种情况下，若打印了 yi 就不打印 wan （ 如 50 0000 0000 ）</p>
<p>​        其次，若 0 无意义的 0 （ 如 1 0000 ），不需要读写。</p>
<p>​        此时的我们需要找到数组中最后一个有意义的数，记录下标，</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查找最后一位有意义的数</span></span><br><span class="line">     <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">for</span> ( <span class="keyword">int</span> i = arr.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i-- )&#123;</span><br><span class="line">         <span class="keyword">if</span> ( arr[ i ] != <span class="number">0</span> )&#123;</span><br><span class="line">             index = i;</span><br><span class="line">             <span class="keyword">break</span>;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<p>​        若 i 值大于下表时，就认为是无意义的 0 ；反之又是另外一种情况，有意义的 0</p>
<p>​        在 有意义的 0 中，又有两种不同的情况 ：即 单独的0 和 重复的0 ，若是单独的 0 则需要打印 ling，重复的 0 应该打印最后的 0</p>
<p>那么不妨设定条件，若 arr[ i  + 1 ] != 0 时，打印 ling ，否则不读写。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( arr[ i ] == <span class="number">0</span> )&#123;</span><br><span class="line">             <span class="keyword">if</span> ( alphabetTwo[ arr.length - i - <span class="number">2</span> ].equalsIgnoreCase( <span class="string">&quot;yi&quot;</span> ) )&#123;</span><br><span class="line">                 System.out.print( <span class="string">&quot;yi &quot;</span> );</span><br><span class="line">                 flag = <span class="keyword">true</span>;</span><br><span class="line">                 <span class="keyword">continue</span>;</span><br><span class="line">             &#125;</span><br><span class="line">   </span><br><span class="line">             <span class="keyword">if</span> ( alphabetTwo[ arr.length - i - <span class="number">2</span> ].equalsIgnoreCase( <span class="string">&quot;wan&quot;</span> ) &amp;&amp; ! flag )&#123;</span><br><span class="line">                 System.out.print( <span class="string">&quot;wan &quot;</span> );</span><br><span class="line">                 <span class="keyword">continue</span>;</span><br><span class="line">             &#125;</span><br><span class="line">   </span><br><span class="line">             <span class="keyword">if</span> ( i &gt;= index )&#123;</span><br><span class="line">                 System.out.print( <span class="string">&quot;&quot;</span> );</span><br><span class="line">                 <span class="keyword">continue</span>;</span><br><span class="line">             &#125;</span><br><span class="line">   </span><br><span class="line">             <span class="keyword">if</span> ( arr[ i + <span class="number">1</span> ] != <span class="number">0</span> )&#123;</span><br><span class="line">                 System.out.print( <span class="string">&quot;ling &quot;</span> );</span><br><span class="line">                 <span class="keyword">continue</span>;</span><br><span class="line">             &#125;</span><br><span class="line">   </span><br><span class="line">             System.out.print( <span class="string">&quot;&quot;</span> );</span><br><span class="line">             <span class="keyword">continue</span>;</span><br><span class="line">         &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>arr[ i ] 的值位于 shi 位上</p>
<p>​        此时，需要单独讨论。首先，若 这个 10 位属于 开头的十 （ 如 10 0000 ）就可以直接打印 shi 不必打印 arr[ i ] 的值。</p>
<p>​        除此之外，若 arr[ i ] 所对应的 shi 是数组末尾的十（ 如 1 0010 ）也就是 arr[ i + 1 ] == 0 ，这个时候就需要打印 yi shi 而不能打印 shi </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( arr[ i ] == <span class="number">1</span> &amp;&amp; alphabetTwo[ arr.length - i - <span class="number">2</span> ].equalsIgnoreCase( <span class="string">&quot;shi&quot;</span> ) )&#123;</span><br><span class="line">             <span class="keyword">if</span> ( i == <span class="number">0</span> )&#123;</span><br><span class="line">                 System.out.print( <span class="string">&quot;shi&quot;</span> + <span class="string">&quot; &quot;</span> );</span><br><span class="line">                 <span class="keyword">continue</span>;</span><br><span class="line">             &#125;</span><br><span class="line">   </span><br><span class="line">             <span class="keyword">if</span> ( arr[ i + <span class="number">1</span> ] == <span class="number">0</span> )&#123;</span><br><span class="line">                 System.out.print( <span class="string">&quot;yi shi&quot;</span> + <span class="string">&quot; &quot;</span> );</span><br><span class="line">                 <span class="keyword">continue</span>;</span><br><span class="line">             &#125;</span><br><span class="line">   </span><br><span class="line">             System.out.print( <span class="string">&quot;shi&quot;</span> + <span class="string">&quot; &quot;</span> );</span><br><span class="line">             <span class="keyword">continue</span>;</span><br><span class="line">         &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>综上所属，完成对细节的讨论后，题目就解决了，下面是完整的代码：</p>
<h6 id="代码-10"><a href="#代码-10" class="headerlink" title="代码"></a>代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> GamesToPractice.BasicTraining;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BASIC_20</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String[] </span><br><span class="line">        alphabetOne = &#123; <span class="string">&quot;ling&quot;</span>, <span class="string">&quot;yi&quot;</span>, <span class="string">&quot;er&quot;</span>, <span class="string">&quot;san&quot;</span>, <span class="string">&quot;si&quot;</span>, <span class="string">&quot;wu&quot;</span>, <span class="string">&quot;liu&quot;</span>, <span class="string">&quot;qi&quot;</span>, <span class="string">&quot;ba&quot;</span>, <span class="string">&quot;jiu&quot;</span> &#125;; <span class="comment">// 0 ~ 9</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String[] </span><br><span class="line">        alphabetTwo = &#123; <span class="string">&quot;shi&quot;</span>, <span class="string">&quot;bai&quot;</span>, <span class="string">&quot;qian&quot;</span>, <span class="string">&quot;wan&quot;</span>, <span class="string">&quot;shi&quot;</span>, <span class="string">&quot;bai&quot;</span>, <span class="string">&quot;qian&quot;</span>, <span class="string">&quot;yi&quot;</span>, <span class="string">&quot;shi&quot;</span> &#125;;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] arr;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner( System.in );</span><br><span class="line"></span><br><span class="line">        N = input.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 求出位数</span></span><br><span class="line">        <span class="keyword">int</span> length = <span class="number">0</span>, temp = N;</span><br><span class="line">        <span class="keyword">while</span> ( temp != <span class="number">0</span> )&#123;</span><br><span class="line">            length = length + <span class="number">1</span>;</span><br><span class="line">            temp = temp / <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        temp = N; <span class="comment">// 重新赋值</span></span><br><span class="line">        arr = <span class="keyword">new</span> <span class="keyword">int</span>[ length ];</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = arr.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i-- )&#123;</span><br><span class="line">            arr[ i ] = temp % <span class="number">10</span>;</span><br><span class="line">            temp = temp / <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查找最后一位有意义的数</span></span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = arr.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i-- )&#123;</span><br><span class="line">            <span class="keyword">if</span> ( arr[ i ] != <span class="number">0</span> )&#123;</span><br><span class="line">                index = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        System.out.println(Arrays.toString(arr));</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">false</span>; <span class="comment">// 当打印 10 的倍数时，打 yi 就可以不打 wan</span></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++ )&#123;</span><br><span class="line">            <span class="comment">// 打印个位数</span></span><br><span class="line">            <span class="keyword">if</span> ( i == arr.length - <span class="number">1</span> )&#123;</span><br><span class="line">                <span class="keyword">if</span> ( arr[ i ] == <span class="number">0</span> )&#123;</span><br><span class="line">                    System.out.println( <span class="string">&quot;&quot;</span> );</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                System.out.println( alphabetOne[ arr[ i ] ] );</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ( arr[ i ] == <span class="number">0</span> )&#123;</span><br><span class="line">                <span class="keyword">if</span> ( alphabetTwo[ arr.length - i - <span class="number">2</span> ].equalsIgnoreCase( <span class="string">&quot;yi&quot;</span> ) )&#123;</span><br><span class="line">                    System.out.print( <span class="string">&quot;yi &quot;</span> );</span><br><span class="line">                    flag = <span class="keyword">true</span>;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> ( alphabetTwo[ arr.length - i - <span class="number">2</span> ].equalsIgnoreCase( <span class="string">&quot;wan&quot;</span> ) &amp;&amp; ! flag )&#123;</span><br><span class="line">                    System.out.print( <span class="string">&quot;wan &quot;</span> );</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> ( i &gt;= index )&#123;</span><br><span class="line">                    System.out.print( <span class="string">&quot;&quot;</span> );</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> ( arr[ i + <span class="number">1</span> ] != <span class="number">0</span> )&#123;</span><br><span class="line">                    System.out.print( <span class="string">&quot;ling &quot;</span> );</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                System.out.print( <span class="string">&quot;&quot;</span> );</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 10 的特殊情况</span></span><br><span class="line">            <span class="keyword">if</span> ( arr[ i ] == <span class="number">1</span> &amp;&amp; alphabetTwo[ arr.length - i - <span class="number">2</span> ].equalsIgnoreCase( <span class="string">&quot;shi&quot;</span> ) )&#123;</span><br><span class="line">                <span class="keyword">if</span> ( i == <span class="number">0</span> )&#123;</span><br><span class="line">                    System.out.print( <span class="string">&quot;shi&quot;</span> + <span class="string">&quot; &quot;</span> );</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> ( arr[ i + <span class="number">1</span> ] == <span class="number">0</span> )&#123;</span><br><span class="line">                    System.out.print( <span class="string">&quot;yi shi&quot;</span> + <span class="string">&quot; &quot;</span> );</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                System.out.print( <span class="string">&quot;shi&quot;</span> + <span class="string">&quot; &quot;</span> );</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.print( alphabetOne[ arr[ i ] ] + <span class="string">&quot; &quot;</span> + alphabetTwo[ arr.length - i - <span class="number">2</span> ] + <span class="string">&quot; &quot;</span> );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/17/Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="神秘的世界">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/17/Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">Java网络编程的学习笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-12-17 00:02:14 / Modified: 01:33:11" itemprop="dateCreated datePublished" datetime="2021-12-17T00:02:14+08:00">2021-12-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="屁话"><a href="#屁话" class="headerlink" title="屁话"></a>屁话</h2><p>​        网络编程是指编写运行在多个设备（计算机）的程序，这些设备都通过网络连接起来。</p>
<p>​        java.net 包中 J2SE 的 API 包含有类和接口，它们提供低层次的通信细节。你可以直接使用这些类和接口，来专注于解决问题，而不用关注通信细节。</p>
<p>​        java.net 包中提供了两种常见的网络协议的支持 TCP 协议 和 UDP 协议</p>
<h4 id="TCP-和-UDP-协议"><a href="#TCP-和-UDP-协议" class="headerlink" title="TCP 和 UDP 协议"></a>TCP 和 UDP 协议</h4><h5 id="TCP协议"><a href="#TCP协议" class="headerlink" title="TCP协议"></a>TCP协议</h5><p>​        位于传输层， 提供可靠的字节流服务。所谓的字节流服务（Byte Stream Service） 是指， 为了方便传输， 将大块数据分割成以报文段（segment） 为单位的数据包进行管理。 </p>
<p>​        而可靠的传输服务是指， 能够把数据准确可靠地传给对方。 </p>
<p>​        TCP 协议为了更容易传送大数据才把数据分割， 而且 TCP 协议能够确认数据最终是否送达到对方。所以，TCP连接相当于两根管道（一个用于服务器到客户端，一个用于客户端到服务器），管道里面数据传输是通过字节码传输，传输是有序的，每个字节都是一个一个来传输。</p>
<p>​        </p>
<h6 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h6><p>​            握手过程中使用了 TCP 的标志（flag） —— SYN（synchronize） 和 ACK（acknowledgement）。</p>
<p>​            第一次握手：建立连接时，客户端A发送SYN包（SYN=j）到服务器B，并进入SYN_SEND状态，等待服务器B确认。<br>​            第二次握手：服务器B收到SYN包，必须确认客户A的SYN（ACK=j+1），同时自己也发送一个SYN包（SYN=k），即SYN+ACK包，此时服务器B进入SYN_RECV状态。<br>​            第三次握手：客户端A收到服务器B的SYN＋ACK包，向服务器B发送确认包ACK（ACK=k+1），此包发送完毕，完成三次握手。</p>
<p>​            若在握手过程中某个阶段莫名中断， TCP 协议会再次以相同的顺序发送相同的数据包。</p>
<p><img src="/2021/12/17/Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/TCP%E5%8D%8F%E8%AE%AE.jpg" alt="TCP协议"></p>
<h6 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h6><p>​            由于TCP连接是全双工的，因此每个方向都必须单独进行关闭。这个原则是当一方完成它的数据发送任务后就能发送一个FIN来终止这个方向的连接。收到一个 FIN只意味着这一方向上没有数据流动，一个TCP连接在收到一个FIN后仍能发送数据。先进行关闭的一方将执行主动关闭，而另一方被动关闭。</p>
<p>​            客户端A发送一个FIN，用来关闭客户A到服务器B的数据传送。</p>
<p>​            服务器B收到这个FIN，它发回一个ACK，确认序号为收到的序号加1。</p>
<p>​            服务器B关闭与客户端A的连接，发送一个FIN给客户端A。</p>
<p>​            客户端A发回ACK报文确认，并将确认序号设置为收到序号加1。</p>
<h6 id="三次握手和四次挥手"><a href="#三次握手和四次挥手" class="headerlink" title="三次握手和四次挥手"></a>三次握手和四次挥手</h6><p>​            在TCP连接中，服务器端的SYN和ACK向客户端发送是一次性发送的，而在断开连接的过程中， B端向A端发送的ACK和FIN是分两次发送的。</p>
<p>​            因为在B端接收到A端的FIN后， B端可能还有数据要传输。</p>
<p>​            所以先发送ACK，等B端处理完自己的事情后就可以发送FIN断开连接了。</p>
<h5 id="UDP协议"><a href="#UDP协议" class="headerlink" title="UDP协议"></a>UDP协议</h5><p>​        无连接协议，也称透明协议，也位于传输层。</p>
<p>​        </p>
<h6 id="UDP协议-和-TCP协议的区别"><a href="#UDP协议-和-TCP协议的区别" class="headerlink" title="UDP协议 和 TCP协议的区别"></a>UDP协议 和 TCP协议的区别</h6><p>​            1）TCP提供面向连接的传输，通信前要先建立连接（三次握手机制）； UDP提供无连接的传输，通信前不需要建立连接。</p>
<p>​            2）TCP提供可靠的传输（有序，无差错，不丢失，不重复）； UDP提供不可靠的传输。</p>
<p>​            3）TCP面向字节流的传输，因此它能将信息分割成组，并在接收端将其重组； UDP是面向数据报的传输，没有分组开销。</p>
<p>​            4）TCP提供拥塞控制和流量控制机制； UDP不提供拥塞控制和流量控制机制。</p>
<h4 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h4><h5 id="IP地址"><a href="#IP地址" class="headerlink" title="IP地址"></a>IP地址</h5><p>​        IP地址（Internet Protocol Address）是指 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E4%BA%92%E8%81%94%E7%BD%91/199186">互联网</a> 协议地址，又译为网际协议地址。</p>
<p>​        IP地址是 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/IP%E5%8D%8F%E8%AE%AE/131947">IP协议</a> 提供的一种统一的 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%9C%B0%E5%9D%80%E6%A0%BC%E5%BC%8F/53569124">地址格式</a> ，它为互联网上的每一个网络和每一台 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E4%B8%BB%E6%9C%BA/455151">主机</a> 分配一个 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80/3283849">逻辑地址</a> ，以此来屏蔽 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80/2901583">物理地址</a> 的差异。</p>
<p>​        Java中使用 InetAddress 类来完成对 IP 地址的相关操作。</p>
<p>​        要说明的时，虽然 InetAddress 类使用后并不需要关闭链接( 执行 close 方法 )，但 InetAddress 类并没有构造函数，和 时间类中的格里高利类相似，都只能使用静态方法来获取对象，而不能直接使用 new 关键字。</p>
<h6 id="InetAddress-类的常用方法"><a href="#InetAddress-类的常用方法" class="headerlink" title="InetAddress 类的常用方法"></a>InetAddress 类的常用方法</h6><table>
<thead>
<tr>
<th align="center">getByName( String host )</th>
<th align="center">获取指定 host 的 InetAddress 类对象</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>getLocalHost( )</strong></td>
<td align="center"><strong>获取本机地址的 InetAddress 类对象</strong></td>
</tr>
</tbody></table>
<h6 id="InetAddress-对象的可用方法"><a href="#InetAddress-对象的可用方法" class="headerlink" title="InetAddress 对象的可用方法"></a>InetAddress 对象的可用方法</h6><table>
<thead>
<tr>
<th align="center">getHostName( )</th>
<th align="center">获取**本地主机名</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>getCanonicalHostName( )</strong></td>
<td align="center"><strong>获取主机名</strong></td>
</tr>
<tr>
<td align="center"><strong>getAddress( )</strong></td>
<td align="center"><strong>返回以byte数组形式的IP地址</strong></td>
</tr>
</tbody></table>
<h5 id="端口Port"><a href="#端口Port" class="headerlink" title="端口Port"></a>端口Port</h5><p>​        port 是一种接口，数据通过它在计算机和其它设备（如打印机、鼠标、键盘或监视器）之间、网络之间或和其它直接连接的计算机之间传递。</p>
<p>​        在编程里，端口是一种“逻辑连接位置”，特别是在 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%9B%A0%E7%89%B9%E7%BD%91%E5%8D%8F%E8%AE%AE">因特网协议</a><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/TCP%2FIP/214077">TCP/IP</a> 中，客户端程序被分派计算机上特殊服务程序的一种方式。</p>
<p>​        高层的使用 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/TCP%2FIP%E5%8D%8F%E8%AE%AE">TCP/IP协议 </a>如网页协议， <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE">超文本传输协议 </a>的应用软件，都有特别指定的端口。</p>
<p>​        从端口的分配来看，端口被分为固定端口和动态端口两大类：</p>
<p>​        固定端口（0～1023）使用 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86">集中式管理 </a>机制，即服从一个管理机构对端口的指派，这个机构负责发布这些指派。由于这些端口紧绑于一些服务，所以我们会经常扫描这些端口来判断对方是否开启了这些服务，如TCP的21（ftp），80（http），139（netbios），UDP的7（echo），69（tftp）等等一些大家熟知的端口。</p>
<p>​        动态端口（1024～49151）：这些端口并不被固定的捆绑于某一服务，操作系统将这些端口动态的分配给各个进程，同一进程两次分配有可能分配到不同的端口。不过一些应用程序并不愿意使用操作系统分配的动态端口，他们有其自己的‘商标性’端口，如 oicq 客户端的4000端口，木马冰河的7626端口等都是固定而出名的。</p>
<h5 id="通信协议"><a href="#通信协议" class="headerlink" title="通信协议"></a>通信协议</h5><p>​        通信协议是指双方实体完成通信或服务所必须遵循的规则和约定。通过通信信道和设备互连起来的多个不同地理位置的<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1">数据通信</a>系统，要使其能协同工作实现信息交换和资源共享，它们之间必须具有共同的语言。交流什么、怎样交流及何时交流，都必须遵循某种互相都能接受的规则。这个规则就是通信协议。</p>
<h4 id="TCP的相关程序实现"><a href="#TCP的相关程序实现" class="headerlink" title="TCP的相关程序实现"></a>TCP的相关程序实现</h4><h5 id="通过-TCP-协议完成信息沟通"><a href="#通过-TCP-协议完成信息沟通" class="headerlink" title="通过 TCP 协议完成信息沟通"></a>通过 TCP 协议完成信息沟通</h5><p>​        客户端：通过 TCP 协议，利用 Socket 类来完成与指定服务端的链接。完成链接后，使用 IO 流来完成数据的写入并通过包装流发送给服务端。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 客户端代码</span></span><br><span class="line"><span class="keyword">package</span> JavaNetworkProgramming.TCPProject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TcpClientDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 客户端</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        OutputStream os = <span class="keyword">null</span>;</span><br><span class="line">        Socket socket = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1、 需要服务器的地址,设定端口号</span></span><br><span class="line">            InetAddress inetAddress = InetAddress.getByName( <span class="string">&quot;127.0.0.1&quot;</span> );</span><br><span class="line">            <span class="keyword">int</span> port = <span class="number">9980</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2、 通过stocked链接</span></span><br><span class="line">            socket = <span class="keyword">new</span> Socket( inetAddress, port );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3、 使用 IO 流</span></span><br><span class="line">            os = socket.getOutputStream();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ ) &#123;</span><br><span class="line">                os.write( ( <span class="string">&quot; 第 &quot;</span> + i + <span class="string">&quot; 次写入 &quot;</span> ).getBytes() );</span><br><span class="line">                os.write( <span class="string">&quot;\n&quot;</span>.getBytes() );</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 关闭需要断开的变量</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (os != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    os.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (socket != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    socket.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        服务端：通过 TCP 协议，利用 Socket 类 和 ServerSocket类 来完成与指定客户端的链接。 ServerSocket 类利用相关数据构建链接，启用静态监听 accept 方法来获取 Socket 类对象。完成后，使用接收到的 Socket 对象的相关接收方法和包装类来完成对客户端发送数据的接收。</p>
<p>​        服务端代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JavaNetworkProgramming.TCPProject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TcpServerDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 服务端</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1、需要生成服务器地址</span></span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">null</span>;</span><br><span class="line">        Socket accept = <span class="keyword">null</span>;</span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        ByteArrayOutputStream baos = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1、获取一个地址</span></span><br><span class="line">            serverSocket = <span class="keyword">new</span> ServerSocket( <span class="number">9980</span> );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2、等待客户端链接</span></span><br><span class="line">            accept = serverSocket.accept();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3、 通过 IO 流读取</span></span><br><span class="line">            is = accept.getInputStream();</span><br><span class="line"></span><br><span class="line">            baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[ <span class="number">1024</span> ];</span><br><span class="line">            <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> ( ( len = is.read( bytes ) ) != -<span class="number">1</span> )&#123;</span><br><span class="line">                baos.write( bytes,<span class="number">0</span>, len );</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println( baos.toString() );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 关闭需要断开链接的变量</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (baos != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    baos.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (is != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    is.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (accept != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    accept.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (serverSocket != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    serverSocket.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="通过-TCP-协议实现文件传递"><a href="#通过-TCP-协议实现文件传递" class="headerlink" title="通过 TCP 协议实现文件传递"></a>通过 TCP 协议实现文件传递</h5><p>​        由于传递的过程和 利用TCP协议完成信息沟通的代码 的过程相似，则不再对过程进行解释。直接上代码：</p>
<p>​        服务端代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JavaNetworkProgramming.TCPProject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TcpFileTransferServer</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 测试 Java 网络编程中 使用Tcp协议来传输文件</span></span><br><span class="line">    <span class="comment">// 服务端</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">null</span>;</span><br><span class="line">        Socket socket = <span class="keyword">null</span>;</span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1、 获取服务器地址</span></span><br><span class="line">            serverSocket = <span class="keyword">new</span> ServerSocket( <span class="number">9684</span> );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2、 监听</span></span><br><span class="line">            socket = serverSocket.accept();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3、 使用 IO 流</span></span><br><span class="line">            is = socket.getInputStream();</span><br><span class="line">            fos = <span class="keyword">new</span> FileOutputStream( <span class="keyword">new</span> File( <span class="string">&quot;C:\\Users\\Arsh\\Desktop\\JavaTest\\NiAn.jpg&quot;</span> ) );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[ <span class="number">1024</span> ];</span><br><span class="line">            <span class="keyword">while</span> ( ( len =  is.read( buffer ) ) != -<span class="number">1</span> )&#123;</span><br><span class="line">                fos.write( buffer, <span class="number">0</span>, len );</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (fos != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    fos.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (is != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    is.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (socket != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    socket.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (serverSocket != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    serverSocket.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>​        客户端代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JavaNetworkProgramming.TCPProject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TcpFileTransferClient</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 测试 Java 网络编程中 使用Tcp协议来传输文件</span></span><br><span class="line">    <span class="comment">// 客户端</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Socket socket = <span class="keyword">null</span>;</span><br><span class="line">        OutputStream os = <span class="keyword">null</span>;</span><br><span class="line">        FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 1、 需要服务器的地址，设定端口号</span></span><br><span class="line">            InetAddress inetAddress = InetAddress.getByName( <span class="string">&quot;127.0.0.1&quot;</span> );</span><br><span class="line">            <span class="keyword">int</span> port = <span class="number">9684</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2、 通过stocked链接</span></span><br><span class="line">            socket = <span class="keyword">new</span> Socket( inetAddress, port );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3、使用 IO 流</span></span><br><span class="line">            os = socket.getOutputStream();</span><br><span class="line">            fis = <span class="keyword">new</span> FileInputStream( <span class="keyword">new</span> File(<span class="string">&quot;C:\\Users\\Arsh\\Desktop\\JavaTest\\Lian_ArkNight.jpg&quot;</span>) );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[ <span class="number">1024</span> ];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> ( ( len = fis.read( buffer ) ) != -<span class="number">1</span> )&#123;</span><br><span class="line">                os.write( buffer, <span class="number">0</span>, len );</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (fis != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    fis.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (os != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    os.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (socket != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    socket.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="UDP的相关程序实现"><a href="#UDP的相关程序实现" class="headerlink" title="UDP的相关程序实现"></a>UDP的相关程序实现</h4><h5 id="通过-UDP-协议完成信息沟通"><a href="#通过-UDP-协议完成信息沟通" class="headerlink" title="通过 UDP 协议完成信息沟通"></a>通过 UDP 协议完成信息沟通</h5><p>​        由于 UDP 协议的特性，我们不再需要实现 接收端 和 发送端 之间链接，只需要像 发送端 明确发送的目标即可。</p>
<p>​        同时，由于上面的理由，接收端 和 发送端 的位置可以相互交换，因此我们没有使用 客户端 和 服务端 的称呼。下面解释发送和通信的过程。</p>
<p>​        首先通过 port 端口确定发送的目标，利用 DatagramSocket 类对象 的 send 方法即可发送。</p>
<p>​        由于 send 方法发送的其实是一个 DatagramPackage 类的对象。因此我们需要利用一个 byte 数组来传递数据，至于其中包含的数据从何而来，可以使用各种包装类来完成。</p>
<p>​        相对的，接收方法 receive 也需要一个 DatagramPackage 类的对象，我们需要利用一个 byte 数组来接收数据。下面提供代码：</p>
<p>​        发送端代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JavaNetworkProgramming.UDPProject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UDPSendDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        DatagramSocket socket = <span class="keyword">new</span> DatagramSocket( <span class="number">8998</span> );</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ( flag )&#123;</span><br><span class="line">            String sendData = bufferedReader.readLine();</span><br><span class="line">            <span class="keyword">byte</span>[] sendDataBytes = sendData.getBytes();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 目标端口 ： 本机 9880</span></span><br><span class="line">            DatagramPacket packet = <span class="keyword">new</span> DatagramPacket( sendDataBytes, <span class="number">0</span>, sendDataBytes.length, InetAddress.getByName( <span class="string">&quot;127.0.0.1&quot;</span> ), <span class="number">9880</span> );</span><br><span class="line"></span><br><span class="line">            socket.send( packet );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ( sendData.equalsIgnoreCase( <span class="string">&quot;bye&quot;</span> ) )&#123;</span><br><span class="line">                flag = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        socket.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>​        接收端代码： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JavaNetworkProgramming.UDPProject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UDPReceiveDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        DatagramSocket socket = <span class="keyword">new</span> DatagramSocket( <span class="number">9880</span> );</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ( flag )&#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 准备接收用的数组</span></span><br><span class="line">            <span class="keyword">byte</span>[] receive = <span class="keyword">new</span> <span class="keyword">byte</span>[ <span class="number">1024</span> ];</span><br><span class="line">            DatagramPacket packet = <span class="keyword">new</span> DatagramPacket( receive, <span class="number">0</span>, receive.length );</span><br><span class="line"></span><br><span class="line">            socket.receive( packet );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">byte</span>[] buffer = packet.getData();</span><br><span class="line">            <span class="comment">// 此处需要注意的时，如果使用 buffer.length ，会导致后面的 if 判断失效</span></span><br><span class="line">            <span class="comment">// 因为 buffer 数组的长度固定为 1024 ，导致如果接收为 bye 时字符长度 大于 比较用的字符串，比较失败，程序退出失败</span></span><br><span class="line">            String receiveData = <span class="keyword">new</span> String( buffer, <span class="number">0</span>, packet.getLength() );</span><br><span class="line"></span><br><span class="line">            System.out.println( receiveData );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ( receiveData.equalsIgnoreCase( <span class="string">&quot;bye&quot;</span> ) )&#123;</span><br><span class="line">                flag = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        socket.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="通过-UDP-协议实现信息交互"><a href="#通过-UDP-协议实现信息交互" class="headerlink" title="通过 UDP 协议实现信息交互"></a>通过 UDP 协议实现信息交互</h5><p>​        由于 UDP 的特性，我们可以使得两个端口相互通信，直到都像对象输入某个断开信息。那么对这个要求进行分析的话，我们可以得知，我们需要 循环 、一条用于发送信息的线程 和 一条用于接收信息的线程。</p>
<p>​        循环容易完成，只要将发送信息和接收信息的主体代码包括在 while 循环中即可，可以认为  判断当双方所发送的消息为 bye 时，就结束循环。</p>
<p>​        其次，我们需要使用多线程的技术。同时进行 发送信息 和 接收信息，由此，我们完成了需求分析，接下来，提供代码：</p>
<p>​        接收线程代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JavaNetworkProgramming.UDPCommunication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.SocketException;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收端线程</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UDPTalkReceive</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    DatagramSocket socket = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> myPort;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UDPTalkReceive</span><span class="params">( <span class="keyword">int</span> myPort )</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.myPort = myPort;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            socket = <span class="keyword">new</span> DatagramSocket( myPort );</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SocketException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> ( flag )&#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 准备用于接收数据的数据包</span></span><br><span class="line">                <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[ <span class="number">1024</span> ];</span><br><span class="line"></span><br><span class="line">                DatagramPacket packet = <span class="keyword">new</span> DatagramPacket( bytes, <span class="number">0</span>, bytes.length );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                socket.receive( packet );</span><br><span class="line"></span><br><span class="line">                <span class="keyword">byte</span>[] receiveDataBytes = packet.getData();</span><br><span class="line">                String receiveData = <span class="keyword">new</span> String( receiveDataBytes, <span class="number">0</span>, packet.getLength() );</span><br><span class="line"></span><br><span class="line">                System.out.println( <span class="string">&quot;来自端口号为 &quot;</span> + packet.getPort() + <span class="string">&quot; 的信息: &quot;</span> + receiveData );</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> ( receiveData.equalsIgnoreCase( <span class="string">&quot;bye&quot;</span> ) )&#123;</span><br><span class="line">                    flag = <span class="keyword">false</span>;</span><br><span class="line">                    System.out.println( <span class="string">&quot;接收端口&quot;</span> + myPort + <span class="string">&quot; 断开链接 &quot;</span> );</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            socket.close();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>​        发送线程代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JavaNetworkProgramming.UDPCommunication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.SocketException;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发送端线程</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UDPTalkSend</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    DatagramSocket socket = <span class="keyword">null</span>;</span><br><span class="line">    BufferedReader bufferedReader = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> myPort;</span><br><span class="line">    <span class="keyword">private</span> String toIP;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> toPort;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UDPTalkSend</span><span class="params">( <span class="keyword">int</span> myPort, String toIP, <span class="keyword">int</span> toPort  )</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.myPort = myPort;</span><br><span class="line">        <span class="keyword">this</span>.toIP = toIP;</span><br><span class="line">        <span class="keyword">this</span>.toPort = toPort;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            socket = <span class="keyword">new</span> DatagramSocket( <span class="keyword">this</span>.myPort );</span><br><span class="line">            bufferedReader = <span class="keyword">new</span> BufferedReader( <span class="keyword">new</span> InputStreamReader( System.in ) );</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SocketException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> ( flag )&#123;</span><br><span class="line"></span><br><span class="line">                String sendData = <span class="keyword">this</span>.bufferedReader.readLine();</span><br><span class="line">                <span class="keyword">byte</span>[] sendDataBytes = sendData.getBytes();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 准备数据包</span></span><br><span class="line">                DatagramPacket packet = <span class="keyword">new</span> DatagramPacket( sendDataBytes, <span class="number">0</span>, sendDataBytes.length, InetAddress.getByName( toIP ), toPort );</span><br><span class="line">                socket.send( packet );</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> ( sendData.equalsIgnoreCase( <span class="string">&quot;bye&quot;</span> ) )&#123;</span><br><span class="line">                    System.out.println( <span class="string">&quot;发送端口&quot;</span> + myPort + <span class="string">&quot; 断开链接 &quot;</span> );</span><br><span class="line">                    flag = <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">            socket.close();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                bufferedReader.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>​        测试类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JavaNetworkProgramming.UDPCommunication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Communication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TalkOne</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread( <span class="keyword">new</span> UDPTalkReceive( <span class="number">9999</span> ) ).start();</span><br><span class="line">        <span class="keyword">new</span> Thread( <span class="keyword">new</span> UDPTalkSend( <span class="number">9987</span>, <span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">9832</span> ) ).start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TalkTwo</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread( <span class="keyword">new</span> UDPTalkReceive( <span class="number">9832</span> ) ).start();</span><br><span class="line">        <span class="keyword">new</span> Thread( <span class="keyword">new</span> UDPTalkSend( <span class="number">9788</span>, <span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">9999</span> ) ).start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/03/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%BA%BF%E7%A8%8B%E6%B1%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="神秘的世界">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/03/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%BA%BF%E7%A8%8B%E6%B1%A0/" class="post-title-link" itemprop="url">Java多线程学习笔记--线程池</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-12-03 22:21:12 / Modified: 22:32:45" itemprop="dateCreated datePublished" datetime="2021-12-03T22:21:12+08:00">2021-12-03</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="屁话"><a href="#屁话" class="headerlink" title="屁话"></a>屁话</h2><p>​        在此处浅显的讨论下 Java 多线程中，线程池的问题。</p>
<h2 id="线程池的概念"><a href="#线程池的概念" class="headerlink" title="线程池的概念"></a>线程池的概念</h2><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>​        线程池是一种多线程处理形式，处理过程中将任务添加到队列，然后在创建线程后自动启动这些任务。线程池线程都是后台线程。每个线程都使用默认的<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%A0%86%E6%A0%88/1682032">堆栈</a>大小，以默认的优先级运行，并处于多线程单元中。</p>
<p>​        如果某个线程在<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%89%98%E7%AE%A1%E4%BB%A3%E7%A0%81/2886980">托管代码</a>中空闲（如正在等待某个事件）,则线程池将插入另一个<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E8%BE%85%E5%8A%A9%E7%BA%BF%E7%A8%8B/4746601">辅助线程</a>来使所有处理器保持繁忙。</p>
<p>​        如果所有线程池线程都始终保持繁忙，但队列中包含挂起的工作，则线程池将在一段时间后创建另一个辅助线程但线程的数目永远不会超过最大值。</p>
<p>​        超过最大值的线程可以排队，但他们要等到其他线程完成后才启动。</p>
<h4 id="使用线程池的好处"><a href="#使用线程池的好处" class="headerlink" title="使用线程池的好处"></a>使用线程池的好处</h4><p>​        通过提前创建好多个线程，放入池中，使用时直接获取，使用完放回池中。</p>
<p>​        使用线程池的好处：</p>
<ul>
<li>提高响应速度</li>
<li>便于管理线程</li>
<li>降低资源消耗</li>
</ul>
<h4 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h4><p>​        此处以实现了 Runnable 接口的实现类为例子来测试线程池的运行：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试线程池</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestPool</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1、新建线程池</span></span><br><span class="line">        <span class="comment">// newFixedThreadPool 方法中的参数为 线程池的大小</span></span><br><span class="line">        ExecutorService service = Executors.newFixedThreadPool( <span class="number">10</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、运行实现了 Runnable 接口的线程实现类</span></span><br><span class="line">        service.execute( <span class="keyword">new</span> MyThread() );</span><br><span class="line">        service.execute( <span class="keyword">new</span> MyThread() );</span><br><span class="line">        service.execute( <span class="keyword">new</span> MyThread() );</span><br><span class="line">        service.execute( <span class="keyword">new</span> MyThread() );</span><br><span class="line">        service.execute( <span class="keyword">new</span> MyThread() );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3、结束服务</span></span><br><span class="line">        service.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 首先实现一个 Runnable 接口的实现类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println( Thread.currentThread().getName() );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        其实在 <a target="_blank" rel="noopener" href="https://evearsh.github.io/2021/11/26/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0One/">Java的学习笔记–线程的创建</a> 中关于 Callable 接口部分的内容中就提到过线程池的用途，Callable 接口的实现也需要借助线程池的帮助。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/02/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%B6%88%E8%B4%B9%E8%80%85%E5%92%8C%E7%94%9F%E4%BA%A7%E8%80%85%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="神秘的世界">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/02/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%B6%88%E8%B4%B9%E8%80%85%E5%92%8C%E7%94%9F%E4%BA%A7%E8%80%85%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">Java多线程的学习笔记--消费者和生产者问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-02 19:16:43" itemprop="dateCreated datePublished" datetime="2021-12-02T19:16:43+08:00">2021-12-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-13 22:24:11" itemprop="dateModified" datetime="2022-07-13T22:24:11+08:00">2022-07-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="屁话"><a href="#屁话" class="headerlink" title="屁话"></a>屁话</h2><p>​        这一篇文章主要探讨 Java 多线程学习中比较重要的一个问题：消费者和生产者模式。 这个并不是 23 种设计模式之一，但是属于 Java 多线程中不可绕开的一个问题。</p>
<h2 id="生产者和消费者问题叙述"><a href="#生产者和消费者问题叙述" class="headerlink" title="生产者和消费者问题叙述"></a>生产者和消费者问题叙述</h2><p>​        生产者消费者问题（ Producer-consumer problem），也称有限缓冲问题（ Bounded-buffer problem ），是一个多线程 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%90%8C%E6%AD%A5">同步</a> 问题的经典案例。</p>
<p>​        该问题描述了两个共享固定大小 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%BC%93%E5%86%B2%E5%8C%BA/4830555">缓冲区</a> 的 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%BA%BF%E7%A8%8B/103101">线程</a> ——即所谓的“生产者”和“消费者”——在实际运行时会发生的问题。生产者的主要作用是生成一定量的数据放到缓冲区中，然后重复此过程。与此同时，消费者也在缓冲区消耗这些数据。</p>
<p>​        该问题的关键就是要保证生产者不会在缓冲区满时加入数据，消费者也不会在缓冲区中空时 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%B6%88%E8%80%97/6755144">消耗</a> 数据。</p>
<p>​        针对该问题的处理方法主要有两种 ： 管程法 和 信号灯法</p>
<h2 id="问题处理"><a href="#问题处理" class="headerlink" title="问题处理"></a>问题处理</h2><p>​        这里就使用上文中提到的两种方法 管程法 和 信号灯法</p>
<h4 id="管程法"><a href="#管程法" class="headerlink" title="管程法"></a>管程法</h4><p>​        先上代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread.ThreadCommunication;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试使用 管程法 来实现 消费者和生产者 的情景问题</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumersAndProducers_Monitor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        WareHouse wareHouse = <span class="keyword">new</span> WareHouse(); <span class="comment">// 新建一个仓库</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Consumers( wareHouse ).start();</span><br><span class="line">        <span class="keyword">new</span> Producers( wareHouse ).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 我们需要 消费者，生产者, 作为仓库的缓冲区，产品</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 产品</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span></span>&#123;</span><br><span class="line">    String id; <span class="comment">// 产品编号</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Product</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 消费者</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumers</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    WareHouse wareHouse = <span class="keyword">new</span> WareHouse();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Consumers</span><span class="params">( WareHouse wareHouse )</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.wareHouse = wareHouse;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 消费 100 件产品</span></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++ ) &#123;</span><br><span class="line">            wareHouse.consumeProduct();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">500</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生产者</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producers</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    WareHouse wareHouse = <span class="keyword">new</span> WareHouse();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Producers</span><span class="params">( WareHouse wareHouse )</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.wareHouse = wareHouse;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 生产 100 件产品</span></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++ ) &#123;</span><br><span class="line">            wareHouse.depositProduct( <span class="keyword">new</span> Product( String.valueOf( i ) ) );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">500</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 仓库</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WareHouse</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> Size = <span class="number">10</span>; <span class="comment">// 仓库的最大容量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> Count = <span class="number">0</span>; <span class="comment">// 仓库中当前的产品数量</span></span><br><span class="line">    <span class="keyword">private</span> Product[] ProductWareHouse = <span class="keyword">new</span> Product[ Size ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生产者生产产品</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">depositProduct</span><span class="params">( Product product )</span></span>&#123;</span><br><span class="line">        <span class="comment">// 判断：此时仓库中是否还有剩余可以放入产品的空间</span></span><br><span class="line">        <span class="keyword">if</span> ( Count == Size )&#123;</span><br><span class="line">            <span class="comment">// 此时仓库已满，生产者停止生产，通知消费者消费</span></span><br><span class="line">            System.out.println( <span class="string">&quot;==================================仓库已满==================================&quot;</span> );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 此时仓库未满，生产者可以继续生产</span></span><br><span class="line">        ProductWareHouse[ Count ] = product;</span><br><span class="line">        Count = Count + <span class="number">1</span>;</span><br><span class="line">        System.out.println( <span class="string">&quot;生产者生产了编号为：&quot;</span> + product.id + <span class="string">&quot; 的产品&quot;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 消费者消费产品</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">consumeProduct</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 判断：此时仓库中是否还有产品</span></span><br><span class="line">        <span class="keyword">if</span> ( Count == <span class="number">0</span> )&#123;</span><br><span class="line">            <span class="comment">// 此时仓库已空，没有产品可以被消费，消费者等待，通知生产者生产</span></span><br><span class="line">            System.out.println( <span class="string">&quot;==================================仓库已空==================================&quot;</span> );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 此时仓库中还有可以被消费的产品，消费者可以继续消费</span></span><br><span class="line">        Count = Count - <span class="number">1</span>;</span><br><span class="line">        Product product = ProductWareHouse[ Count ];</span><br><span class="line">        System.out.println( <span class="string">&quot;消费者消费了编号为：&quot;</span> + product.id + <span class="string">&quot; 的产品&quot;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        解析：</p>
<p>​        首先，管程法的核心思想就是利用一个 仓库 来作为 生产者 和 消费者 之间的 中转站。生产者 所生产的产品并不直接交给 消费者，而是全部存入作为中转站的 仓库 中； 相对的，消费者 并不直接从 生产者 处获取产品，而是从作为中转站的 仓库 中提取。</p>
<p>​        如果 生产者 在生产产品时检测到作为中转站的 仓库 中的产品已经到达存放的上限，那么就让 生产者 停止生产，同时通知消费者可以消费； 如果 仓库 没有到达上限，则继续进行生产。</p>
<p>​        代码实现如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">depositProduct</span><span class="params">( Product product )</span></span>&#123;</span><br><span class="line">       <span class="comment">// 判断：此时仓库中是否还有剩余可以放入产品的空间</span></span><br><span class="line">       <span class="keyword">if</span> ( Count == Size )&#123;</span><br><span class="line">           <span class="comment">// 此时仓库已满，生产者停止生产，通知消费者消费</span></span><br><span class="line">           System.out.println( <span class="string">&quot;仓库已满&quot;</span> );</span><br><span class="line"></span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               <span class="keyword">this</span>.wait();</span><br><span class="line">           &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 此时仓库未满，生产者可以继续生产</span></span><br><span class="line">       ProductWareHouse[ Count ] = product;</span><br><span class="line">       Count = Count + <span class="number">1</span>;</span><br><span class="line">       System.out.println( <span class="string">&quot;生产者生产了编号为：&quot;</span> + product.id + <span class="string">&quot; 的产品&quot;</span> );</span><br><span class="line"></span><br><span class="line">       <span class="keyword">this</span>.notifyAll();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>​        </p>
<p>​        相对的，如果 消费者 在消费产品时发现作为中转站的 仓库 并没有产品，那么就让 消费者 停止消费， 同时通知 生产者 可以生产； 如果 仓库 存在产品，则继续消费。</p>
<p>​        代码实现如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">consumeProduct</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="comment">// 判断：此时仓库中是否还有产品</span></span><br><span class="line">       <span class="keyword">if</span> ( Count == <span class="number">0</span> )&#123;</span><br><span class="line">           <span class="comment">// 此时仓库已空，没有产品可以被消费，消费者等待，通知生产者生产</span></span><br><span class="line">           System.out.println( <span class="string">&quot;仓库已空&quot;</span> );</span><br><span class="line"></span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               <span class="keyword">this</span>.wait();</span><br><span class="line">           &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 此时仓库中还有可以被消费的产品，消费者可以继续消费</span></span><br><span class="line">       Count = Count - <span class="number">1</span>;</span><br><span class="line">       Product product = ProductWareHouse[ Count ];</span><br><span class="line">       System.out.println( <span class="string">&quot;消费者消费了编号为：&quot;</span> + product.id + <span class="string">&quot; 的产品&quot;</span> );</span><br><span class="line"></span><br><span class="line">       <span class="keyword">this</span>.notifyAll();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>​        </p>
<p>​        综上所述，管程法的核心思想十分精简，使用 仓库 作为中转站，控制 消费者 和 生产者 的行动。如果 仓库 的状态有变 ( 仓库已满 或者 仓库已空 ) 就立刻使 消费者 或 生产者 的状态发生改变。</p>
<h4 id="信号灯法"><a href="#信号灯法" class="headerlink" title="信号灯法"></a>信号灯法</h4><p>​        先上代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread.ThreadCommunication;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试使用信号灯法来解决消费者和生产者的问题</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerAndConsumer_Semaphore</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Products products = <span class="keyword">new</span> Products();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread( <span class="keyword">new</span> Producer( products ) ).start();</span><br><span class="line">        <span class="keyword">new</span> Thread( <span class="keyword">new</span> Consumer( products ) ).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生产者</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Products products = <span class="keyword">new</span> Products();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Producer</span><span class="params">( Products products )</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.products = products;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ ) &#123;</span><br><span class="line">            products.producer( String.valueOf( i ) );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">1000</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 消费者</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Products products = <span class="keyword">new</span> Products();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Consumer</span><span class="params">( Products products )</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.products = products;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ ) &#123;</span><br><span class="line">            products.consumer( String.valueOf( i ) );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">1000</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 产品</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Products</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>; <span class="comment">// 用来判断 生产者是否生产 true 或者 消费者是否消费 false 的标志；</span></span><br><span class="line">    <span class="keyword">private</span> String productsId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  生产者的生产方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">producer</span><span class="params">( String productsId )</span></span>&#123;</span><br><span class="line">        <span class="comment">// 如果 flag 为真，生产者开始生产，消费者等待; 否则 生产者等待，消费者消费</span></span><br><span class="line">        <span class="keyword">if</span> ( !flag )&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot; 消费了编号为 ： &quot;</span> + productsId + <span class="string">&quot; 的产品&quot;</span>);</span><br><span class="line">        <span class="keyword">this</span>.flag = ! <span class="keyword">this</span>.flag;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.notifyAll();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 消费者的消费方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">consumer</span><span class="params">( String productsId )</span></span>&#123;</span><br><span class="line">        <span class="comment">// 如果 flag 为假， 消费者开始消费，生产者生产，否则 消费者等待，生产者生产</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( flag )&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot; 消费了编号为 ： &quot;</span> + productsId + <span class="string">&quot; 的产品&quot;</span>);</span><br><span class="line">        <span class="keyword">this</span>.flag = ! <span class="keyword">this</span>.flag;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        解析：</p>
<p>​        信号灯法 的基本思想和 管程法 基本相似，不相同的是，信号灯法 是使用一个标志位 flag 来控制 生产者 和 消费者 的状态。一般而言是使用一个 boolean 型变量来控制是否进行 生产 或 消费。</p>
<p>​        同时要提前说明的一点是，如果使用 信号灯法 来控制 生产者 和 消费者，那么就会出现一个问题：消费者消费产品 和 生产者生产产品 是同步进行的，即使将二者使用延时代码来拉开 消费 和 生产 的速度。</p>
<p>​        也就是说，生产者生产的产品 是会被 消费者即时消费 ，并且只有在 消费者消费完当前的产品后，生产者才会继续生产新的产品。</p>
<p>​        回到对代码的分析，首先设置一个 boolean 型的变量 flag 作为 “ 信号灯 ”。</p>
<p>​        当 flag 的值为 真 时，我们认为此时 生产者需要生产产品，同时通知消费者消费此产品，并将 flag 的值修改为 相反值 ，以便消费者执行代码。否则就等待，直到 消费者 消费完产品。代码实现如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  生产者的生产方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">producer</span><span class="params">( String productsId )</span></span>&#123;</span><br><span class="line">    <span class="comment">// 如果 flag 为真，生产者开始生产，消费者等待; 否则 生产者等待，消费者消费</span></span><br><span class="line">    <span class="keyword">if</span> ( !flag )&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.wait();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot; 消费了编号为 ： &quot;</span> + productsId + <span class="string">&quot; 的产品&quot;</span>);</span><br><span class="line">    <span class="keyword">this</span>.flag = ! <span class="keyword">this</span>.flag;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.notifyAll();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p>​        同理，当 flag 的值为 假 时，我们认为此时消费者应该去消费产品，同时通知生产者生产新的产品，并将 flag 的值修改为相反值，以便生产者执行代码。否则就等待，直到 生产者 生产新的产品。代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 消费者的消费方法</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">consumer</span><span class="params">( String productsId )</span></span>&#123;</span><br><span class="line">       <span class="comment">// 如果 flag 为假， 消费者开始消费，生产者生产，否则 消费者等待，生产者生产</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> ( flag )&#123;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               <span class="keyword">this</span>.wait();</span><br><span class="line">           &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       System.out.println(<span class="string">&quot; 消费了编号为 ： &quot;</span> + productsId + <span class="string">&quot; 的产品&quot;</span>);</span><br><span class="line">       <span class="keyword">this</span>.flag = ! <span class="keyword">this</span>.flag;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">this</span>.notifyAll();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<p>​        一般而言，通过 信号灯法 和 管程法 就可以处理大多数 消费者 和 生产者 的问题，其二者的区别也并不是很大。都是通过某样参数来间接或直接的控制 生产者 和 消费者 的线程状态，实其可以安全的同步运行。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/30/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0Three/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="神秘的世界">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/30/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0Three/" class="post-title-link" itemprop="url">Java多线程的学习笔记--线程优先级、守护线程、线程同步、锁</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-11-30 16:31:27" itemprop="dateCreated datePublished" datetime="2021-11-30T16:31:27+08:00">2021-11-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-13 20:03:37" itemprop="dateModified" datetime="2022-07-13T20:03:37+08:00">2022-07-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="屁话"><a href="#屁话" class="headerlink" title="屁话"></a>屁话</h2><p>​        这篇文章来记录在学习 Java多线程 的相关基础时的一部分想法。这次主要包含 <strong>线程优先级</strong>， <strong>守护线程</strong> ， <strong>线程同步</strong> 和 <strong>锁</strong> 4个部分的内容。</p>
<h2 id="线程优先级"><a href="#线程优先级" class="headerlink" title="线程优先级"></a>线程优先级</h2><p>​        线程优先级指 CPU 在运行过程中对某个线程的调用优先度。当然，线程是否被调用取决于 CPU 的心情，完全取决于 CPU。<br>​        因此，即使设置了 CPU 的优先级也可能出现优先级低的反而被优先级高的先调用，也就是出现资源倒置。<br>​        对于某一个线程而言，若不调用相关方法显示的进行设置，否则线程的优先级默认为中间值，也就是 5。前文中提到了可以用相关方法对线程优先级进行显示设置，在 Thread 类中拥有一个方法：setPriority( int Num ) 这个方法可以显示设置线程的优先级。与之对应的是另一个方法 getPriority(  ) 这个方法可以主动的返回线程的优先级。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Thread.currentThread().setPriority(<span class="keyword">int</span> Num);</span><br><span class="line">Thread.currentThread().getPriority(  );</span><br></pre></td></tr></table></figure>

<p>​        在线程中存在三个特别的常数：MAX_PRIORITY、MIN_PRIORITY、NORM_PRIORITY 这个三个常数分别代表 Java 线程中的三种优先级。即 最高优先级MAX_PRIORITY = 10，最低优先级MIN_PRIORITY = 1，默认优先级NORM_PRIORITY  = 5 。</p>
<p>​        一般情况下，如果在调用 setPriority 函数时，传入了 <strong>大于10</strong> 或者 <strong>小于1</strong> 的参数，将会导致异常发生。</p>
<p>​        另外，如果要人为的改变线程的优先级，需要对线程先设置后启动。在线程执行启动后，优先级更高的线程更有可能得到 CPU 的资源，因此虽然线程的调用完全取决于 CPU 但线程优先级还是有一定作用的。</p>
<p>​        </p>
<h2 id="守护线程"><a href="#守护线程" class="headerlink" title="守护线程"></a>守护线程</h2><p>​        在 Java 中运行的线程可以分为两种 ：User Thread用户线程 和 Daemon Thread守护线程。</p>
<p>​        举一个比较经典的例子：每次程序运行时的 main 方法就是一个标准的用户线程，而每次在程序运行时在 Java 虚拟机中默默工作的 gc 垃圾回收线程 就是一个经典的守护线程。</p>
<p>​        </p>
<p>​        守护线程和用户线程区别在于，用户线程在执行完线程中的内容后就会死亡，而守护线程并不会。守护线程只有当当前 JVM 中所有的正在运行和等待运行的用户线程全部结束后，守护线程才会自动结束。</p>
<p>​        JDK 自动的提供了一些守护线程，就像 Java 程序需要 main 方法才可以运行， JDK 提供的许多守护线程如 gc 垃圾回收线程都是自动运行，无需调用且在进程完全结束后停止的。</p>
<p>​        相对于 JDK 提供的线程，我们是可以自己手动设置守护线程的。设置守护线程需要一个包含在 Thread 类中的相关方法：setDaemon( true ) 这个方法，在这个方法中，传入的参数应该为 true 代表这个这个线程从此被设置为守护线程。</p>
<p>​        另外，如果一个守护线程是我们自己设定的，那么依然需要执行该线程的 start 方法，来启动这个线程。</p>
<p>​        下面给出一个自定义守护线程的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDaemon</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BigBrother bigBrother = <span class="keyword">new</span> BigBrother();</span><br><span class="line">        LittleKid littleKid = <span class="keyword">new</span> LittleKid();</span><br><span class="line"></span><br><span class="line">        Thread threadDaemon = <span class="keyword">new</span> Thread( bigBrother );</span><br><span class="line">        threadDaemon.setDaemon( <span class="keyword">true</span> );</span><br><span class="line">        threadDaemon.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread( littleKid ).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BigBrother</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> ( <span class="keyword">true</span> )&#123;</span><br><span class="line">            System.out.println( <span class="string">&quot; Big Brother Look You &quot;</span> );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">500</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LittleKid</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2000</span>; i++ ) &#123;</span><br><span class="line">            System.out.println( <span class="string">&quot; I Love Big Brother Everyday Forever &quot;</span> );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        在上方的代码执行后，可以从结果中看见，守护线程和用户线程是一起运行的，直到用户现场执行完毕，守护线程才进入线程死亡的流程。由于线程死亡是需要一定的时间的，因此才不是当用户线程结束后当场暴毙。当然，理论上用户线程死亡的同时守护线程就会同时死亡。</p>
<h2 id="线程同步"><a href="#线程同步" class="headerlink" title="线程同步"></a>线程同步</h2><h4 id="三大不安全案例"><a href="#三大不安全案例" class="headerlink" title="三大不安全案例"></a>三大不安全案例</h4><p>​        未进行同步的线程是相当不安全的，比如多个线程同时操作同一个资源。此时就有极大概率发生线程不安全，下面可以提供三个比较经典的例子：</p>
<ul>
<li>多人同时抢票</li>
<li>银行同时取钱</li>
<li>list 线程不安全</li>
</ul>
<p>​        我们对这三个例子一个一个进行实现，分析她们不安全的原因。</p>
<h6 id="多人同时抢票"><a href="#多人同时抢票" class="headerlink" title="多人同时抢票"></a>多人同时抢票</h6><p>​        首先按照对这个情景进行实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread.SYN;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不安全的买票 线程不安全，存在负数</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UnsafeBuyStack</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BuyStack buyStack = <span class="keyword">new</span> BuyStack();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread( buyStack, <span class="string">&quot;Jojo&quot;</span> ).start();</span><br><span class="line">        <span class="keyword">new</span> Thread( buyStack, <span class="string">&quot;Dio&quot;</span> ).start();</span><br><span class="line">        <span class="keyword">new</span> Thread( buyStack, <span class="string">&quot;Putsch&quot;</span> ).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuyStack</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> Stack = <span class="number">10</span>; <span class="comment">// 总票数</span></span><br><span class="line">    <span class="keyword">boolean</span> flag = <span class="keyword">true</span>; <span class="comment">// 用于停止线程的标志位</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 买票用线程</span></span><br><span class="line">        <span class="keyword">while</span> ( flag ) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">1000</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            buy();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( Stack &lt;= <span class="number">0</span> ) &#123;</span><br><span class="line">            flag = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println( Thread.currentThread().getName() + <span class="string">&quot; get for the &quot;</span> + Stack + <span class="string">&quot; package &quot;</span> );</span><br><span class="line">        Stack = Stack - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        将上面的程序执行后，可以发现两个十分严重的问题：</p>
<ul>
<li><p>三个人同时拿到了同一张票，出现了资源的争夺</p>
</li>
<li><p>拿票时，有人在拿票时拿到了 -1 ，-2张票，这显然是不可能的</p>
<p>​    分析：</p>
<ul>
<li>三条线程同时执行，对一项公共资源进行操作。在执行时，对于三条线程而言，在对公共资源进行操作时，票的数量都是一样的。假设还有 10 张票，那么三条线程会同时对第 10 张票进行操作。那么这三条线程拿到的就是同一张票，而这是不被允许的。</li>
<li>根据上面的分析可以得出，当只有最后 1 张票后，三条线程依旧会同时对这唯一的一张票进行操作，但此时剩余的资源已经不再可以满足三条线程的需要，因此会出现负数。</li>
</ul>
</li>
</ul>
<h6 id="银行同时取钱"><a href="#银行同时取钱" class="headerlink" title="银行同时取钱"></a>银行同时取钱</h6><p>​        首先对这个情景进行实现：    </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread.SYN;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UnsafeBank</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account( <span class="number">1000</span>, <span class="string">&quot;Fuck you Money&quot;</span> );</span><br><span class="line"></span><br><span class="line">        Bank bankOnw = <span class="keyword">new</span> Bank( account, <span class="number">600</span>, <span class="string">&quot;Dio&quot;</span> );</span><br><span class="line">        Bank bankTwo = <span class="keyword">new</span> Bank( account, <span class="number">600</span>, <span class="string">&quot;Jojo&quot;</span> );</span><br><span class="line"></span><br><span class="line">        bankOnw.start();</span><br><span class="line">        Thread.yield();</span><br><span class="line">        bankTwo.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 账户</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Account</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> money;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Account</span><span class="params">(<span class="keyword">int</span> money, String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.money = money;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMoney</span><span class="params">(<span class="keyword">int</span> money)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.money = money;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 银行</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bank</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Account account;</span><br><span class="line">    <span class="keyword">int</span> drawMoney;</span><br><span class="line">    <span class="keyword">int</span> nowMoney;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Bank</span><span class="params">(  Account account, <span class="keyword">int</span> drawMoney, String Name )</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>( Name );</span><br><span class="line">        <span class="keyword">this</span>.account = account;</span><br><span class="line">        <span class="keyword">this</span>.drawMoney = drawMoney;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Override</span></span><br><span class="line"><span class="comment">//    public void run() &#123;</span></span><br><span class="line"><span class="comment">//        // 此处模拟延时</span></span><br><span class="line"><span class="comment">//        try &#123;</span></span><br><span class="line"><span class="comment">//            Thread.sleep( 1000 );</span></span><br><span class="line"><span class="comment">//        &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">//            e.printStackTrace();</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        if ( account.getMoney() - drawMoney &lt; 0 )&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println( Thread.currentThread().getName() + &quot; Unable to withdraw &quot; );</span></span><br><span class="line"><span class="comment">//            return;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        account.setMoney( account.getMoney() - drawMoney );</span></span><br><span class="line"><span class="comment">//        nowMoney = drawMoney + nowMoney;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        System.out.println( account.getId() + &quot; have -&gt; &quot; + account.getMoney() );</span></span><br><span class="line"><span class="comment">//        System.out.println( Thread.currentThread().getName() + &quot; have -&gt;&gt;&gt;&gt; &quot; + nowMoney );</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep( <span class="number">500</span> );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( account.getMoney() - drawMoney &lt; <span class="number">0</span> )&#123;</span><br><span class="line">            System.out.println( Thread.currentThread().getName() + <span class="string">&quot; Unable to withdraw &quot;</span> );</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        account.setMoney( account.getMoney() - drawMoney );</span><br><span class="line">        nowMoney = drawMoney + nowMoney;</span><br><span class="line"></span><br><span class="line">        System.out.println( account.getId() + <span class="string">&quot; have -&gt; &quot;</span> + account.getMoney() );</span><br><span class="line">        System.out.println( Thread.currentThread().getName() + <span class="string">&quot; have -&gt;&gt;&gt;&gt; &quot;</span> + nowMoney );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        对上面的代码进行运行后，会发现程序出现了几个严重的问题：</p>
<ul>
<li><p>两条线程同时从银行中提取现金，提取的总金额大于账户中的总金额</p>
</li>
<li><p>两条线程在上一例的情况下依旧可以从银行中执行提取金额的指令，导致银行中的账户出现了负数    </p>
<p>分析： </p>
<ul>
<li>基本原因和上一个场景相同，由于两条线程同时对一个共有的对象进行操作，导致资源同时被访问，从而出现了负数和取出的金额量大于总数的情况。</li>
</ul>
</li>
</ul>
<h6 id="list-线程不安全"><a href="#list-线程不安全" class="headerlink" title="list 线程不安全"></a>list 线程不安全</h6><p>​        首先对这个情景进行实现：    </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread.SYN;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 线程不安全的集合</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UnsafeList</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt; String &gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 要注意的是 synchronized 应该在包含在 run 表达式中，否则起不到锁定的作用</span></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++ ) &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread( () -&gt; &#123;</span><br><span class="line">                list.add( Thread.currentThread().getName() );</span><br><span class="line">            &#125; ).start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 此处需要延时操作，否则主线程会提前结束 从而导致 线程结束，引发错误</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep( <span class="number">1000</span> );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println( list.size() );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        对上面的代码执行后，会发现一个十分重要的问题：</p>
<ul>
<li><p>按照程序的目标，我们希望在程序结束后所定义的 ArrayList 拥有 10000 个元素。但实际上运行结束后，无论如何 ArrayList 中的元素并不足 10000 项。</p>
<p>分析：</p>
<ul>
<li>在有足够的时间给线程运行的情况下，依旧会出现线程不安全的情况。这是由于 ArrayList 本身就是一个对于同步线程不安全的泛型，每次循环中都会开启一次线程，在这个过程中就会出现重复线程，从而相互覆盖导致元素数量不足。</li>
</ul>
</li>
</ul>
<p>​        此外要说明的是，即使通过 同步块、CopyOnWriteArrayList 或者 Lock 对资源进行上锁完成同步，如果不再 main 方法中设置延时，那么最后的结果依旧不安全。这是因为 main 主线程的执行速度过快从而导致已经安全的同步线程未完全执行。</p>
<h4 id="同步块-以及-同步方法"><a href="#同步块-以及-同步方法" class="headerlink" title="同步块 以及 同步方法"></a>同步块 以及 同步方法</h4><p>​        可以看出上方不同步的方法会导致线程和资源的不安全，因此我们需要使用某种方法使得这些不安全的方法达到同步。Java 的锁机制由此而出，锁的原理在下一部分再来讨论。</p>
<p>​        总而言之，使用 synchronized 关键字方法 或者 synchronized 代码块 来完成对公共资源的锁定，从而保证线程的安全。下面将三大不安全案例使用 synchronized 案例进行改写，从而使得她们达到同步安全：</p>
<h6 id="多人同时抢票–同步"><a href="#多人同时抢票–同步" class="headerlink" title="多人同时抢票–同步"></a>多人同时抢票–同步</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread.SYN;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不安全的买票 线程不安全，存在负数</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UnsafeBuyStack</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BuyStack buyStack = <span class="keyword">new</span> BuyStack();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread( buyStack, <span class="string">&quot;Jojo&quot;</span> ).start();</span><br><span class="line">        <span class="keyword">new</span> Thread( buyStack, <span class="string">&quot;Dio&quot;</span> ).start();</span><br><span class="line">        <span class="keyword">new</span> Thread( buyStack, <span class="string">&quot;Putsch&quot;</span> ).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuyStack</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> Stack = <span class="number">10</span>; <span class="comment">// 总票数</span></span><br><span class="line">    <span class="keyword">boolean</span> flag = <span class="keyword">true</span>; <span class="comment">// 用于停止线程的标志位</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 买票用线程</span></span><br><span class="line">        <span class="keyword">while</span> ( flag ) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">1000</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            buy();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( Stack &lt;= <span class="number">0</span> ) &#123;</span><br><span class="line">            flag = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println( Thread.currentThread().getName() + <span class="string">&quot; get for the &quot;</span> + Stack + <span class="string">&quot; package &quot;</span> );</span><br><span class="line">        Stack = Stack - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        改写操作：</p>
<p>​        分析代码可得，每个线程对于公共资源的操作都是借助于 BuyStack 类中的 buy 方法进行操作，由此为了使得方法变得同步，我们将 buy 方法变为 同步方法，也就是在返回值类型前加上 synchronized。</p>
<h6 id="银行同时取钱–同步"><a href="#银行同时取钱–同步" class="headerlink" title="银行同时取钱–同步"></a>银行同时取钱–同步</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">package</span> TestThread.SYN;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UnsafeBank</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account( <span class="number">1000</span>, <span class="string">&quot;Fuck you Money&quot;</span> );</span><br><span class="line"></span><br><span class="line">        Bank bankOnw = <span class="keyword">new</span> Bank( account, <span class="number">600</span>, <span class="string">&quot;Dio&quot;</span> );</span><br><span class="line">        Bank bankTwo = <span class="keyword">new</span> Bank( account, <span class="number">600</span>, <span class="string">&quot;Jojo&quot;</span> );</span><br><span class="line"></span><br><span class="line">        bankOnw.start();</span><br><span class="line">        Thread.yield();</span><br><span class="line">        bankTwo.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 账户</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Account</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> money;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Account</span><span class="params">(<span class="keyword">int</span> money, String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.money = money;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMoney</span><span class="params">(<span class="keyword">int</span> money)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.money = money;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 银行</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bank</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Account account;</span><br><span class="line">    <span class="keyword">int</span> drawMoney;</span><br><span class="line">    <span class="keyword">int</span> nowMoney;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Bank</span><span class="params">(  Account account, <span class="keyword">int</span> drawMoney, String Name )</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>( Name );</span><br><span class="line">        <span class="keyword">this</span>.account = account;</span><br><span class="line">        <span class="keyword">this</span>.drawMoney = drawMoney;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Override</span></span><br><span class="line"><span class="comment">//    public void run() &#123;</span></span><br><span class="line"><span class="comment">//        // 此处模拟延时</span></span><br><span class="line"><span class="comment">//        try &#123;</span></span><br><span class="line"><span class="comment">//            Thread.sleep( 1000 );</span></span><br><span class="line"><span class="comment">//        &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">//            e.printStackTrace();</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        if ( account.getMoney() - drawMoney &lt; 0 )&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println( Thread.currentThread().getName() + &quot; Unable to withdraw &quot; );</span></span><br><span class="line"><span class="comment">//            return;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        account.setMoney( account.getMoney() - drawMoney );</span></span><br><span class="line"><span class="comment">//        nowMoney = drawMoney + nowMoney;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        System.out.println( account.getId() + &quot; have -&gt; &quot; + account.getMoney() );</span></span><br><span class="line"><span class="comment">//        System.out.println( Thread.currentThread().getName() + &quot; have -&gt;&gt;&gt;&gt; &quot; + nowMoney );</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep( <span class="number">500</span> );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">synchronized</span> ( account )&#123;</span><br><span class="line">            <span class="keyword">if</span> ( account.getMoney() - drawMoney &lt; <span class="number">0</span> )&#123;</span><br><span class="line">                System.out.println( Thread.currentThread().getName() + <span class="string">&quot; Unable to withdraw &quot;</span> );</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            account.setMoney( account.getMoney() - drawMoney );</span><br><span class="line">            nowMoney = drawMoney + nowMoney;</span><br><span class="line"></span><br><span class="line">            System.out.println( account.getId() + <span class="string">&quot; have -&gt; &quot;</span> + account.getMoney() );</span><br><span class="line">            System.out.println( Thread.currentThread().getName() + <span class="string">&quot; have -&gt;&gt;&gt;&gt; &quot;</span> + nowMoney );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        改写操作：</p>
<p>​        通过对代码的分析，代码所操作的公共资源是银行账户 Account 类的一个唯一实例，那么即使将 run 方法变为同步方法依旧无法将这项公共资源锁定，也就是说，线程依旧是不安全的。</p>
<p>​        那么这时，我们就需要使用 synchronized 同步块来专门对 Account 类实例相关的代码进行锁定，那么 synchronized 代码块中需要填入的参数就是我们需要操纵的公共资源，在这项代码中就是 Account 类的实例对象。 </p>
<h6 id="list-线程不安全–同步"><a href="#list-线程不安全–同步" class="headerlink" title="list 线程不安全–同步"></a>list 线程不安全–同步</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread.SYN;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 线程不安全的集合</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UnsafeList</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt; String &gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 要注意的是 synchronized 应该在包含在 run 表达式中，否则起不到锁定的作用</span></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++ ) &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread( () -&gt; &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> ( list )&#123;</span><br><span class="line">                    list.add( Thread.currentThread().getName() );</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; ).start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 此处需要延时操作，否则主线程会提前结束 从而导致 线程结束，引发错误</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep( <span class="number">1000</span> );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println( list.size() );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        操作分析：</p>
<p>​        原本的线程不安全出自于每次循环时都会新建一个线程，从而导致某些线程重复，由此造成线程不安全。那么我们即使将 run 方法标记为 synchronized 同步方法也不会达到锁定资源的效果，因为操作的实例对象是 list ，位于方法外。</p>
<p>​        所以我们使用 synchronized 同步方法块，将针对 list 的操作，也就是将每条新建线程的名称作为元素存入到 list 中的这一步标记为同步方法块，从而完成对 list 的资源锁定 和 线程同步。</p>
<h4 id="CopyOnWriteArrayList"><a href="#CopyOnWriteArrayList" class="headerlink" title="CopyOnWriteArrayList"></a>CopyOnWriteArrayList</h4><p>​        这并不是一个十分重要的内容，CopyOnWriteArrayList 是一个属于 JUC 中的线程安全，可同步 链表 泛型。JUC 中的内容众多，这只是其中一点内容，这部分和 Callable 创建线程相同，可以只是了解。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CopyOnWriteArrayList;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试安全 list</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJUC</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CopyOnWriteArrayList&lt; String &gt; list = <span class="keyword">new</span> CopyOnWriteArrayList&lt; String &gt;();</span><br><span class="line">        ArrayList&lt; String &gt; listTest = <span class="keyword">new</span> ArrayList&lt; String &gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++ ) &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread( () -&gt; &#123;</span><br><span class="line">                list.add( Thread.currentThread().getName() );</span><br><span class="line">            &#125; ).start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep( <span class="number">1000</span> );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println( list.size() );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++ ) &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread( () -&gt; &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> ( listTest )&#123;</span><br><span class="line">                    listTest.add( Thread.currentThread().getName() );</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; ).start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep( <span class="number">1000</span> );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println( listTest.size() );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="锁"><a href="#锁" class="headerlink" title="锁"></a>锁</h2><h4 id="锁的基础"><a href="#锁的基础" class="headerlink" title="锁的基础"></a>锁的基础</h4><p>​        先来举一个形象的例子，假如现在有 20 个人一起上厕所，现在厕所只有一个，那么最正常的办法是什么？先排队，然后一个一个的上厕所，每有一个进入厕所就将厕所锁住，等到完事后，将锁打开，下一个人进入厕所解决需求。</p>
<p>​        那么多线程也是同样的道理，有 20 条线程共同抢夺一个公共资源，就如同 20 个人一起上厕所。但线程是不会自己排队的，如果不对线程进行干预，那么就会造成线程不安全。</p>
<p>​        此时，就会引入 锁 的概念。假设每一条线程都有一把锁，那么之前的问题就变得简单了。现在我们对每条线程的锁进行操作，每当一个线程执行方法时，一旦遇到需要对公共资源进行操作，就把这把锁交给公共资源并将其锁上，然后在操作结束后在将锁释放。</p>
<p>​        这样就不会再出现多条线程同时操作一个公共资源的情况了。</p>
<p>​        </p>
<p>​        这就如同上厕所的时候有了锁，每当一条线程开始操作公共资源，就如同上厕所的时候上了锁，这样别人就进不来，也就无法干扰了。</p>
<p>​        </p>
<p>​        那么为了实现 锁 的同步，我们就需要使用 synchronized 关键字来生产 同步方法 或者 同步块，不过在使用 synchronized 关键字时是有一些独特的要求的，否则无法实现对线程的同步和对公共资源的锁定：</p>
<ul>
<li>synchronized 锁定的必须是线程所操作的公共对象，视情况使用 synchronized 代码块 或者 synchronized 方法，如果锁定的对象错误就无法达成线程同步的目的</li>
<li>使用 synchronized 代码块时，需要传入一个对象参数，这个对象参数应该为需要锁定的唯一公共资源，例如在 “银行同时取钱” 的代码中就使用了 synchronized 代码块对 account 进行了锁定，而不是使用 synchronized 同步方法</li>
<li>尽可能的不要在 synchronized  方法 或者 synchronized 代码块中在使用 synchronized 关键字，这样有极大可能会造成<strong>死锁</strong></li>
</ul>
<h4 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h4><p>​        死锁，故名思意，就是完全绞死的锁。举个例子，假设现在有两个人，一个手里有纸要上厕所，另一个在厕所中但没有纸。我们将纸和厕所视作两个公共资源，这时她们都希望使用对方的资源( 厕所 或者 纸 )，这就会造成资源需求的交叉。</p>
<p>​        当然，人希望解决这种问题是十分简单的，但由于线程相当死板，她们会一直抱着自己的所拥有的资源并不断请求另一人所拥有的资源，造成线程的执行被迫停止。这便是死锁。</p>
<p>​        值得一提的是，死锁并不会导致程序结束，而是会一直僵持下去，其余被阻塞的线程也不会被 Cpu 调用运行，Cpu 会一直执着的执行这个已经僵持且无法得到解决的线程。</p>
<p>​        就像鞋带上的死结一般再也解不开，死锁也是如此。</p>
<p>​        造成死锁的四个必要条件：</p>
<ul>
<li>互斥：一个资源每次只能被一个进程使用</li>
<li>请求与保持：一个进程因为请求资源而被阻塞，并且对已经拥有的资源保持不放</li>
<li>不剥夺：进程已经获得的资源，在未使用完前，不能强行剥夺</li>
<li>循环等待：若干进程之间形成头尾相接的循环等待资源关系</li>
</ul>
<p>​        一旦以上的四个条件有一个或者多个不满足，死锁就会被解除。由于死锁的特性，在编写程序时，最好注意不要形成死锁。下面给出一个经典的死锁例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread.DeadLock;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试 死锁</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeadLock</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MackUp girlOne = <span class="keyword">new</span> MackUp( <span class="number">0</span>, <span class="string">&quot;Anna&quot;</span> );</span><br><span class="line">        MackUp girlTwo = <span class="keyword">new</span> MackUp( <span class="number">1</span>, <span class="string">&quot;Alice&quot;</span> );</span><br><span class="line"></span><br><span class="line">        girlOne.start();</span><br><span class="line">        girlTwo.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 口红</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lipstick</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 镜子</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mirror</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 化妆</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MackUp</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Lipstick lipstick = <span class="keyword">new</span> Lipstick();</span><br><span class="line">    <span class="keyword">static</span> Mirror mirror = <span class="keyword">new</span> Mirror();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> choice;</span><br><span class="line">    String Name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MackUp</span><span class="params">( <span class="keyword">int</span> choice, String Name )</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.choice = choice;</span><br><span class="line">        <span class="keyword">this</span>.Name = Name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mackUp();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    // 使用此方法时 由于双方都在等待对方的资源，形成死锁</span></span><br><span class="line"><span class="comment">//    public void mackUp()&#123;</span></span><br><span class="line"><span class="comment">//        if ( this.choice == 0 )&#123;</span></span><br><span class="line"><span class="comment">//            synchronized ( lipstick )&#123;</span></span><br><span class="line"><span class="comment">//                System.out.println( this.Name + &quot;-&gt; 获取到 lipstick 的锁&quot; );</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                try &#123;</span></span><br><span class="line"><span class="comment">//                    Thread.sleep( 1000 );</span></span><br><span class="line"><span class="comment">//                &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">//                    e.printStackTrace();</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                synchronized ( mirror )&#123;</span></span><br><span class="line"><span class="comment">//                    System.out.println( this.Name + &quot;-&gt; 获取到 mirror 的锁&quot; );</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;else &#123;</span></span><br><span class="line"><span class="comment">//            synchronized ( mirror )&#123;</span></span><br><span class="line"><span class="comment">//                System.out.println( this.Name + &quot;-&gt; 获取到 mirror 的锁&quot; );</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                try &#123;</span></span><br><span class="line"><span class="comment">//                    Thread.sleep( 2000 );</span></span><br><span class="line"><span class="comment">//                &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">//                    e.printStackTrace();</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                synchronized ( lipstick )&#123;</span></span><br><span class="line"><span class="comment">//                    System.out.println( this.Name + &quot;-&gt; 获取到 lipstick 的锁&quot; );</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mackUp</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( <span class="keyword">this</span>.choice == <span class="number">0</span> )&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> ( lipstick )&#123;</span><br><span class="line">                System.out.println( <span class="keyword">this</span>.Name + <span class="string">&quot; get the -&gt; lipstick lock &quot;</span> );</span><br><span class="line"></span><br><span class="line">                <span class="keyword">synchronized</span> ( mirror )&#123;</span><br><span class="line">                    System.out.println( <span class="keyword">this</span>.Name + <span class="string">&quot; get the -&gt; mirror lock &quot;</span> );</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">1000</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> ( mirror )&#123;</span><br><span class="line">                System.out.println( <span class="keyword">this</span>.Name + <span class="string">&quot; get the -&gt; mirror lock &quot;</span> );</span><br><span class="line"></span><br><span class="line">                <span class="keyword">synchronized</span> ( lipstick )&#123;</span><br><span class="line">                    System.out.println( <span class="keyword">this</span>.Name + <span class="string">&quot; get the -&gt; lipstick lock &quot;</span> );</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">2000</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        即使上面的 Mirror 类 和 Lipstick 类没有实现具体代码，但是依旧代表了两种所需资源。</p>
<p>​        在这种情况下，一个 synchronized 代码块下包含了另一个 synchronized 代码块，也就是说，执行完这一次线程需要对两个公有资源进行锁定，并且其中的一个公有资源被其他人所拥有。此时就满足了死锁的条件，形成死锁。</p>
<p>​        最重要的一点，死锁并不会释放线程的锁，因此她们会不断的僵持下去，直到电脑爆炸 或者 你人为结束程序。下面我们对上方的代码稍微进行改造，使其解除死锁：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread.DeadLock;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试 死锁</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeadLock</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MackUp girlOne = <span class="keyword">new</span> MackUp( <span class="number">0</span>, <span class="string">&quot;Anna&quot;</span> );</span><br><span class="line">        MackUp girlTwo = <span class="keyword">new</span> MackUp( <span class="number">1</span>, <span class="string">&quot;Alice&quot;</span> );</span><br><span class="line"></span><br><span class="line">        girlOne.start();</span><br><span class="line">        girlTwo.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 口红</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lipstick</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 镜子</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mirror</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 化妆</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MackUp</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Lipstick lipstick = <span class="keyword">new</span> Lipstick();</span><br><span class="line">    <span class="keyword">static</span> Mirror mirror = <span class="keyword">new</span> Mirror();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> choice;</span><br><span class="line">    String Name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MackUp</span><span class="params">( <span class="keyword">int</span> choice, String Name )</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.choice = choice;</span><br><span class="line">        <span class="keyword">this</span>.Name = Name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mackUp();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    // 使用此方法时 由于双方都在等待对方的资源，形成死锁</span></span><br><span class="line"><span class="comment">//    public void mackUp()&#123;</span></span><br><span class="line"><span class="comment">//        if ( this.choice == 0 )&#123;</span></span><br><span class="line"><span class="comment">//            synchronized ( lipstick )&#123;</span></span><br><span class="line"><span class="comment">//                System.out.println( this.Name + &quot;-&gt; 获取到 lipstick 的锁&quot; );</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                try &#123;</span></span><br><span class="line"><span class="comment">//                    Thread.sleep( 1000 );</span></span><br><span class="line"><span class="comment">//                &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">//                    e.printStackTrace();</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                synchronized ( mirror )&#123;</span></span><br><span class="line"><span class="comment">//                    System.out.println( this.Name + &quot;-&gt; 获取到 mirror 的锁&quot; );</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;else &#123;</span></span><br><span class="line"><span class="comment">//            synchronized ( mirror )&#123;</span></span><br><span class="line"><span class="comment">//                System.out.println( this.Name + &quot;-&gt; 获取到 mirror 的锁&quot; );</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                try &#123;</span></span><br><span class="line"><span class="comment">//                    Thread.sleep( 2000 );</span></span><br><span class="line"><span class="comment">//                &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">//                    e.printStackTrace();</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                synchronized ( lipstick )&#123;</span></span><br><span class="line"><span class="comment">//                    System.out.println( this.Name + &quot;-&gt; 获取到 lipstick 的锁&quot; );</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mackUp</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( <span class="keyword">this</span>.choice == <span class="number">0</span> )&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> ( lipstick )&#123;</span><br><span class="line">                System.out.println( <span class="keyword">this</span>.Name + <span class="string">&quot; get the -&gt; lipstick lock &quot;</span> );</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">1000</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">synchronized</span> ( mirror )&#123;</span><br><span class="line">                System.out.println( <span class="keyword">this</span>.Name + <span class="string">&quot; get the -&gt; mirror lock &quot;</span> );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> ( mirror )&#123;</span><br><span class="line">                System.out.println( <span class="keyword">this</span>.Name + <span class="string">&quot; get the -&gt; mirror lock &quot;</span> );</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">2000</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">synchronized</span> ( lipstick )&#123;</span><br><span class="line">                System.out.println( <span class="keyword">this</span>.Name + <span class="string">&quot; get the -&gt; lipstick lock &quot;</span> );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="Lock锁"><a href="#Lock锁" class="headerlink" title="Lock锁"></a>Lock锁</h4><p>​        Lock 是 Java5.0 后的一种可以显示定义的同步方法，Lock 通常以接口的方式被使用，其中 ReentrantLock 实现了 Lock 接口且较为常用。使用 ReentrantLock 可以通过显示定义来定义 Lock 锁，从而通过 Lock 类的实例对象来完成线程同步。</p>
<p>​        虽然 Lock 锁可以显示定义锁，从而达到线程同步的目的，但是日常中还是 synchronized 同步来完成线程同步，下面给出一个使用 Lock 类来完成线程同步的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread.SeniorLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试 Lock 锁</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSeniorLock</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BuyTickets buyTickets = <span class="keyword">new</span> BuyTickets();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread( buyTickets, <span class="string">&quot;Jojo&quot;</span> ).start();</span><br><span class="line">        <span class="keyword">new</span> Thread( buyTickets, <span class="string">&quot;Dio&quot;</span> ).start();</span><br><span class="line">        <span class="keyword">new</span> Thread( buyTickets, <span class="string">&quot;Anna&quot;</span> ).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuyTickets</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> Tickets = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> ( flag )&#123;</span><br><span class="line">            buy();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">500</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 加锁</span></span><br><span class="line">            lock.lock();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ( Tickets &lt;= <span class="number">0</span> )&#123;</span><br><span class="line">                <span class="keyword">this</span>.flag = <span class="keyword">false</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println( Thread.currentThread().getName() + <span class="string">&quot; gey the &quot;</span> + Tickets + <span class="string">&quot; tickets &quot;</span> );</span><br><span class="line">            Tickets = Tickets - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 解锁</span></span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        虽然，Lock 类拥有其他的神奇方法，但是一般而言只需要使用 上锁lock(  ) 和 解锁unlock(  ) 这两个方法即可。另外最好将 lock 方法放入 try 句块，而将 unlock 方法放入 finally 句块。</p>
<p>​        被 lock 方法 和 unlock 方法所包含的代码块就会被视为同步代码块。</p>
<h4 id="Lock锁-和-synchronized-的区别"><a href="#Lock锁-和-synchronized-的区别" class="headerlink" title="Lock锁 和 synchronized 的区别"></a>Lock锁 和 synchronized 的区别</h4><ul>
<li>Lock是显示锁（ 手动开启和关闭锁，别忘记关闭锁 ）synchronized 是隐式锁，出了作用域自动释放</li>
<li>Lock 只有代码块锁，synchronized 有代码块锁和方法锁</li>
<li>使用 Lock 锁，JVM 将花费较少的时间来调度线程，性能更好。并且具有更好的扩展性( 提供了更多的子类 )</li>
<li>优先使用顺序：<ul>
<li>Lock &gt; 同步代码块( 已经进入了方法体，分配了相对应的资源 ) &gt; 同步方法( 在方法体外 )</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/28/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0Two/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="神秘的世界">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/28/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0Two/" class="post-title-link" itemprop="url">Java多线程学习笔记--线程状态、静态代理、Lambda表达式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-11-28 15:45:23" itemprop="dateCreated datePublished" datetime="2021-11-28T15:45:23+08:00">2021-11-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-12-03 22:13:44" itemprop="dateModified" datetime="2021-12-03T22:13:44+08:00">2021-12-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="屁话"><a href="#屁话" class="headerlink" title="屁话"></a>屁话</h2><p>​        这篇文章来记录在学习 Java多线程 的相关基础时的一部分想法。这次主要包含 <strong>线程的五大状态</strong>， <strong>静态代理</strong> 和 <strong>Lambda表达式</strong> 三个部分的内容。</p>
<h2 id="线程的五大状态"><a href="#线程的五大状态" class="headerlink" title="线程的五大状态"></a>线程的五大状态</h2><h4 id="线程的状态转换图"><a href="#线程的状态转换图" class="headerlink" title="线程的状态转换图"></a>线程的状态转换图</h4><p>​        线程的五大状态的转换如下图：</p>
<p><img src="/2021/11/28/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0Two/1683887-20200228092557797-201409676.png"></p>
<p>​        线程创建：当执行 new thead() 时，线程就处于创建状态。</p>
<p>​        线程就绪：线程创建完成后，执行 start  方法，线程进入就绪状态。另外，当线程的阻塞状态解除 、 线程在运行状态中释放 Cpu</p>
<p>资源 或者 当前正在运行的线程执行 yeild 线程礼让，也会使得线程回到就绪状态。</p>
<p>​        线程阻塞：当线程在运行时等待用户输入、其他线程执行 join 线程强制执行 或者是 当前运行的线程被执行 sleep 方法进行线程休眠时，会使得线程进入 阻塞状态。</p>
<p>​        线程运行：当线程从就绪状态中获取Cpu资源时，线程就会进入运行状态。</p>
<p>​        线程死亡：当线程执行完毕、主线程执行完毕 或者 线程被强制结束时，线程进入死亡状态。值得一提的是，当线程死亡后，线程不可再被启动。</p>
<h4 id="线程的状态解析"><a href="#线程的状态解析" class="headerlink" title="线程的状态解析"></a>线程的状态解析</h4><p>​        线程的状态主要有五大状态。在使用一定的方法后，可以改变线程的状态。</p>
<h5 id="线程停止"><a href="#线程停止" class="headerlink" title="线程停止"></a>线程停止</h5><p>​        首先要说明的是，Thread类是有提供 线程停止 的方法的，例如 stop 方法 和 destroy 方法。但是这些方法及不推荐使用，最好不要使用。这些方法在 JDK 的官方文档中已经被废弃，存在出现错误的危险。</p>
<p>​        在更多的时候，为了使得线程停止，推荐使用标志位方法。下面提供一个利用标志位来停止线程的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试 stop</span></span><br><span class="line"><span class="comment">// 1、 建议线程正常停止 --&gt; 利用次数，不建议死循环</span></span><br><span class="line"><span class="comment">// 2、 建议使用标志位 --&gt; 设置一个标志位</span></span><br><span class="line"><span class="comment">// 3、 不要使用 stop(), destroy() 等过时的方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStopThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1、 设置一个标志位</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> ( flag )&#123;</span><br><span class="line">            System.out.println( <span class="string">&quot;run &quot;</span> + i + <span class="string">&quot; Thread&quot;</span> );</span><br><span class="line">            i = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.flag = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TestStopThread testStopThread = <span class="keyword">new</span> TestStopThread();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread( testStopThread ).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++ ) &#123;</span><br><span class="line"></span><br><span class="line">            System.out.println( <span class="string">&quot;main &quot;</span> + i );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ( i == <span class="number">90</span> )&#123;</span><br><span class="line">                <span class="comment">// 2、 调用 stop 方法切换标志位, 使线程停止</span></span><br><span class="line"></span><br><span class="line">                testStopThread.stop();</span><br><span class="line">                System.out.println( <span class="string">&quot;此处线程停止&quot;</span> );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        从上文的代码可以看出，使用标记位的方式，设置一个 flag 。通过满足某个条件后，通过我们自主定义的 stop 方法来修改 flag 的状态，从而停止线程的运行。</p>
<h5 id="线程礼让"><a href="#线程礼让" class="headerlink" title="线程礼让"></a>线程礼让</h5><p>​        线程礼让需要通过 yield 方法来实现。当某个正在运行的线程执行 yeild 线程礼让方法后，当前正在执行的线程会暂停运行，但不会阻塞。执行线程礼让后，会将当前运行中的从运行状态转为就绪状态。这会让当前待执行的线程进行再竞争，使得Cpu重新调度。</p>
<p>​        另外，礼让会让Cpu重新调度，但是线程礼让不一定成功，基本上看Cpu的心情。</p>
<p>​        下面给一个礼让的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestYield</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println( Thread.currentThread().getName() +  <span class="string">&quot;--&gt; 线程开始执行 &quot;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep( <span class="number">1000</span> );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println( Thread.currentThread().getName() + <span class="string">&quot;--&gt; 线程结束执行&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TestYield testYield = <span class="keyword">new</span> TestYield();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread( testYield, <span class="string">&quot;TestOne&quot;</span> ).start();</span><br><span class="line">        Thread.yield(); <span class="comment">// 此处对线程 TestOne 进行礼让</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread( testYield, <span class="string">&quot;TestTwo&quot;</span> ).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        需要反复声明的时，线程礼让不一定会成功，一般而言都是看 Cpu 的心情。</p>
<h5 id="线程休眠"><a href="#线程休眠" class="headerlink" title="线程休眠"></a>线程休眠</h5><p>​        线程休眠是通过 sellp 方法来使得线程暂时停止，向 sleep 方法中传入的参数是线程阻塞的毫秒数。</p>
<ul>
<li><p>存在异常 InterrupException ，使用 sellp 方法时需要将这个异常捕获 或者 将该异常抛出</p>
</li>
<li><p>再时间到达后，线程会再次进入就绪状态</p>
</li>
<li><p>sellp 方法可以模拟网络延时</p>
</li>
<li><p>最重要的是，每一个对象都有一个锁，sellp 方法不会释放锁</p>
<p>​    以下给出一个线程休眠的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印系统时间，以秒为单位 完成延时</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSleep</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> timeDown = <span class="number">10</span>; <span class="comment">// 结束计时</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Date date = <span class="keyword">new</span> Date( System.currentTimeMillis() );</span><br><span class="line">        TestSleep testSleep = <span class="keyword">new</span> TestSleep();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ( <span class="keyword">true</span> )&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">1000</span> );</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 获取格式化输出类</span></span><br><span class="line">                SimpleDateFormat simpleDateFormat = <span class="keyword">new</span> SimpleDateFormat( <span class="string">&quot;HH:mm:ss&quot;</span> );</span><br><span class="line">                System.out.println( simpleDateFormat.format(date) );</span><br><span class="line">                date = <span class="keyword">new</span> Date( System.currentTimeMillis() );</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                System.out.println( <span class="string">&quot; 延时处出现错误 &quot;</span> );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> ( flag )&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">1000</span> );</span><br><span class="line">                System.out.println( flag );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                System.out.println( <span class="string">&quot; 线程出现错误 &quot;</span> );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.flag = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        在上面的代码中，我们使用 SimpleDateFormat 类的相关方法 和 sleep 线程休眠 来完成模拟一个系统时间的打印( 以每一秒为单位来打印 )。</p>
</li>
</ul>
<h5 id="线程强制执行"><a href="#线程强制执行" class="headerlink" title="线程强制执行"></a>线程强制执行</h5><p>​        线程强制执行需要借助 join 方法，这个方法被调用后，可以被想象为插队。Join 方法可以合并线程，待线程执行完毕后，再执行其他线程。在 执行 join 方法时，其他线程会被阻塞。</p>
<p>​        另外，最重要的是，join 方法是相当霸道的。使用 join 方法会导致其他的所有线程全部阻塞，直到执行 join 方法的线程死亡。因此，如非必要，尽可能的不要使用 join 方法。</p>
<p>​        下面给出一个 join 方法的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试 Join 方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJoin</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ ) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">500</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println( <span class="string">&quot;The Thread run -&gt; &quot;</span> + i );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TestJoin testJoin = <span class="keyword">new</span> TestJoin();</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread( testJoin );</span><br><span class="line">        thread.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">200</span>; i++ ) &#123;</span><br><span class="line">            <span class="keyword">if</span> ( i == <span class="number">100</span> ) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    thread.join();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    System.out.println( <span class="string">&quot;Join处出现异常&quot;</span> );</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println( <span class="string">&quot;The main run -----&gt; &quot;</span> + i );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        将上方的代码运行结束后，可以发现，一旦线程执行 join 方法，其他的线程都会被暂停。join 方法执行后，Cpu 会优先执行调用 join 方法的线程。</p>
<h4 id="观测线程状态"><a href="#观测线程状态" class="headerlink" title="观测线程状态"></a>观测线程状态</h4><p>​        JDK 提供了线程状态的几种常量，在 java 中，使用 Thread.state 可以获取线程状态</p>
<ul>
<li><p>NEW 尚未启动</p>
</li>
<li><p>RUNNABLE 正在Java虚拟机中执行</p>
</li>
<li><p>BLOCKED 被阻塞等待监视器锁定</p>
</li>
<li><p>WAITING 等待其他线程执行特定动作</p>
</li>
<li><p>TIMED_WATING 等待其他线程执行动作到指定等待时间</p>
</li>
<li><p>TERMINATED 线程死亡</p>
<p>下面提供一个获取线程状态的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStart</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ ) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">500</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println( <span class="string">&quot;****************************&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        TestStart testStart = <span class="keyword">new</span> TestStart();</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread( testStart );</span><br><span class="line"></span><br><span class="line">        Thread.State state = thread.getState();</span><br><span class="line">        System.out.println( state );</span><br><span class="line"></span><br><span class="line">        thread.start();</span><br><span class="line">        state = thread.getState();</span><br><span class="line">        System.out.println( state );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ( state != Thread.State.TERMINATED )&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep( <span class="number">1000</span> );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            state = thread.getState();</span><br><span class="line">            System.out.println( state );</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        执行上方的代码可以得到线程在运行中的状态变化。</p>
</li>
</ul>
<h2 id="静态代理"><a href="#静态代理" class="headerlink" title="静态代理"></a>静态代理</h2><p>​        真实对象 和 代理对象 实现同一个接口，代理对象 必须代理 真实角色。</p>
<h4 id="静态的代理的例子"><a href="#静态的代理的例子" class="headerlink" title="静态的代理的例子"></a>静态的代理的例子</h4><p>​        以下面的代码为例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticProxy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        WeddingCompany weddingCompany = <span class="keyword">new</span> WeddingCompany( <span class="keyword">new</span> You() );</span><br><span class="line">        weddingCompany.happyMarry();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Marry</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">happyMarry</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 真实角色</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">You</span> <span class="keyword">implements</span> <span class="title">Marry</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">happyMarry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println( <span class="string">&quot;You a Marry&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 代理角色</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeddingCompany</span> <span class="keyword">implements</span> <span class="title">Marry</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Marry target;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WeddingCompany</span><span class="params">( Marry target )</span></span>&#123;  <span class="comment">// 传入一个实现了 Marry 接口的类对象</span></span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">happyMarry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        before();</span><br><span class="line">        <span class="keyword">this</span>.target.happyMarry();</span><br><span class="line">        after();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Marry after&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Marry before&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        从上面的代码可以看出，我们在执行 happMarry 函数时并没有使用 真实角色You直接调用，而是通过 代理角色WeddingCompany 代为执行。这种方式就称之为静态代理。</p>
<h4 id="静态代理的好处"><a href="#静态代理的好处" class="headerlink" title="静态代理的好处"></a>静态代理的好处</h4><p>​        1. 代理对象可以作真实对象做不了的事情。</p>
<p>​        2. 真实对象可以专注于做自己的事情。</p>
<h2 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h2><p>​        Lambda表达式是为了简化程序中的代码而设计出来的一种函数式编程法。在使用 Lambda 时，必须借助函数式接口。</p>
<p>​    </p>
<h4 id="函数式接口"><a href="#函数式接口" class="headerlink" title="函数式接口"></a>函数式接口</h4><p>​        所谓函数式接口，就是当一个接口中只包含一个抽象方法时，那么她就是一个函数式接口。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Marry</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">happyMarry</span><span class="params">(<span class="keyword">int</span> nums)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        上方代码中的 Marry 接口 和 Runnable 接口都属于函数式接口，因为她们都只有一个抽象方法。因此在对这两个接口进行实现时，可以使用 Lambda 表达式。</p>
<p>​        对于函数式接口，可以通过 Lambda 表达式来创建该接口的对象。</p>
<h4 id="Lambda-表达式的演变"><a href="#Lambda-表达式的演变" class="headerlink" title="Lambda 表达式的演变"></a>Lambda 表达式的演变</h4><p>​        Lambda 表达式是通过一步一步演化而来，以下使用代码作为演示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TestThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestLambda</span></span>&#123;</span><br><span class="line">    <span class="comment">// 3、定义静态内部类</span></span><br><span class="line"><span class="comment">//    static class Like implements ILikeLambda&#123;</span></span><br><span class="line"><span class="comment">//        @Override</span></span><br><span class="line"><span class="comment">//        public void like(String name) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println( name );</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 4、局部内部类</span></span><br><span class="line"><span class="comment">//        class Like implements ILikeLambda&#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public void like(String name) &#123;</span></span><br><span class="line"><span class="comment">//                System.out.println( name );</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5、匿名内部类</span></span><br><span class="line"><span class="comment">//        ILikeLambda like = new ILikeLambda() &#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public void like(String name) &#123;</span></span><br><span class="line"><span class="comment">//                System.out.println( name );</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        like.like(&quot; TestOne &quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6、使用 Lambda 表达式</span></span><br><span class="line">        ILikeLambda like = ( String name ) -&gt; &#123;</span><br><span class="line">            System.out.println( <span class="string">&quot;name&quot;</span> + name );</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 7、Lambda 表达式简化 省略参数类型 和 大括号(只有在代码体中只有一行代码时才可以省略大括号)</span></span><br><span class="line">        like = ( name ) -&gt; System.out.println( <span class="string">&quot;name : &quot;</span> + name );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1、定义函数式接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ILikeLambda</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">like</span><span class="params">( String name )</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、定义实现类</span></span><br><span class="line"><span class="comment">//class Like implements ILikeLambda&#123;</span></span><br><span class="line"><span class="comment">//    @Override</span></span><br><span class="line"><span class="comment">//    public void like(String name) &#123;</span></span><br><span class="line"><span class="comment">//        System.out.println( name );</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br></pre></td></tr></table></figure>

<p>​        从上方的代码中可以看到，Lambda 表达式是用来对程序进行简化操作的方法。其中简化的发展经过了 实现类 –&gt; 静态内部类 –&gt; 内部类 –&gt; 匿名内部类 –&gt; Lambda 表达式。</p>
<p>​        在某些情况下，Lambda 表达式可以继续省略，省略 参数类型 和 花括号，但要遵循以下规则：</p>
<ul>
<li>Lambda 表达式只能在只有一行代码时才可以简化成一行，否则就要使用代码块</li>
<li>使用 Lambda 表达式的前提是目标是一个函数式接口</li>
<li>多个参数也可以去掉参数类型，要去掉就都要去掉，并且参数要包含在括号中</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">31</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"live2d-widget-model-haruto"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>

<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/love.js"></script>

<!--动态线条背景-->
<script type="text/javascript"
color="220,220,220" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
</script>

<!--浏览器搞笑标题-->
<script type="text/javascript" src="\js\FunnyTitle.js"></script>
